(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0c2689"],{"49d2":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},["/StoreOwner/PublishStore"!=t.$route.path?a("q-breadcrumbs",{staticClass:"text-grey"},[a("q-breadcrumbs-el",{attrs:{label:"Store",icon:"store"}}),a("q-breadcrumbs-el",{attrs:{label:"Inventory",icon:"inventory"}}),a("q-breadcrumbs-el",{attrs:{label:"Products"}})],1):t._e(),a("br"),a("div",{staticClass:"bg-grey-3"},[a("q-toolbar",[t.maximum_products>t.data.length?a("AddProduct"):a("AddMoreItem",{attrs:{itemType:"Products"}}),t._v("Â \n      "),a("q-space"),"/StoreOwner/PublishStore"!=t.$route.path?a("q-input",{attrs:{square:"",outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e()],1),a("q-separator"),a("q-toolbar",[a("p",{staticClass:"text-bold"},[a("br"),t._v("\n        Maximum Items: "+t._s(t.maximum_products)+"\n        "),a("br"),t._v("\n        Current Items: "+t._s(t.data.length)+"\n      ")])])],1),a("q-table",{attrs:{data:t.data,columns:t.columns,"row-key":"name",filter:t.filter,grid:"","hide-header":""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("div",{staticClass:"q-pa-xs col-xs-12  col-md-4 col-lg-3"},[a("q-card",[a("q-img",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.row.photos[0]}}),"past"!=t.$compareToCurrentDate(e.row.expiry)?a("AdvertiseButton",{attrs:{related_id:e.row._id,item_type:"product"}}):a("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(300%)"},attrs:{label:"Expired",icon:"info",color:"red"},on:{click:t.unavailableMessage}}),a("q-separator"),a("q-list",{attrs:{dense:""}},t._l(e.cols.filter(function(t){return"desc"!==t.name}),function(e){return a("q-item",{key:e.name},[a("q-item-section",[a("q-item-label",[t._v(t._s(e.label))])],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.value))])],1)],1)}),1),a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{staticClass:"full-width",attrs:{color:"primary",flat:"",label:"Manage"},on:{click:function(a){return t.$router.push("Products/ManageProduct?product="+e.row._id)}}})],1)],1)],1)]}}])})],1)},i=[],s=(a("7514"),a("6eaf")),o=a("6356"),n=a("c078"),l={components:{AddProduct:s["a"],AdvertiseButton:o["a"],AddMoreItem:n["a"]},data:function(){return{data:[],filter:"",maximum_products:0,columns:[{name:"SKU",required:!0,label:"SKU",align:"left",field:"SKU"},{name:"product_name",required:!0,label:"Product Name",align:"left",field:"product_name"},{name:"category",align:"center",label:"Category",field:"category"},{name:"regular_price",label:"Regular Price",field:"regular_price"},{name:"sale_price",label:"Sale Price",field:"sale_price"},{name:"stock",label:"Stock",field:"stock"}]}},methods:{max_product:function(){this.$q.dialog({title:"Maximum number of Products reached!",message:"To add more product, you may avail it via Bank Deposit or Layaway"})},getData:function(){var t=this;this.$dbCon.service("products").find({query:{store_id:this.$local.getItem("store_token"),deleted:!1}}).then(function(e){t.data=e.data,t.$forceUpdate()})},unavailableMessage:function(){this.$q.dialog({title:"Unavailable Item",message:"This item is no longer available due to expired item subscription. You may reactivate this item again by purchasing a subscription."})}},mounted:function(){var t=this;this.$dbCon.service("products").onDataChange(function(){t.getData()}),this.$dbCon.service("product-subscriptions").onDataChange(function(){t.getData()}),this.$dbCon.service("product-subscriptions").find({query:{store_id:this.$local.getItem("store_token"),$or:[{date_end:{$gte:new Date},status:"Paid"},{status:"Free"}]}}).then(function(e){var a=0;e.data.map(function(t){a+=t.items}),t.maximum_products=a})}},c=l,d=a("2877"),u=Object(d["a"])(c,r,i,!1,null,null,null);e["default"]=u.exports}}]);