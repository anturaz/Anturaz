(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4aa7652b","236cbbba","2d0c2689"],{"060d":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-form",{on:{submit:t.save,reset:t.back}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("q-card-section",{staticClass:"text-black row"},[s("div",{staticClass:"q-pb-md col row",class:t.$q.screen.lt.md?"":"q-mr-lg q-ml-lg"},[s("div",{staticClass:"col-md-2 col-sm-12 col-xs-12 flex flex-center"},[s("q-card",{staticStyle:{width:"160px",height:"160px"},style:t.photoError?"border:1px solid red":"",attrs:{flat:"",bordered:""}},[""==t.store.logo?s("q-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{flat:""},on:{click:function(e){return t.$refs.uploader.click()}}},[s("q-card-section",[s("q-icon",{attrs:{name:"add",size:"50px"}}),s("div",{staticClass:"text-grey text-caption"},[t._v("\n                      Upload Store Logo\n                    ")])],1)],1):t._e(),""!=t.store.logo?s("q-btn",{staticClass:"absolute",staticStyle:{top:"1",right:"7px",transform:"translateY(20%)","z-index":"1"},attrs:{round:"",color:"primary",icon:"edit",size:"12px"},on:{click:function(e){return t.$refs.uploader.click()}}}):t._e(),""!=t.store.logo?s("img",{staticStyle:{width:"100%",border:"1px solid grey"},attrs:{src:t.store.logo,width:"100%",height:"100%"},on:{mouseover:function(e){t.photoFocus=!0},mouseleave:function(e){t.photoFocus=!1}}}):t._e()],1)],1),s("div",{staticClass:"col-md-10 col-sm-12 col-xs-12 q-pt-md",class:t.$q.screen.lt.md?"q-pt-md":"q-pl-md"},[s("div",{staticClass:"text-black text-subtitle1",attrs:{align:t.$q.screen.lt.md?"center":""}},[t._v("\n                Tell us about your store\n              ")]),s("q-editor",{staticClass:"q-mt-sm",style:t.store_details_error?"border: solid red 1px":"",attrs:{"min-height":"6rem"},on:{input:function(){return t.validateStoreDetails()}},model:{value:t.store.store_details,callback:function(e){t.$set(t.store,"store_details",e)},expression:"store.store_details"}}),t.store_details_error?t._e():s("div",{attrs:{align:"right"}},[s("small",{staticClass:"text-grey"},[t._v(t._s(t.store_details_counter)+" / 1000 words")])]),t.store_details_error?s("small",{staticClass:"text-red"},[t._v(t._s(t.store_details_error_message))]):t._e()],1)]),s("input",{ref:"uploader",staticClass:"hidden",attrs:{type:"file"},on:{change:t.fileSelected}}),s("div",{staticClass:"row",class:t.$q.screen.lt.md?"":"q-ma-lg"},[s("q-input",{staticClass:"col-xs-12",attrs:{label:"Store Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.store_name,callback:function(e){t.$set(t.store,"store_name",e)},expression:"store.store_name"}}),s("q-input",{staticClass:"col-xs-12 q-mb-lg",attrs:{label:"Store Unique Link",rules:[function(t){return""!=t.trim()||"This Field is required"}],prefix:"www.anturaz.com/store/",hint:"suggestion: www.anturaz.com/store/"+t.store.store_name.toLowerCase().split(" ").join("-"),"lazy-rules":"",dense:""},model:{value:t.store.unique_link,callback:function(e){t.$set(t.store,"unique_link",e)},expression:"store.unique_link"}}),s("q-select",{ref:"categories",staticClass:"col-xs-12 q-mb-md",attrs:{rules:[function(){return 0!=t.store.categories.length||"This Field is required"}],"lazy-rules":"","use-chips":"","use-input":"",multiple:"","fill-input":"","input-debounce":"0",options:t.categories_option,label:"Categories",hint:"You may select one or multiple",placeholder:t.categories_done?"search..":"",dense:""},on:{filter:t.filterCategories,focus:function(){t.categories_done=!0},blur:function(){t.categories_done=!1}},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.$q.screen.lt.md&&t.categories_done,expression:"$q.screen.lt.md && categories_done"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"done",unelevated:"",color:"primary"}})],1)],1)]},proxy:!0},{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[t._v("No results")])],1)]},proxy:!0}]),model:{value:t.store.categories,callback:function(e){t.$set(t.store,"categories",e)},expression:"store.categories"}}),s("q-select",{staticClass:"col-xs-12 q-mb-md",attrs:{"use-chips":"","use-input":"",multiple:"","fill-input":"",rules:[function(){return 0!=t.store.market_areas.length||"This Field is required"}],"lazy-rules":"","input-debounce":"0",options:t.market_areas_option,label:"Market Areas",placeholder:t.market_areas_done?"search..":"",hint:"You may select one or multiple",dense:""},on:{filter:t.filterMarketPlace,focus:function(){t.market_areas_done=!0},blur:function(){t.market_areas_done=!1}},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.$q.screen.lt.md&&t.market_areas_done,expression:"$q.screen.lt.md && market_areas_done"},{name:"close-popup",rawName:"v-close-popup"}],ref:"market_areas_done",attrs:{label:"done",unelevated:"",color:"primary"}})],1)],1)]},proxy:!0},{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[t._v("No results")])],1)]},proxy:!0}]),model:{value:t.store.market_areas,callback:function(e){t.$set(t.store,"market_areas",e)},expression:"store.market_areas"}}),s("q-input",{staticClass:"col-xs-12",attrs:{label:"Owner/Representative's Email Address",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),s("q-input",{staticClass:"col-xs-12",attrs:{label:"Owner/Representative's First Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.fname,callback:function(e){t.$set(t.user,"fname",e)},expression:"user.fname"}}),s("q-input",{staticClass:"col-xs-12",attrs:{label:"Owner/Representative's Last Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.lname,callback:function(e){t.$set(t.user,"lname",e)},expression:"user.lname"}})],1)])],1)]),"/StoreOwner"!=t.$route.fullPath?s("div",{attrs:{align:"right"}},[s("q-btn",{ref:"btn_back",staticClass:"q-mr-sm",attrs:{label:"Back",color:"grey",type:"reset","no-caps":"",flat:""},on:{mouseover:function(e){t.$refs.btn_back.unelevated=!0,t.$refs.btn_back.flat=!1},mouseleave:function(e){t.$refs.btn_back.flat=!0,t.$refs.btn_back.unelevated=!1}}}),s("q-btn",{ref:"btn_save_next",attrs:{label:"Save & Next",color:"primary",type:"submit","no-caps":"",outline:""},on:{mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1):t._e(),s("div",{attrs:{else:"",align:"right"}},[s("q-btn",{ref:"btn_save_next",attrs:{label:"Save",color:"primary",type:"submit","no-caps":"",outline:""},on:{mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1)])],1)},r=[],i=(s("28a5"),s("7514"),s("a34a")),n=s.n(i),o=(s("96cf"),s("c973")),l=s.n(o),c=s("c40a"),u={data:function(){return{error:[],file:{},photoUrl:"",photoFocus:!1,photoError:!1,store_details_error:!1,store_details_error_message:"",store_details_counter:0,market_areas_option:[],categories_option:[],categories_list:[],store:{},user:{},market_areas_done:!1,categories_done:!1}},methods:{fileSelected:function(){var t=l()(n.a.mark(function t(e){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.file={},this.file=e.target.files[0],this.$q.loading.show(),t.next=5,this.$uploadFile(this.file);case 5:this.store.logo=t.sent,this.$q.loading.hide(),console.log(this.photoUrl),this.$forceUpdate(),""!=this.store.logo&&(this.photoError=!1);case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),filterMarketPlace:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.market_areas_option=c["a"].filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},filterCategories:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.categories_option=a.categories_list.filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},save:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("/StoreOwner"!=this.$route.fullPath&&(this.store.current_step=3),""!=this.store.logo){t.next=4;break}return this.photoError=!0,t.abrupt("return");case 4:if(this.validateStoreDetails(),!this.store_details_error){t.next=7;break}return t.abrupt("return");case 7:this.$dbCon.service("store").patch(this.store._id,this.store);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),back:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.store.current_step=1,t.next=3,this.$dbCon.service("store").patch(this.store._id,this.store);case 3:return t.next=5,this.$dbCon.service("users").patch(this.user._id,this.user);case 5:return t.next=7,this.$forceUpdate();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getData:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.store=t.data[0],void 0!=e.store.unique_link&&""!=e.store.unique_link||(e.store.unique_link=e.store.store_name.toLowerCase().split(" ").join("-")),e.photoUrl=e.store.logo});case 2:return t.next=4,this.$getUser();case 4:this.user=t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),validateStoreDetails:function(){if(""==this.$sanitize(this.store.store_details).trim())return this.store_details_error=!0,void(this.store_details_error_message="This field is required.");this.store_details_error=!1,this.store_details_counter=this.$wordsCount(this.$sanitize(this.store.store_details).trim()),this.store_details_counter>1e3?(this.store_details_error=!0,this.store_details_error_message="Maximum of 1000 words only."):this.store_details_error=!1}},mounted:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.market_areas_option=c["a"],this.$dbCon.service("categories").find({query:{$select:["category_name"]}}).then(function(t){t.data.map(function(t){e.categories_option.push(t.category_name),e.categories_list.push(t.category_name)})}),this.$dbCon.service("store").onDataChange(function(){e.getData()}),this.$dbCon.service("users").onDataChange(function(){e.getData()});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),watch:{"store.unique_link":function(){this.store.unique_link=this.store.unique_link.toLowerCase().split("-").join(" ").trim(),this.store.unique_link=this.store.unique_link.toLowerCase().split(" ").join("-")}}},d=u,p=s("2877"),m=Object(p["a"])(d,a,r,!1,null,null,null);e["a"]=m.exports},"0fda":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{directives:[{name:"show",rawName:"v-show",value:2==t.step,expression:"step==2"}],staticClass:"col-md-12 col-sm-12 row"},[s("q-input",{ref:"inp_sku",staticClass:"col-md-12 col-xs-12 q-pt-sm",attrs:{dense:"",stack:"",label:"Stock Keeping Unit(SKU)",rules:[function(t){return""!=t.trim()||"Required"}]},model:{value:t.SKU,callback:function(e){t.SKU=e},expression:"SKU"}}),s("q-input",{ref:"inp_service_name",staticClass:"col-12 q-pt-sm",attrs:{dense:"",stack:"",label:"Service Name",maxlength:60,rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":"",counter:""},model:{value:t.service_name,callback:function(e){t.service_name=e},expression:"service_name"}}),s("p",{staticClass:"text-title text-black"},[t._v("Description:")]),s("div",{staticClass:"col-12 q-pt-sm"},[s("q-editor",{ref:"inp_description",style:t.description_error?"border:solid red 1px":"",attrs:{"min-height":"4rem"},on:{input:function(){return t.validateDescription()}},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t.description_error?t._e():s("div",{attrs:{align:"right"}},[s("small",{staticClass:"text-grey"},[t._v(t._s(t.description_counter)+" / 1000 words")])]),t.description_error?s("small",{staticClass:"text-red"},[t._v(t._s(t.description_error_message))]):t._e()],1),s("q-input",{ref:"inp_regular_price",staticClass:"col-6 q-pt-sm q-pr-sm",attrs:{dense:"",stack:"",label:"Regular Price",rules:[function(e){return t.temp_regular_price>0||"Invalid Regular Price"},function(t){return""!=t.trim()||"Required"}],"lazy-rules":""},on:{focus:t.toInputRegularPrice,blur:t.toChangeRegularPrice},model:{value:t.regular_price,callback:function(e){t.regular_price=e},expression:"regular_price"}}),s("q-input",{staticClass:"col-6 q-pt-sm q-pr-sm",attrs:{dense:"",stack:"",label:"Sale Price","error-message":"Invalid Sale Price",error:t.sale_price_error,rules:[]},on:{focus:t.toInputSalePrice,blur:t.toChangeSalePrice},model:{value:t.sale_price,callback:function(e){t.sale_price=e},expression:"sale_price"}})],1),s("input",{ref:"fileInput0",staticClass:"col-12 hidden",attrs:{type:"file",multiple:""},on:{change:t.onImageSelected0}}),s("input",{ref:"fileInput1",staticClass:"col-12 hidden",attrs:{type:"file"},on:{change:t.onImageSelected1}}),s("input",{ref:"fileInput2",staticClass:"col-12 hidden",attrs:{type:"file"},on:{change:t.onImageSelected2}}),s("input",{ref:"fileInput3",staticClass:"col-12 hidden",attrs:{type:"file"},on:{change:t.onImageSelected3}}),s("br"),s("div",{directives:[{name:"show",rawName:"v-show",value:3==t.step,expression:"step==3"}],staticClass:"row flex q-gutter-md justify-center",attrs:{align:"center"}},t._l([0,1,2,3],function(e){return s("q-card",{key:e,staticStyle:{"min-width":"154px","max-width":"154px","min-height":"152px","max-height":"152px",cursor:"pointer",overflow:"hidden"},style:t.validation[3+e]?"":"border-color:red",attrs:{flat:"",bordered:""},on:{mouseover:function(s){t.currentPic=e},mouseleave:function(e){t.currentPic=-1}}},[0==t.fileSelected[e].length?s("q-card-section",[s("br"),s("br"),s("q-btn",{attrs:{icon:"add",color:"primary",round:"",unelevated:""},on:{click:function(s){t.currentPic=-1,t.$refs["fileInput"+e].click()}}})],1):t._e(),t.currentPic==e?s("q-card-section",[s("br"),s("br"),s("q-btn",{attrs:{icon:"edit",color:"primary",round:"",unelevated:""},on:{click:function(s){t.currentPic=-1,t.$refs["fileInput"+e].click()}}}),t._v(" \n        "),s("q-btn",{attrs:{icon:"delete",color:"red",round:"",unelevated:""},on:{click:function(s){t.currentPic=-1,t.fileSelected[e]=[]}}})],1):t._e(),t.currentPic!=e?s("img",{directives:[{name:"show",rawName:"v-show",value:0!=t.fileSelected[e].length,expression:"fileSelected[i].length!=0"}],attrs:{src:t.photoUrl[e],width:"100%",height:"100%"}}):t._e()],1)}),1),s("div",{directives:[{name:"show",rawName:"v-show",value:4==t.step,expression:"step==4"}],staticClass:"col-12"},[s("div",{staticClass:"col-12 text-title text-black text-bold"},[t._v("Payment Method")]),s("div",{staticClass:"col-12 q-pt-sm row items-center"},[s("div",{staticClass:"col-11 text-title text-grey"},[t._v("Online Debit/Credit Card (default)")]),s("q-radio",{staticClass:"col-1",attrs:{active:!0,readonly:""}})],1),s("div",{staticClass:"col-12 q-pt-sm row items-center"},[s("div",{staticClass:"col-11 text-title text-grey"},[t._v("Bank Deposit/Wire Transfer (default)")]),s("q-radio",{staticClass:"col-1",attrs:{active:!0,readonly:""}})],1),s("div",{staticClass:"col-12 q-pt-sm text-title text-black text-bold"},[t._v("Other Flexible Options for Your Clients")]),s("div",{staticClass:"col-12 row items-center"},[s("div",{staticClass:"col-11 text-title text-grey"},[t._v("Enable Cash on Fulfillment?")]),s("q-checkbox",{staticClass:"col-1",model:{value:t.cof,callback:function(e){t.cof=e},expression:"cof"}})],1),s("div",{staticClass:"col-12 row items-center"},[s("div",{staticClass:"col-11 text-title text-grey"},[t._v("\n        Enable Layaway?\n        "),s("q-btn",{attrs:{color:"grey",size:"sm",round:"",flat:"",icon:"help"}},[s("q-popup-proxy",[s("q-banner",[s("div",{staticClass:"text-bold"},[t._v("What is Layaway?")]),t._v("a system of paying a deposit to secure an item for later purchase.\n            ")])],1)],1)],1),s("q-checkbox",{staticClass:"col-1",model:{value:t.lay_away,callback:function(e){t.lay_away=e},expression:"lay_away"}})],1),s("div",{staticClass:"col-12 text-title text-black text-bold"},[t._v("Others")]),s("div",{staticClass:"col-12 row items-center"},[s("div",{staticClass:"col-11 text-title text-grey"},[t._v("Require 20% downpayment upon booking if Cash on Fulfillment?")]),s("q-checkbox",{staticClass:"col-1",model:{value:t.dp_cof,callback:function(e){t.dp_cof=e},expression:"dp_cof"}})],1)])])},r=[],i=(s("7f7f"),s("6762"),s("2fdb"),s("a34a")),n=s.n(i),o=(s("7514"),s("96cf"),s("c973")),l=s.n(o),c=(s("5df3"),s("1c4c"),{props:["step","category"],data:function(){return{currentPic:-1,opened:!1,category:"",category_options:[],SKU:"",service_name:"",description:"",regular_price:"",temp_regular_price:"",sale_price:"",temp_sale_price:null,cof:!0,lay_away:!0,dp_cof:!0,fileSelected:[[],[],[],[]],photoUrl:["","","",""],validation:[],sale_price_error:!1,description_error:!1,description_error_message:"",description_counter:0}},methods:{onImageSelected0:function(t){var e=this;Array.from(t.target.files).map(function(s,a){e.photoUrl[a]=URL.createObjectURL(t.target.files[a]),e.$forceUpdate(),e.fileSelected[a]=t.target.files[a],e.$forceUpdate()})},onImageSelected1:function(t){this.photoUrl[1]=URL.createObjectURL(t.target.files[0]),this.$forceUpdate(),this.fileSelected[1]=t.target.files[0],this.$forceUpdate()},onImageSelected2:function(t){this.photoUrl[2]=URL.createObjectURL(t.target.files[0]),this.$forceUpdate(),this.fileSelected[2]=t.target.files[0],this.$forceUpdate()},onImageSelected3:function(t){this.photoUrl[3]=URL.createObjectURL(t.target.files[0]),this.$forceUpdate(),this.fileSelected[3]=t.target.files[0],this.$forceUpdate()},save:function(){var t=l()(n.a.mark(function t(){var e,s,a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$q.loading.show(),e=[],t.next=4,this.uploadImage(this.fileSelected[0]);case 4:return e[0]=t.sent,t.next=7,this.uploadImage(this.fileSelected[1]);case 7:return e[1]=t.sent,t.next=10,this.uploadImage(this.fileSelected[2]);case 10:return e[2]=t.sent,t.next=13,this.uploadImage(this.fileSelected[3]);case 13:return e[3]=t.sent,console.log(e),t.next=17,this.$dbCon.service("service-subscriptions").find({query:{store_id:this.$local.getItem("store_token"),$or:[{date_end:{$gte:new Date},status:"Paid"},{status:"Free"}],$sort:{date_ordered:-1}}}).then(function(t){return 0==t.data.length?"":"Free"==t.data[0].status?"":"Paid"==t.data[0].status?t.data[0].date_end:void 0});case 17:s=t.sent,this.$dbCon.service("services").create({store_id:this.$local.getItem("store_token"),category:this.category,SKU:this.SKU,service_name:this.service_name,description:this.description,regular_price:this.temp_regular_price,sale_price:this.temp_sale_price,cof:this.cof,lay_away:this.lay_away,deleted:!1,photos:e,expiry:s,logs:[{event:"added",date:new Date}],createdAt:new Date}).then(function(){a.$q.loading.hide(),a.opened=!1,a.$q.dialog({title:"Success!",message:"You successfully added a service."})}),this.$EventBus.$emit("update-step",6);case 20:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),validate:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.validation=[],2!=this.step){t.next=15;break}return t.next=4,this.$refs.inp_service_name.validate();case 4:return this.validation[0]=t.sent,t.next=7,this.$refs.inp_regular_price.validate();case 7:return this.validation[1]=t.sent,t.next=10,this.$refs.inp_sku.validate();case 10:return this.validation[2]=t.sent,this.validateDescription(),this.description_error&&(this.validation[3]=!1),parseFloat(this.temp_regular_price)<=parseFloat(this.temp_sale_price)?(this.sale_price_error=!0,this.validation[4]=!1):parseFloat(this.temp_sale_price)<1?(this.sale_price_error=!0,this.validation[4]=!1):this.sale_price_error=!1,t.abrupt("return",this.validation.includes(!1));case 15:if(3!=this.step){t.next=21;break}return this.validation[3]=0!=this.fileSelected[0].length,this.validation[4]=0!=this.fileSelected[1].length,this.validation[5]=0!=this.fileSelected[2].length,this.validation[6]=0!=this.fileSelected[3].length,t.abrupt("return",this.validation.includes(!1));case 21:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),uploadImage:function(){var t=l()(n.a.mark(function t(e){var s,a;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=new FormData,s.append(this.$appLink,e,e.name),t.next=4,this.$axios.post(this.$appLink+"/uploadServices",s);case 4:return a=t.sent,t.abrupt("return",a.data);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),toInputRegularPrice:function(){this.regular_price=this.temp_regular_price},toChangeRegularPrice:function(){this.temp_regular_price=this.regular_price,this.regular_price=this.$prettyMoney(this.regular_price)},toInputSalePrice:function(){this.sale_price=this.temp_sale_price},toChangeSalePrice:function(){this.temp_sale_price=this.sale_price,this.sale_price=this.$prettyMoney(this.sale_price)},validateDescription:function(){if(""==this.$sanitize(this.description).trim())return this.description_error=!0,void(this.description_error_message="This field is required.");this.description_error=!1,this.description_counter=this.$wordsCount(this.$sanitize(this.description).trim()),this.description_counter>1e3?(this.description_error=!0,this.description_error_message="Maximum of 1000 words only."):this.description_error=!1}},watch:{step:function(){5==this.step&&this.save()}},mounted:function(){var t=this;this.$dbCon.service("store").onDataChange(function(){t.category_options=[],t.$dbCon.service("store").get(t.$local.getItem("store_token")).then(function(e){t.$dbCon.service("categories").find({query:{category_name:{$in:e.categories},classification:"Service"}}).then(function(e){e.data.map(function(e){t.category_options.push(e.category_name)})})})})}}),u=c,d=s("2877"),p=Object(d["a"])(u,a,r,!1,null,null,null);e["a"]=p.exports},2732:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-md"},["/StoreOwner/PublishStore"!=t.$route.path?s("q-breadcrumbs",{staticClass:"text-grey"},[s("q-breadcrumbs-el",{attrs:{label:"Store",icon:"store"}}),s("q-breadcrumbs-el",{attrs:{label:"Inventory",icon:"inventory"}}),s("q-breadcrumbs-el",{attrs:{label:"Services"}})],1):t._e(),s("br"),s("div",{staticClass:"bg-grey-3"},[s("q-toolbar",[t.maximum_services>t.data.length?s("AddService"):s("AddMoreItem",{attrs:{itemtype:"Services"}}),t._v(" \n      "),s("q-space"),"/StoreOwner/PublishStore"!=t.$route.path?s("q-input",{attrs:{square:"",outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e()],1),s("q-separator"),s("q-toolbar",[s("p",{staticClass:"text-bold"},[s("br"),t._v("\n        Maximum Items: "+t._s(t.maximum_services)+"\n        "),s("br"),t._v("\n        Current Items: "+t._s(t.data.length)+"\n      ")])])],1),s("q-table",{attrs:{data:t.data,columns:t.columns,"row-key":"name",filter:t.filter,grid:"","hide-header":""},scopedSlots:t._u([{key:"item",fn:function(e){return[s("div",{staticClass:"q-pa-xs col-xs-12 col-md-4 col-lg-3"},[s("q-card",[s("q-img",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.row.photos[0]}}),"past"!=t.$compareToCurrentDate(e.row.expiry)?s("AdvertiseButton",{attrs:{related_id:e.row._id,item_type:"service"}}):s("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(300%)"},attrs:{label:"Expired",icon:"info",color:"red"},on:{click:t.unavailableMessage}}),s("q-separator"),s("q-list",{attrs:{dense:""}},t._l(e.cols.filter(function(t){return"desc"!==t.name}),function(e){return s("q-item",{key:e.name},[s("q-item-section",[s("q-item-label",[t._v(t._s(e.label))])],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.value))])],1)],1)}),1),s("q-card-actions",{attrs:{align:"around"}},[s("q-btn",{staticClass:"full-width",attrs:{color:"primary",flat:"",label:"Manage"},on:{click:function(s){return t.$router.push("Services/ManageService?service="+e.row._id)}}})],1)],1)],1)]}}])})],1)},r=[],i=(s("7514"),s("0fda")),n=s("6356"),o=s("c078"),l={components:{AddService:i["a"],AdvertiseButton:n["a"],AddMoreItem:o["a"]},data:function(){return{data:[],filter:"",columns:[{name:"SKU",required:!0,label:"SKU",align:"left",field:"SKU"},{name:"service_name",required:!0,label:"Service Name",align:"left",field:"service_name"},{name:"category",align:"center",label:"Category",field:"category"},{name:"regular_price",label:"Regular Price",field:"regular_price"},{name:"sale_price",label:"Sale Price",field:"sale_price"}],maximum_services:0}},methods:{max_service:function(){this.$q.dialog({title:"Maximum number of Services reached!",message:"To add more service, you may avail it via Bank Deposit or Layaway"})},getData:function(){var t=this;this.$dbCon.service("services").find({query:{store_id:this.$local.getItem("store_token"),deleted:!1}}).then(function(e){t.data=e.data})},advertise:function(){this.$q.dialog({title:"Alert",message:"Not yet working"})},unavailableMessage:function(){this.$q.dialog({title:"Unavailable Item",message:"This item is no longer available due to expired item subscription. You may reactivate this item again by purchasing a subscription."})}},mounted:function(){var t=this;this.$dbCon.service("services").onDataChange(function(){t.getData()}),this.$dbCon.service("service-subscriptions").onDataChange(function(){t.getData()}),this.$dbCon.service("service-subscriptions").find({query:{store_id:this.$local.getItem("store_token"),$or:[{date_end:{$gte:new Date},status:"Paid"},{status:"Free"}]}}).then(function(e){var s=0;e.data.map(function(t){s+=t.items}),t.maximum_services=s})}},c=l,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,null,null);e["default"]=d.exports},"2ca6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",["/StoreOwner/PublishStore"==t.$route.path?s("q-card",{staticClass:"q-pb-md",attrs:{flat:"",align:"center"}},[s("q-card-section",{staticClass:"row"},[s("q-icon",{staticClass:"col-12",attrs:{name:"verified_user",color:"primary",size:"100px"}}),s("div",{staticClass:"col-12 text-h4 text-bold text-primary"},[t._v("₱499.00/month")]),s("div",{staticClass:"col-12 text-h5"},[t._v("Store Advertisment")]),s("div",{staticClass:"col-12 q-pt-lg",attrs:{align:"center"}},[s("div",{staticClass:"text-h6"},[s("q-icon",{attrs:{name:"check",color:"primary"}}),t._v("Store will be featured\n        ")],1),s("div",{staticClass:"text-h6"},[s("q-icon",{attrs:{name:"check",color:"primary"}}),t._v("Store will be recommended on search results\n        ")],1)])],1),"PENDING"!=t.ads_status?s("q-card-section",{staticClass:"q-pl-md-xl q-pr-md-xl row justify-center"},[s("div",{staticClass:"col-md-5 col-xs-12 q-pt-lg q-pb-lg",attrs:{align:"left"}},[s("q-btn",{attrs:{round:"",label:"1",unelevated:"",color:"grey"}}),s("span",{staticClass:"q-pl-md text-grey"},[t._v("Select Number of Months")]),s("q-separator",{staticClass:"q-mt-sm"})],1),s("div",{staticClass:"col-12"}),s("div",{staticClass:"col-md-5"},[s("table",{attrs:{width:"100%"}},[s("tr",[s("td",[t._v("Monthly Fee")]),s("td",{attrs:{align:"right"}},[t._v(t._s(t.advertise_per_month))])]),s("tr",[s("td",[t._v("No. of Months")]),s("td",{staticStyle:{width:"30px"},attrs:{align:"right"}},[s("q-input",{ref:"input_months_of_advertisment",attrs:{type:"number",min:"1"},on:{blur:function(e){return t.months_of_advertisment_change()}},model:{value:t.months_of_advertisment,callback:function(e){t.months_of_advertisment=e},expression:"months_of_advertisment"}})],1)]),s("tr",[s("td",{attrs:{colspan:"2"}},[s("q-separator")],1)]),s("tr",[s("td",{staticClass:"text-bold"},[t._v("TOTAL")]),s("td",{attrs:{align:"right"}},[t._v(t._s(t.advertise_per_month*t.months_of_advertisment))])])])]),s("div",{staticClass:"col-12"}),s("div",{staticClass:"col-md-5 col-xs-12 q-pt-lg q-pb-lg",attrs:{align:"left"}},[s("q-btn",{attrs:{round:"",label:"2",unelevated:"",color:"grey"}}),s("span",{staticClass:"q-pl-md text-grey"},[t._v("Payment")]),s("q-separator",{staticClass:"q-mt-sm"})],1),s("div",{staticClass:"col-12"}),s("div",{staticClass:"col-md-5"},[s("q-btn-group",{attrs:{rounded:""}},[s("q-btn",{class:"OnlinePayment"==t.tab?"text-white":"text-grey",attrs:{rounded:"",color:"OnlinePayment"==t.tab?"primary":"white",label:"Online Payment",icon:"payment"},on:{click:function(e){t.tab="OnlinePayment"}}}),s("q-btn",{class:"BankDeposit"==t.tab?"text-white":"text-grey",attrs:{rounded:"",color:"BankDeposit"==t.tab?"primary":"white",label:"Bank Deposit",icon:"account_balance"},on:{click:function(e){t.tab="BankDeposit"}}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"BankDeposit"==t.tab,expression:"tab=='BankDeposit'"}]},[s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("1. Deposit amount to the following BDO bank account:")]),s("br"),s("div",{staticClass:"q-pl-md q-pt-xs"},[s("b",[t._v("Account Name:")]),t._v(" Anturaz, Inc.\n              "),s("br"),s("b",[t._v("Account Number:")]),t._v(" 1802 394 837\n              "),s("br"),s("b",[t._v("Bank Name:")]),t._v(" Banco De Oro\n              "),s("br"),s("b",[t._v("Amount:")]),t._v("\n              "+t._s(t.$prettyMoney(t.advertise_per_month*t.months_of_advertisment))+"\n            ")])]),s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("2. Upload deposit slip/screenshot of your payment")]),s("br"),s("div",{staticClass:"q-pl-md q-pt-xs"},[s("b",[t._v("A. Over-the-counter payments:")]),t._v(" Write you full name onto the deposit slip. Scan or take a photograph of the deposit slip\n              "),s("br"),s("b",[t._v("B. Online Banking:")]),t._v("\n              Take a screenshot of the successful transaction made\n            ")])]),s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("3. Wait until your payment is verified by the Anturaz Admin.")])]),s("div",{staticClass:"q-pa-sm items-right",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"primary",unelevated:"",label:"Pay via Bank Deposit"},on:{click:t.payViaBankDeposit}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:"OnlinePayment"==t.tab,expression:"tab=='OnlinePayment'"}]},[s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("1. Select Account Type from dropdown list. These are the following")]),s("div",[s("ul",[s("li",[t._v("Visa")]),s("li",[t._v("Mastercard")]),s("li",[t._v("American Express")])])])]),s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("2. Enter Account Information")]),s("div",[s("ul",[s("li",[t._v("Card Number")]),s("li",[t._v("Card Holder")]),s("li",[t._v("Expiry Date")]),s("li",[t._v("CVV")])])])]),s("div",{staticClass:"q-pa-sm items-right",attrs:{align:"right"}},[s("AltPayNet",{attrs:{onlinePaymentResult:t.onlinePaymentResult,item:{price:t.advertise_per_month*t.months_of_advertisment,description:t.months_of_advertisment+" Month/s of Advertisment ("+t.advertise_per_month+"/month)"}}})],1)])],1)]):t._e()],1):t._e(),"/StoreOwner/PublishStore"==t.$route.path&&"PENDING"==t.ads_status||"/StoreOwner"==t.$route.path?s("q-card",{attrs:{flat:"",bordered:""}},[s("q-card-section",{attrs:{align:"right"}},["NONE"==t.ads_status?s("div",[s("q-btn",{attrs:{color:"primary",label:"Advertise Store"},on:{click:function(e){t.StoreAdvertismentPlan=!0}}})],1):"PENDING"==t.ads_status?s("div",[s("DepositSlipUpload",{attrs:{submitFunction:t.uploadDepositSlipResult}})],1):t._e()]),0!=t.data.subscriptions.length?s("q-card-section",[s("q-markup-table",{attrs:{flat:""}},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v("#")]),s("th",{staticClass:"text-center"},[t._v("Subscription")]),s("th",{staticClass:"text-center"},[t._v("Amount")]),s("th",{staticClass:"text-center"},[t._v("Date Ordered")]),s("th",{staticClass:"text-center"},[t._v("Date Started")]),s("th",{staticClass:"text-center"},[t._v("Date End")]),s("th",{staticClass:"text-center"},[t._v("Status")]),s("th",{staticClass:"text-center"},[t._v("Actions")])])]),s("tbody",t._l(t.data.subscriptions,function(e,a){return s("tr",{key:a},[s("td",{staticClass:"text-left"},[t._v(t._s(a+1))]),s("td",{staticClass:"text-center"},[t._v(t._s(e.months)+" Month"+t._s(1==e.months?"":"s"))]),s("td",{staticClass:"text-center"},[t._v(t._s(e.total_amount)+"PHP")]),s("td",{staticClass:"text-center"},[t._v(t._s(t.$formatDate(e.date_ordered)))]),s("td",{staticClass:"text-center"},[t._v(t._s(""==e.date_started?"-":t.$formatDate(e.date_started)))]),s("td",{staticClass:"text-center"},[t._v(t._s(""==e.date_started?"-":t.$formatDate(e.date_end)))]),"Pending"==e.status?s("td",{staticClass:"text-center text-primary"},[t._v("PENDING")]):t._e(),"For Approval"==e.status?s("td",{staticClass:"text-center text-primary"},[t._v("FOR APPROVAL")]):t._e(),"Paid"==e.status&&"upcoming"==t.$compareToCurrentDate(e.date_end)?s("td",{staticClass:"text-center text-green"},[t._v("ACTIVE")]):t._e(),"Paid"==e.status&&"past"==t.$compareToCurrentDate(e.date_end)?s("td",{staticClass:"text-center text-grey"},[t._v("EXPIRED")]):t._e(),"Rejected"==e.status?s("td",{staticClass:"text-center text-red"},[t._v("REJECTED")]):t._e(),"Cancelled"==e.status?s("td",{staticClass:"text-center text-red"},[t._v("CANCELLED")]):t._e(),s("td",{staticClass:"text-center text-primary"},["Pending"==e.status?s("q-btn",{attrs:{label:"edit",color:"primary",size:"sm",outline:""},on:{click:function(e){t.edit_advertise_store=!0}}}):t._e()],1)])}),0)])],1):t._e()],1):t._e(),0!=t.data.subscriptions.length?s("q-dialog",{model:{value:t.edit_advertise_store,callback:function(e){t.edit_advertise_store=e},expression:"edit_advertise_store"}},[s("q-card",[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("Advertise Store")])]),s("q-card-section",[s("table",{attrs:{width:"100%"}},[s("tr",[s("td",[t._v("Monthly Fee")]),s("td",{attrs:{align:"right"}},[t._v(t._s(t.advertise_per_month))])]),s("tr",[s("td",[t._v("No. of Months")]),s("td",{staticStyle:{width:"30px"},attrs:{align:"right"}},[s("q-input",{ref:"input_months_of_advertisment",attrs:{type:"number"},on:{blur:function(e){return t.months_of_advertisment_change()}},model:{value:t.data.subscriptions[t.data.subscriptions.length-1].months,callback:function(e){t.$set(t.data.subscriptions[t.data.subscriptions.length-1],"months",e)},expression:"data.subscriptions[data.subscriptions.length-1].months"}})],1)]),s("tr",[s("td",{attrs:{colspan:"2"}},[s("q-separator")],1)]),s("tr",[s("td",{staticClass:"text-bold"},[t._v("TOTAL")]),s("td",{attrs:{align:"right"}},[t._v(t._s(t.data.subscriptions[t.data.subscriptions.length-1].months*t.advertise_per_month))])])])]),s("q-card-section",{staticClass:"q-gutter-sm"},[s("q-btn",{staticClass:"full-width",attrs:{color:"primary",label:"Pay via Bank Deposit"},on:{click:t.edit}}),s("q-btn",{staticClass:"full-width",attrs:{color:"red",label:"Cancel"},on:{click:t.cancel}})],1),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"close",color:"primary"}})],1)],1)],1):t._e(),s("q-dialog",{staticClass:"full-width",attrs:{persistent:""},model:{value:t.StoreAdvertismentPlan,callback:function(e){t.StoreAdvertismentPlan=e},expression:"StoreAdvertismentPlan"}},[s("q-card",{staticStyle:{height:"600px",width:"800px","max-width":"80vw"}},[s("q-card-section",{staticClass:"row items-center"},[s("div",{staticClass:"text-h6"},[t._v("ADVERTISE YOUR STORE NOW!")]),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",{staticClass:"scroll",attrs:{align:"center"}},[s("q-stepper",{ref:"stepper",attrs:{flat:"",bordered:"","header-nav":"",color:"primary",animated:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[s("q-step",{attrs:{name:1,title:"View Plan",icon:"remove_red_eye",done:t.step>1}},[s("q-icon",{attrs:{name:"verified_user",color:"primary",size:"100px"}}),s("div",{staticClass:"text-h4 text-bold text-primary"},[t._v("₱499.00/month")]),s("div",{staticClass:"text-h5"},[t._v("Store Advertisment")]),s("div",{staticClass:"q-pt-lg",staticStyle:{width:"500px"},attrs:{align:"left"}},[s("div",{staticClass:"text-h6"},[s("q-icon",{attrs:{name:"check",color:"primary"}}),t._v("Store will be featured\n              ")],1),s("div",{staticClass:"text-h6"},[s("q-icon",{attrs:{name:"check",color:"primary"}}),t._v("Store will be recommended on search results\n              ")],1)]),s("q-stepper-navigation",[s("q-btn",{attrs:{color:"primary",label:"Continue"},on:{click:function(){t.done1=!0,t.step=2}}})],1)],1),s("q-step",{attrs:{name:2,title:"Number of Months",icon:"calendar_today",done:t.step>2}},[s("table",{attrs:{width:"100%"}},[s("tr",[s("td",[t._v("Monthly Fee")]),s("td",{attrs:{align:"right"}},[t._v(t._s(t.advertise_per_month))])]),s("tr",[s("td",[t._v("No. of Months")]),s("td",{staticStyle:{width:"30px"},attrs:{align:"right"}},[s("q-input",{ref:"input_months_of_advertisment",attrs:{type:"number",min:"1"},on:{blur:function(e){return t.months_of_advertisment_change()}},model:{value:t.months_of_advertisment,callback:function(e){t.months_of_advertisment=e},expression:"months_of_advertisment"}})],1)]),s("tr",[s("td",{attrs:{colspan:"2"}},[s("q-separator")],1)]),s("tr",[s("td",{staticClass:"text-bold"},[t._v("TOTAL")]),s("td",{attrs:{align:"right"}},[t._v(t._s(t.advertise_per_month*t.months_of_advertisment))])])]),s("q-stepper-navigation",[s("q-btn",{attrs:{color:"primary",label:"Continue"},on:{click:function(){t.done2=!0,t.step=3}}}),s("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Back"},on:{click:function(e){t.step=1}}})],1)],1),s("q-step",{attrs:{name:3,title:"Payment Option",icon:"payment",done:t.step>3}},[s("div",{attrs:{align:"left"}},[s("q-btn",{staticClass:"q-ml-sm",attrs:{color:"OnlinePayment"==t.tab?"primary":"grey",unelevated:"",outline:"OnlinePayment"!=t.tab,size:"20px",label:"Online Payment",icon:"payment"},on:{click:function(e){t.tab="OnlinePayment"}}}),s("q-btn",{attrs:{color:"BankDeposit"==t.tab?"primary":"grey",unelevated:"",outline:"BankDeposit"!=t.tab,size:"20px",label:"bank deposit",icon:"account_balance"},on:{click:function(e){t.tab="BankDeposit"}}})],1),s("q-separator",{staticClass:"q-mt-sm q-mb-sm"}),s("div",{directives:[{name:"show",rawName:"v-show",value:"BankDeposit"==t.tab,expression:"tab=='BankDeposit'"}]},[s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("1. Deposit amount to the following BDO bank account:")]),s("br"),s("div",{staticClass:"q-pl-md q-pt-xs"},[s("b",[t._v("Account Name:")]),t._v(" Anturaz, Inc.\n                  "),s("br"),s("b",[t._v("Account Number:")]),t._v(" 1802 394 837\n                  "),s("br"),s("b",[t._v("Bank Name:")]),t._v(" Banco De Oro\n                  "),s("br"),s("b",[t._v("Amount:")]),t._v("\n                  "+t._s(t.$prettyMoney(t.advertise_per_month*t.months_of_advertisment))+"\n                ")])]),s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("2. Upload deposit slip/screenshot of your payment")]),s("br"),s("div",{staticClass:"q-pl-md q-pt-xs"},[s("b",[t._v("A. Over-the-counter payments:")]),t._v(" Write you full name onto the deposit slip. Scan or take a photograph of the deposit slip\n                  "),s("br"),s("b",[t._v("B. Online Banking:")]),t._v("\n                  Take a screenshot of the successful transaction made\n                ")])]),s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("3. Wait until your payment is verified by the Anturaz Admin.")])]),s("div",{staticClass:"q-pa-sm items-right",attrs:{align:"right"}},[s("q-btn",{attrs:{color:"primary",unelevated:"",label:"Pay via Bank Deposit"},on:{click:t.payViaBankDeposit}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:"OnlinePayment"==t.tab,expression:"tab=='OnlinePayment'"}]},[s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("1. Select Account Type from dropdown list. These are the following")]),s("div",[s("ul",[s("li",[t._v("Visa")]),s("li",[t._v("Mastercard")]),s("li",[t._v("American Express")])])])]),s("div",{staticClass:"q-pa-sm",attrs:{align:"left"}},[s("b",[t._v("2. Enter Account Information")]),s("div",[s("ul",[s("li",[t._v("Card Number")]),s("li",[t._v("Card Holder")]),s("li",[t._v("Expiry Date")]),s("li",[t._v("CVV")])])])]),s("div",{staticClass:"q-pa-sm items-right",attrs:{align:"right"}},[s("AltPayNet",{attrs:{onlinePaymentResult:t.onlinePaymentResult,item:{price:t.advertise_per_month*t.months_of_advertisment,description:t.months_of_advertisment+" Month/s of Advertisment ("+t.advertise_per_month+"/month)"}}})],1)])],1)],1)],1)],1)],1)],1)},r=[],i=(s("7514"),s("a34a")),n=s.n(i),o=(s("96cf"),s("c973")),l=s.n(o),c=s("31f2"),u=s("8961"),d={components:{AltPayNet:c["a"],DepositSlipUpload:u["a"]},data:function(){return{ads_status:"",step:1,tab:"OnlinePayment",months_of_advertisment:1,data:{},StoreAdvertismentPlan:!1,advertise_store:!1,advertise_per_month:499.75,edit_advertise_store:!1}},methods:{edit:function(){this.data.subscriptions[this.data.subscriptions.length-1].total_amount=this.data.subscriptions[this.data.subscriptions.length-1].months*this.advertise_per_month,this.edit_advertise_store=!1,this.$dbCon.service("store-advertisment").update(this.data._id,this.data)},cancel:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Are you sure you want to cancel this advertisment?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.data.subscriptions[t.data.subscriptions.length-1].status="Cancelled",t.$dbCon.service("store-advertisment").update(t.data._id,t.data)}),this.edit_advertise_store=!1},advertiseStore:function(){this.advertise_store=!0},payViaBankDeposit:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you want to pay fees via Bank Deposit?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.data.subscriptions.push({months:t.months_of_advertisment,total_amount:t.advertise_per_month,date_ordered:new Date,date_started:"",date_paid:"",status:"Pending",deposit_details:[]}),t.$dbCon.service("store-advertisment").update(t.data._id,t.data).then(function(){t.StoreAdvertismentPlan=!1})})},uploadDepositSlipResult:function(){var t=l()(n.a.mark(function t(e,s,a,r,i){var o;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return o={path:e,remarks:s,comments:"",date_uploaded:new Date,date_reviewed:"",reference_number:a,total_amount:r,date_deposited:i,status:"For Approval"},this.data.subscriptions[this.data.subscriptions.length-1].status="For Approval",this.data.subscriptions[this.data.subscriptions.length-1].deposit_details.push(o),t.next=5,this.$dbCon.service("store-advertisment").patch(this.data._id,this.data);case 5:this.$q.dialog({title:"Success!",message:"Deposit slip is uploaded. Your payment will be reviewed."});case 6:case"end":return t.stop()}},t,this)}));function e(e,s,a,r,i){return t.apply(this,arguments)}return e}(),onlinePaymentResult:function(){var t=l()(n.a.mark(function t(e,s){var a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("INFO",s),"success"!=e){t.next=10;break}return this.data.subscriptions.push({months:this.months_of_advertisment,total_amount:this.advertise_per_month,date_ordered:new Date,date_started:new Date,date_end:this.$addToDate(new Date,0,this.months_of_advertisment),status:"Paid",payment_details:s}),t.next=5,this.$dbCon.service("store-advertisment").update(this.data._id,this.data).then(function(){a.StoreAdvertismentPlan=!1});case 5:return t.next=7,this.$dbCon.service("store-payments").create({related_id:this.data.subscriptions.length-1,store_id:this.$local.getItem("store_token"),amount:this.advertise_per_month*this.months_of_advertisment,date_paid:new Date,payment_for:"Store Advertisment",payment_type:"Online Payment",payment_details:s});case 7:this.$q.dialog({title:"Payment Accepted!",message:"Your store is now Advertised. Advertistment will expire on "+this.$addToDate(new Date,0,this.months_of_advertisment)}),t.next=11;break;case 10:this.$q.dialog({title:"Payment Error!",message:"Please try again."});case 11:case"end":return t.stop()}},t,this)}));function e(e,s){return t.apply(this,arguments)}return e}(),months_of_advertisment_change:function(){this.months_of_advertisment<1&&(this.months_of_advertisment=1),this.months_of_advertisment=Math.round(this.months_of_advertisment)},getData:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store-advertisment").find({query:{store_id:this.$local.getItem("store_token")}}).then(function(t){console.log(t),e.data=t.data[0]});case 2:0==this.data.subscriptions.length?(this.ads_status="NONE",this.StoreAdvertismentPlan=2==Math.floor(2*Math.random()+1)):"Pending"==this.data.subscriptions[this.data.subscriptions.length-1].status?this.ads_status="PENDING":"For Approval"==this.data.subscriptions[this.data.subscriptions.length-1].status?this.ads_status="FOR APPROVAL":"Cancelled"==this.data.subscriptions[this.data.subscriptions.length-1].status?this.ads_status="NONE":"upcoming"==this.$compareToCurrentDate(this.data.subscriptions[this.data.subscriptions.length-1].date_end)?this.ads_status="CURRENT":"current"==this.$compareToCurrentDate(this.data.subscriptions[this.data.subscriptions.length-1].date_end)?this.ads_status="CURRENT":"past"==this.$compareToCurrentDate(this.data.subscriptions[this.data.subscriptions.length-1].date_end)&&(this.ads_status="NONE",this.StoreAdvertismentPlan=2==Math.floor(2*Math.random()+1));case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.service("store-advertisment").onDataChange(function(){e.getData()});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},p=d,m=s("2877"),_=Object(m["a"])(p,a,r,!1,null,null,null);e["a"]=_.exports},"49d2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-md"},["/StoreOwner/PublishStore"!=t.$route.path?s("q-breadcrumbs",{staticClass:"text-grey"},[s("q-breadcrumbs-el",{attrs:{label:"Store",icon:"store"}}),s("q-breadcrumbs-el",{attrs:{label:"Inventory",icon:"inventory"}}),s("q-breadcrumbs-el",{attrs:{label:"Products"}})],1):t._e(),s("br"),s("div",{staticClass:"bg-grey-3"},[s("q-toolbar",[t.maximum_products>t.data.length?s("AddProduct"):s("AddMoreItem",{attrs:{itemType:"Products"}}),t._v(" \n      "),s("q-space"),"/StoreOwner/PublishStore"!=t.$route.path?s("q-input",{attrs:{square:"",outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e()],1),s("q-separator"),s("q-toolbar",[s("p",{staticClass:"text-bold"},[s("br"),t._v("\n        Maximum Items: "+t._s(t.maximum_products)+"\n        "),s("br"),t._v("\n        Current Items: "+t._s(t.data.length)+"\n      ")])])],1),s("q-table",{attrs:{data:t.data,columns:t.columns,"row-key":"name",filter:t.filter,grid:"","hide-header":""},scopedSlots:t._u([{key:"item",fn:function(e){return[s("div",{staticClass:"q-pa-xs col-xs-12  col-md-4 col-lg-3"},[s("q-card",[s("q-img",{staticStyle:{width:"100%",height:"150px"},attrs:{src:e.row.photos[0]}}),"past"!=t.$compareToCurrentDate(e.row.expiry)?s("AdvertiseButton",{attrs:{related_id:e.row._id,item_type:"product"}}):s("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(300%)"},attrs:{label:"Expired",icon:"info",color:"red"},on:{click:t.unavailableMessage}}),s("q-separator"),s("q-list",{attrs:{dense:""}},t._l(e.cols.filter(function(t){return"desc"!==t.name}),function(e){return s("q-item",{key:e.name},[s("q-item-section",[s("q-item-label",[t._v(t._s(e.label))])],1),s("q-item-section",{attrs:{side:""}},[s("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.value))])],1)],1)}),1),s("q-card-actions",{attrs:{align:"around"}},[s("q-btn",{staticClass:"full-width",attrs:{color:"primary",flat:"",label:"Manage"},on:{click:function(s){return t.$router.push("Products/ManageProduct?product="+e.row._id)}}})],1)],1)],1)]}}])})],1)},r=[],i=(s("7514"),s("6eaf")),n=s("6356"),o=s("c078"),l={components:{AddProduct:i["a"],AdvertiseButton:n["a"],AddMoreItem:o["a"]},data:function(){return{data:[],filter:"",maximum_products:0,columns:[{name:"SKU",required:!0,label:"SKU",align:"left",field:"SKU"},{name:"product_name",required:!0,label:"Product Name",align:"left",field:"product_name"},{name:"category",align:"center",label:"Category",field:"category"},{name:"regular_price",label:"Regular Price",field:"regular_price"},{name:"sale_price",label:"Sale Price",field:"sale_price"},{name:"stock",label:"Stock",field:"stock"}]}},methods:{max_product:function(){this.$q.dialog({title:"Maximum number of Products reached!",message:"To add more product, you may avail it via Bank Deposit or Layaway"})},getData:function(){var t=this;this.$dbCon.service("products").find({query:{store_id:this.$local.getItem("store_token"),deleted:!1}}).then(function(e){t.data=e.data,t.$forceUpdate()})},unavailableMessage:function(){this.$q.dialog({title:"Unavailable Item",message:"This item is no longer available due to expired item subscription. You may reactivate this item again by purchasing a subscription."})}},mounted:function(){var t=this;this.$dbCon.service("products").onDataChange(function(){t.getData()}),this.$dbCon.service("product-subscriptions").onDataChange(function(){t.getData()}),this.$dbCon.service("product-subscriptions").find({query:{store_id:this.$local.getItem("store_token"),$or:[{date_end:{$gte:new Date},status:"Paid"},{status:"Free"}]}}).then(function(e){var s=0;e.data.map(function(t){s+=t.items}),t.maximum_products=s})}},c=l,u=s("2877"),d=Object(u["a"])(c,a,r,!1,null,null,null);e["default"]=d.exports},c40a:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var a=["Nationwide","Abra","Agusan del Norte","Agusan del Sur","Aklan","Albay","Antique","Apayao","Aurora","Basilan","Bataan","Batanes","Batangas","Benguet","Biliran","Bohol","Bukidnon","Bulacan","Cagayan","Camarines Norte","Camarines Sur","Camiguin","Capiz","Catanduanes","Cavite","Cebu","Compostela Valley","Cotabato","Davao del Norte","Davao del Sur","Davao Occidental","Davao Oriental","Dinagat Islands","Eastern Samar","Guimaras","Ifugao","Ilocos Norte","Ilocos Sur","Iloilo","Isabela","Kalinga","La Union","Laguna","Lanao del Norte","Lanao del Sur","Leyte","Maguindanao","Marinduque","Masbate","Metro Manila","Misamis Occidental","Misamis Oriental","Mountain Province","Negros Occidental","Negros Oriental","Northern Samar","Nueva Ecija","Nueva Vizcaya","Occidental Mindoro","Oriental Mindoro","Palawan","Pampanga","Pangasinan","Quezon","Quirino","Rizal","Romblon","Samar","Sarangani","Siquijor","Sorsogon","South Cotabato","Southern Leyte","Sultan Kudarat","Sulu","Surigao del Norte","Surigao del Sur","Tarlac","Tawi-Tawi","Zambales","Zamboanga del Norte","Zamboanga del Sur","Zamboanga Sibugay"]},c82e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.$q.screen.lt.md?"":"q-pr-md q-pl-md q-mr-xl q-ml-xl"},[s("q-stepper",{ref:"stepper",attrs:{"alternative-labels":"",color:"primary",animated:"",contracted:t.$q.screen.lt.md,flat:"",bordered:!t.$q.screen.lt.md},scopedSlots:t._u([t.$q.screen.lt.md?{key:"message",fn:function(){return[1===t.store.current_step?s("q-banner",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Business Information")])]):2===t.store.current_step?s("q-banner",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Store Profile")])]):3===t.store.current_step?s("q-banner",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Portfolio")])]):4===t.store.current_step?s("q-banner",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Services Activation")])]):5===t.store.current_step?s("q-banner",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Add Items")])]):7===t.store.current_step?s("q-banner",{staticClass:"bg-primary text-white"},[s("div",{staticClass:"text-h6"},[t._v("Publish Store")])]):t._e()]},proxy:!0}:null],null,!0),model:{value:t.store.current_step,callback:function(e){t.$set(t.store,"current_step",e)},expression:"store.current_step"}},[s("q-step",{attrs:{name:1,title:"Business Info",icon:"info",done:t.store.current_step>1}},[t.$q.screen.lt.md?t._e():s("BusinessInformation")],1),s("q-step",{attrs:{name:2,title:"Store Profile",icon:"store",done:t.store.current_step>2}},[t.$q.screen.lt.md?t._e():s("StoreDetails")],1),s("q-step",{attrs:{name:3,title:"Portfolio",icon:"dashboard",done:t.store.current_step>3}},[s("div",[s("Portfolio")],1),s("div",{staticClass:"q-pt-md",attrs:{align:"right"}},[s("q-btn",{ref:"btn_back",staticClass:"q-mr-sm",attrs:{label:"Back",color:"grey","no-caps":"",flat:""},on:{click:function(e){return t.updateStep(2)},mouseover:function(e){t.$refs.btn_back.unelevated=!0,t.$refs.btn_back.flat=!1},mouseleave:function(e){t.$refs.btn_back.flat=!0,t.$refs.btn_back.unelevated=!1}}}),s("q-btn",{ref:"btn_save_next",attrs:{label:"Save & Next",color:"primary",type:"submit","no-caps":"",outline:""},on:{click:function(e){return t.updateStep(4)},mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1)]),s("q-step",{attrs:{name:4,title:"Services Activation",icon:"settings",done:t.store.current_step>4}},[s("div",[s("Settings")],1),s("div",{attrs:{align:"right"}},[s("q-btn",{ref:"btn_back",staticClass:"q-mr-sm",attrs:{label:"Back",color:"grey","no-caps":"",flat:""},on:{click:function(e){return t.updateStep(3)},mouseover:function(e){t.$refs.btn_back.unelevated=!0,t.$refs.btn_back.flat=!1},mouseleave:function(e){t.$refs.btn_back.flat=!0,t.$refs.btn_back.unelevated=!1}}}),s("q-btn",{ref:"btn_save_next",attrs:{label:"Save & Next",color:"primary",type:"submit","no-caps":"",outline:""},on:{click:function(e){return t.updateStep(5)},mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1)]),s("q-step",{attrs:{name:5,title:"Add Items",icon:"list",done:t.store.current_step>5}},[s("div",[s("AddItems")],1),s("div",{attrs:{align:"right"}},[s("q-btn",{ref:"btn_back",staticClass:"q-mr-sm",attrs:{label:"Back",color:"grey","no-caps":"",flat:""},on:{click:function(e){return t.updateStep(4)},mouseover:function(e){t.$refs.btn_back.unelevated=!0,t.$refs.btn_back.flat=!1},mouseleave:function(e){t.$refs.btn_back.flat=!0,t.$refs.btn_back.unelevated=!1}}}),s("q-btn",{ref:"btn_save_next",attrs:{label:"Save & Next",color:"primary",type:"submit","no-caps":"",outline:""},on:{click:function(e){return t.updateStep(6)},mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1)]),s("q-step",{attrs:{name:6,title:"Publish Store",icon:"card_membership",done:t.store.current_step>6}},[s("div",[s("Summary")],1)])],1),t.$q.screen.lt.md?s("div",[1===t.store.current_step?s("BusinessInformation",{staticClass:"q-pa-sm"}):t._e(),2===t.store.current_step?s("StoreDetails",{staticClass:"q-pa-sm"}):t._e()],1):t._e()],1)},r=[],i=s("a34a"),n=s.n(i),o=(s("7514"),s("96cf"),s("c973")),l=s.n(o),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-form",{ref:"myForm",on:{submit:t.save,reset:t.back}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[0!=t.error.length?s("br"):t._e(),s("p",{staticClass:"text-subtitle1 text-black"},[t._v("Business Type")]),s("div",{class:t.$q.screen.lt.md?"":"q-gutter-xl q-pa-sm"},[s("q-radio",{attrs:{val:"Self-Employed",label:"Self-Employed"},model:{value:t.store.business_type,callback:function(e){t.$set(t.store,"business_type",e)},expression:"store.business_type"}}),s("q-radio",{attrs:{"aria-readonly":"",val:"Sole Proprietorship",label:"Sole Proprietorship"},model:{value:t.store.business_type,callback:function(e){t.$set(t.store,"business_type",e)},expression:"store.business_type"}}),s("q-radio",{attrs:{val:"Partnership",label:"Partnership"},model:{value:t.store.business_type,callback:function(e){t.$set(t.store,"business_type",e)},expression:"store.business_type"}}),s("q-radio",{attrs:{val:"Corporation",label:"Corporation"},model:{value:t.store.business_type,callback:function(e){t.$set(t.store,"business_type",e)},expression:"store.business_type"}})],1)]),"Self-Employed"==t.store.business_type?s("div",{staticClass:"col-12 row"},[s("p",{staticClass:"text-subtitle1 text-black q-pt-md  col-12"},[t._v("Owner's Information")]),s("div",{staticClass:"col-12 row"},[s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"First Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.fname,callback:function(e){t.$set(t.user,"fname",e)},expression:"user.fname"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Last Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.lname,callback:function(e){t.$set(t.user,"lname",e)},expression:"user.lname"}})],1)]):s("div",{staticClass:"col-12 row"},[s("p",{staticClass:"text-subtitle1 text-black  q-pt-md col-12"},[t._v("Owner/Representative's Information")]),s("div",{staticClass:"col-12 row"},[s("q-input",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"First Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.fname,callback:function(e){t.$set(t.user,"fname",e)},expression:"user.fname"}}),s("q-input",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Last Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.lname,callback:function(e){t.$set(t.user,"lname",e)},expression:"user.lname"}}),s("q-input",{staticClass:" col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Position in the Company",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.position_in_the_company,callback:function(e){t.$set(t.user,"position_in_the_company",e)},expression:"user.position_in_the_company"}})],1)]),s("p",{staticClass:"text-subtitle1 text-black  q-pt-md col-12"},[t._v("Contact Information")]),s("div",{staticClass:"col-12 row"},[s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Mobile Number",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:"",mask:"9## ### ####","unmasked-value":"",prefix:"(+63)"},scopedSlots:t._u([{key:"before",fn:function(){return[s("q-avatar",[s("img",{attrs:{src:"https://cdn4.iconfinder.com/data/icons/world-flags-circular/1000/Flag_of_The_Philippines_-_Circle-512.png"}})])]},proxy:!0}]),model:{value:t.store.mobile_number,callback:function(e){t.$set(t.store,"mobile_number",e)},expression:"store.mobile_number"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Landline Number",dense:"",mask:"(##) #### ####","unmasked-value":""},model:{value:t.store.landline_number,callback:function(e){t.$set(t.store,"landline_number",e)},expression:"store.landline_number"}})],1),s("p",{staticClass:"text-subtitle1 text-black q-pt-md col-12"},[t._v("Address")]),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"House/ Building No./ Street",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.house_bldg_st,callback:function(e){t.$set(t.store,"house_bldg_st",e)},expression:"store.house_bldg_st"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Barangay/ District",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.barangay_district,callback:function(e){t.$set(t.store,"barangay_district",e)},expression:"store.barangay_district"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"City/Municipality",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.city_municipality,callback:function(e){t.$set(t.store,"city_municipality",e)},expression:"store.city_municipality"}}),s("q-select",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"State/Province",options:t.state_province_options,rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"","input-debounce":"0","use-input":"","fill-input":"",dense:""},on:{filter:t.filterStateProvince},model:{value:t.store.state_province,callback:function(e){t.$set(t.store,"state_province",e)},expression:"store.state_province"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Zip Code",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.zip_code,callback:function(e){t.$set(t.store,"zip_code",e)},expression:"store.zip_code"}}),s("q-select",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Country",options:t.country_options,rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:"",disable:""},model:{value:t.store.country,callback:function(e){t.$set(t.store,"country",e)},expression:"store.country"}}),s("p",{staticClass:"text-subtitle1 text-black q-pt-lg col-12"},[t._v("Nominate bank account where sales will be deposited")]),s("q-select",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Bank Name",options:t.bank_options,rules:[function(t){return""!=t.trim()||"This Field is required"}],"input-debounce":"0","use-input":"","fill-input":"","lazy-rules":"",dense:""},on:{filter:t.filterBank},model:{value:t.store.bank_name,callback:function(e){t.$set(t.store,"bank_name",e)},expression:"store.bank_name"}}),s("q-input",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Account Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.account_name,callback:function(e){t.$set(t.store,"account_name",e)},expression:"store.account_name"}}),s("q-input",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Account Number",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.account_number,callback:function(e){t.$set(t.store,"account_number",e)},expression:"store.account_number"}}),s("br",{staticClass:"col-12"}),"Self-Employed"==t.store.business_type?s("div",{staticClass:"col-12 row"},[s("p",{staticClass:"text-subtitle1 text-black q-pt-lg col-12"},[t._v("Upload front side photo of government ID")]),s("div",{staticClass:"col-12 row",class:t.$q.screen.lt.md?"":"q-pa-sm"},[s("q-input",{ref:"fileUploader",staticClass:"col-12",attrs:{rules:[function(e){return!(0===Object.keys(t.fileSelected).length&&t.fileSelected.constructor===Object)||"This Field is required"}],"lazy-rules":"",dense:"",type:"file"},on:{change:t.onFileSelected}})],1)]):s("div",{staticClass:"col-12 row"},[s("p",{staticClass:"text-subtitle1 text-black q-pt-sm col-12"},[t._v("DTI/SEC Registration Details")]),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",label:"DTI/SEC Registration Number"},model:{value:t.store.dti_sec_registration_number,callback:function(e){t.$set(t.store,"dti_sec_registration_number",e)},expression:"store.dti_sec_registration_number"}}),s("q-input",{ref:"fileUploader",staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{rules:[function(e){return!(0===Object.keys(t.fileSelected).length&&t.fileSelected.constructor===Object)||"This Field is required"}],"lazy-rules":"",type:"file","stack-label":"",label:"Upload photo of DTI/SEC Registration Certificate"},on:{change:t.onFileSelected}})],1)],1),s("div",{staticClass:"q-pt-md",attrs:{align:"right"}},[s("q-btn",{ref:"btn_save_next",attrs:{label:"Save & Next",color:"primary","no-caps":"",type:"submit"},on:{mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1)])],1)},u=[],d={data:function(){return{business_type:"Self-Employed",state_province_options:this.$provinceList,country_options:this.$countryList,bank_options:this.$bankList,fileSelected:{},store:{},user:{},error:[]}},methods:{filterStateProvince:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.state_province_options=a.$provinceList.filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},filterBank:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.bank_options=a.$bankList.filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},onFileSelected:function(t){console.log("HI",t.target.files[0]),void 0!=t.target.files[0]?(this.fileSelected=t.target.files[0],this.$refs.fileUploader.resetValidation()):this.$refs.fileUploader.validate()},save:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.store.current_step=2,t.next=3,this.$dbCon.service("store").patch(this.store._id,this.store);case 3:return t.next=5,this.$dbCon.service("users").patch(this.user._id,this.user);case 5:return t.next=7,this.$forceUpdate();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getData:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.store=t.data[0],console.log(e.store)});case 2:return t.next=4,this.$getUser();case 4:this.user=t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.service("store").onDataChange(function(){e.getData()}),this.$dbCon.service("users").onDataChange(function(){e.getData()});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},p=d,m=s("2877"),_=Object(m["a"])(p,c,u,!1,null,null,null),f=_.exports,h=s("060d"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[0!=t.error.length?s("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[s("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[s("ul",t._l(t.error,function(e,a){return s("li",{key:a},[t._v(t._s(e))])}),0)]):t._e()],1)]),s("AdvertiseStore"),s("div",{staticClass:"q-pt-xl",attrs:{align:"right"}},[s("q-btn",{staticClass:"q-mr-sm",attrs:{label:"Back ",color:"grey"},on:{click:t.back}}),s("q-btn",{attrs:{label:"Next",color:"primary"},on:{click:t.save}})],1)],1)},b=[],g=s("2ca6"),y={components:{AdvertiseStore:g["a"]},data:function(){return{error:[]}},methods:{save:function(){this.$dbCon.service("store").patch(this.$local.getItem("store_token"),{current_step:7})},back:function(){this.$dbCon.service("store").patch(this.$local.getItem("store_token"),{current_step:5})}}},q=y,x=Object(m["a"])(q,v,b,!1,null,null,null),C=x.exports,k=s("93ac"),$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row justify-center"},[s("q-list",{staticClass:"col-md-6 col-xs-12 q-ma-lg",attrs:{bordered:""}},[s("q-item",[s("q-item-section",[t._v("Delivery Services Management")]),s("q-item-section",{attrs:{side:""}},[s("q-checkbox",{attrs:{value:!0,readonly:""}})],1)],1),s("q-separator"),s("q-item",[s("q-item-section",[t._v("Gift Wrapping Services Management")]),s("q-item-section",{attrs:{side:""}},[s("q-checkbox",{attrs:{value:!0,readonly:""}})],1)],1),s("q-separator"),s("q-item",[s("q-item-section",[t._v("Transpo/Fuel Subsidy Management")]),s("q-item-section",{attrs:{side:""}},[s("q-checkbox",{attrs:{value:!0,readonly:""}})],1)],1),s("q-separator"),s("q-item",[s("q-item-section",[t._v("Booking Management System")]),s("q-item-section",{attrs:{side:""}},[s("q-checkbox",{attrs:{value:!0,readonly:""}})],1)],1)],1),s("div",{staticClass:"col-md-6 col-xs-12 q-ml-lg q-mr-lg text-justify text-grey"},[t._v("The features above have been activated and charges are initially set as FREE. You can modify or customize these charges later at your store's dashboard.")])],1)},w=[],S={data:function(){return{delivery:!0,giftwrapping:!0,transpo_fuel:!0}}},P=S,D=Object(m["a"])(P,$,w,!1,null,null,null),A=D.exports,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ManageItems")],1)},N=[],O=s("d215"),T=s("49d2"),z=s("2732"),F={components:{ManageItems:O["a"],ManageProducts:T["default"],ManageServices:z["default"]}},M=F,U=Object(m["a"])(M,I,N,!1,null,null,null),B=U.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 row justify-center text-h5 text-primary"},[t._v("Your store is ready to go online")]),s("q-separator",{staticClass:"q-ma-md col-12"}),s("div",{staticClass:"col-md-3 col-xs-12",attrs:{align:"center"}},[s("img",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.store.logo}}),s("a",{attrs:{href:"/#/store/"+t.store.unique_link,target:"_blank"}},[s("q-btn",{ref:"btn_view",attrs:{label:"View Online Store",flat:"",color:"primary"},on:{mouseover:function(e){t.$refs.btn_view.unelevated=!0,t.$refs.btn_view.flat=!1},mouseleave:function(e){t.$refs.btn_view.flat=!0,t.$refs.btn_view.unelevated=!1}}})],1)]),s("q-form",{staticClass:"col-md-9 col-xs-12 q-pb-md",on:{submit:t.save,reset:t.back}},[s("q-input",{attrs:{label:"Store Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":""},model:{value:t.store.store_name,callback:function(e){t.$set(t.store,"store_name",e)},expression:"store.store_name"}}),s("q-input",{staticClass:"q-mb-sm",attrs:{label:"Store Unique Link",prefix:"www.anturaz.com/store/",rules:[function(t){return""!=t.trim()||"This Field is required"}],hint:"suggestion: www.anturaz.com/store/"+t.store.store_name.toLowerCase().split(" ").join("-"),"lazy-rules":""},model:{value:t.store.unique_link,callback:function(e){t.$set(t.store,"unique_link",e)},expression:"store.unique_link"}}),s("q-select",{ref:"categories",staticClass:"col-xs-12 q-mb-md",attrs:{rules:[function(){return 0!=t.store.categories.length||"This Field is required"}],"lazy-rules":"","use-chips":"","use-input":"",multiple:"","fill-input":"","input-debounce":"0",options:t.categories_option,label:"Categories",hint:"You may select one or multiple",placeholder:t.categories_done?"search..":"",dense:""},on:{filter:t.filterCategories,focus:function(){t.categories_done=!0},blur:function(){t.categories_done=!1}},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.$q.screen.lt.md&&t.categories_done,expression:"$q.screen.lt.md && categories_done"},{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"done",unelevated:"",color:"primary"}})],1)],1)]},proxy:!0},{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[t._v("No results")])],1)]},proxy:!0}]),model:{value:t.store.categories,callback:function(e){t.$set(t.store,"categories",e)},expression:"store.categories"}}),s("q-select",{staticClass:"col-xs-12 q-mb-md",attrs:{"use-chips":"","use-input":"",multiple:"","fill-input":"",rules:[function(){return 0!=t.store.market_areas.length||"This Field is required"}],"lazy-rules":"","input-debounce":"0",options:t.market_areas_option,label:"Market Areas",placeholder:t.market_areas_done?"search..":"",hint:"You may select one or multiple",dense:""},on:{filter:t.filterMarketPlace,focus:function(){t.market_areas_done=!0},blur:function(){t.market_areas_done=!1}},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:t.$q.screen.lt.md&&t.market_areas_done,expression:"$q.screen.lt.md && market_areas_done"},{name:"close-popup",rawName:"v-close-popup"}],ref:"market_areas_done",attrs:{label:"done",unelevated:"",color:"primary"}})],1)],1)]},proxy:!0},{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[t._v("No results")])],1)]},proxy:!0}]),model:{value:t.store.market_areas,callback:function(e){t.$set(t.store,"market_areas",e)},expression:"store.market_areas"}}),s("q-input",{attrs:{label:"Owner's First Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.fname,callback:function(e){t.$set(t.user,"fname",e)},expression:"user.fname"}}),s("q-input",{attrs:{label:"Owner's Last Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.user.lname,callback:function(e){t.$set(t.user,"lname",e)},expression:"user.lname"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Mobile Number",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:"",mask:"9## ### ####","unmasked-value":"",prefix:"(+63)"},scopedSlots:t._u([{key:"before",fn:function(){return[s("q-avatar",[s("img",{attrs:{src:"https://cdn4.iconfinder.com/data/icons/world-flags-circular/1000/Flag_of_The_Philippines_-_Circle-512.png"}})])]},proxy:!0}]),model:{value:t.store.mobile_number,callback:function(e){t.$set(t.store,"mobile_number",e)},expression:"store.mobile_number"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Landline Number",dense:"",mask:"(##) #### ####","unmasked-value":""},model:{value:t.store.landline_number,callback:function(e){t.$set(t.store,"landline_number",e)},expression:"store.landline_number"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"House/ Building No./ Street",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.house_bldg_st,callback:function(e){t.$set(t.store,"house_bldg_st",e)},expression:"store.house_bldg_st"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Barangay/ District",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.barangay_district,callback:function(e){t.$set(t.store,"barangay_district",e)},expression:"store.barangay_district"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"City/Municipality",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.city_municipality,callback:function(e){t.$set(t.store,"city_municipality",e)},expression:"store.city_municipality"}}),s("q-select",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"State/Province",options:t.state_province_options,rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"","input-debounce":"0","use-input":"","fill-input":"",dense:""},on:{filter:t.filterStateProvince},model:{value:t.store.state_province,callback:function(e){t.$set(t.store,"state_province",e)},expression:"store.state_province"}}),s("q-input",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Zip Code",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.zip_code,callback:function(e){t.$set(t.store,"zip_code",e)},expression:"store.zip_code"}}),s("q-select",{staticClass:"col-md-6 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Country",options:t.country_options,rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:"",disable:""},model:{value:t.store.country,callback:function(e){t.$set(t.store,"country",e)},expression:"store.country"}}),s("q-select",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Bank Name",options:t.bank_options,rules:[function(t){return""!=t.trim()||"This Field is required"}],"input-debounce":"0","use-input":"","fill-input":"","lazy-rules":"",dense:""},on:{filter:t.filterBank},model:{value:t.store.bank_name,callback:function(e){t.$set(t.store,"bank_name",e)},expression:"store.bank_name"}}),s("q-input",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Account Name",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.account_name,callback:function(e){t.$set(t.store,"account_name",e)},expression:"store.account_name"}}),s("q-input",{staticClass:"col-md-4 col-xs-12",class:t.$q.screen.lt.md?"":"q-pa-sm",attrs:{label:"Account Number",rules:[function(t){return""!=t.trim()||"This Field is required"}],"lazy-rules":"",dense:""},model:{value:t.store.account_number,callback:function(e){t.$set(t.store,"account_number",e)},expression:"store.account_number"}}),s("div",{staticClass:"q-pt-lg",attrs:{align:"right"}},[s("q-btn",{ref:"btn_back",staticClass:"q-mr-sm",attrs:{label:"Back",type:"reset",color:"grey","no-caps":"",flat:""},on:{mouseover:function(e){t.$refs.btn_back.unelevated=!0,t.$refs.btn_back.flat=!1},mouseleave:function(e){t.$refs.btn_back.flat=!0,t.$refs.btn_back.unelevated=!1}}}),s("q-btn",{attrs:{label:"Go Online",color:"primary",type:"submit"},on:{click:t.save}})],1)],1)],1)},E=[],R=s("c40a"),j={data:function(){return{store:{},user:{},market_areas_option:[],categories_option:[],categories_list:[],market_areas_done:!1,categories_done:!1,bank_options:this.$bankList,state_province_options:this.$provinceList,country_options:this.$countryList,edit_mode:!1}},methods:{filterStateProvince:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.state_province_options=a.$provinceList.filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},filterBank:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.bank_options=a.$bankList.filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},filterMarketPlace:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.market_areas_option=R["a"].filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},filterCategories:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.categories_option=a.categories_list.filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},save:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(1!=this.edit_mode){t.next=10;break}return this.edit_mode=!1,t.next=4,this.$dbCon.service("store").patch(this.store._id,this.store);case 4:return t.next=6,this.$dbCon.service("users").patch(this.user._id,this.user);case 6:return t.next=8,this.$forceUpdate();case 8:return this.$q.dialog({title:"Saved!",message:"Your store details is now updated."}),t.abrupt("return");case 10:return this.store.current_step=-1,t.next=13,this.$dbCon.service("store").patch(this.store._id,this.store);case 13:return t.next=15,this.$forceUpdate();case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),back:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(1!=this.edit_mode){t.next=4;break}return this.getData(),this.edit_mode=!1,t.abrupt("return");case 4:return this.store.current_step=5,t.next=7,this.$dbCon.service("store").patch(this.store._id,this.store);case 7:return t.next=9,this.$forceUpdate();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getData:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.store=t.data[0],e.photoUrl=e.store.logo,console.log(e.store)});case 2:return t.next=4,this.$getUser();case 4:this.user=t.sent;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;this.market_areas_option=R["a"],this.$dbCon.service("categories").find({query:{$select:["category_name"]}}).then(function(e){e.data.map(function(e){t.categories_option.push(e.category_name),t.categories_list.push(e.category_name)})}),this.$dbCon.service("store").onDataChange(function(){t.getData()})}},K=j,Y=Object(m["a"])(K,L,E,!1,null,null,null),V=Y.exports,G={components:{BusinessInformation:f,StoreDetails:h["a"],AvailPremiumAccount:C,Portfolio:k["default"],Settings:A,AddItems:B,Summary:V},data:function(){return{store:{}}},methods:{getData:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.store=t.data[0],-1==e.store.current_step&&e.$router.push("/StoreOwner")});case 2:this.$forceUpdate();case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),updateStep:function(){var t=l()(n.a.mark(function t(e){var s,a;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(4!=e){t.next=4;break}if(!(this.store.gallery.length<2)){t.next=4;break}return this.$q.dialog({title:"Please upload at least 2 photos to proceed."}),t.abrupt("return");case 4:if(6!=e){t.next=14;break}return t.next=7,this.$dbCon.service("products").find({query:{store_id:this.$local.getItem("store_token"),deleted:{$ne:!0}}}).then(function(t){return t.total});case 7:return s=t.sent,t.next=10,this.$dbCon.service("services").find({query:{store_id:this.$local.getItem("store_token"),deleted:{$ne:!0}}}).then(function(t){return t.total});case 10:if(a=t.sent,!(s+a<1)){t.next=14;break}return this.$q.dialog({title:"Must add 1 Item",message:"Minimum of add atleast one(1) item to proceed"}),t.abrupt("return");case 14:return this.store.current_step=e,t.next=17,this.$dbCon.service("store").patch(this.store._id,this.store);case 17:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;this.$dbCon.service("store").onDataChange(function(){t.getData()})}},W=G,H=Object(m["a"])(W,a,r,!1,null,null,null);e["default"]=H.exports},d215:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-sm"},[s("div",{staticClass:"q-pb-md"},[s("q-toolbar",[s("div",{staticClass:"full-width row justify-end items-center"},[s("div",{staticClass:"row items-center",class:t.$q.screen.lt.md?"justify-between col-12":""},[s("div",{staticClass:"row justify-center",class:t.$q.screen.lt.md?"col-8":""},[t.maximum_items<6?s("p",{staticClass:"text-bold"},[s("br"),t._v("\n              You have "+t._s(t.maximum_items-t.data.length)+" remaining item slots\n            ")]):t.maximum_items==t.data.length&&5==t.maximum_items?s("p",{staticClass:"text-bold"},[s("br"),t._v("You have consumed your free item slots\n            ")]):s("p",{staticClass:"text-bold"},[s("br"),t._v("\n              You have "+t._s(t.maximum_items-t.data.length)+" remaining item slots\n            ")]),s("p",[s("br"),t._v(" ("+t._s(t.data.length)+"/"+t._s(t.maximum_items)+")")])]),s("div",{staticClass:"row justify-end",class:t.$q.screen.lt.md?"col-4 q-pt-md":""},[s("AddMoreItem",{ref:"buy_slots",attrs:{itemtype:"Products"}})],1)]),"/StoreOwner/PublishStore"!=t.$route.path?s("q-input",{class:t.$q.screen.lt.md?"col-12":"",attrs:{square:"",filled:"",outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[s("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,4009527860),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e()],1)])],1),0==t.data.length?s("q-card",{staticClass:"q-ma-sm",staticStyle:{width:"150px",height:"200px"},attrs:{square:"",bordered:"",flat:""}},[s("q-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{unelevated:"",label:"Add an item","no-caps":"",flat:"",stack:"",color:"grey",icon:"add",size:"md"},on:{click:function(e){t.opened=!0}}})],1):t._e(),s("q-table",{attrs:{data:t.data,columns:t.columns,"row-key":"name",filter:t.filter,grid:"","hide-header":""},scopedSlots:t._u([{key:"item",fn:function(e){return[0==e.row.__index?s("q-card",{staticClass:"q-ma-sm",style:t.$q.screen.lt.md?"width: 45% ; height: 260px":"width: 250px ; height: 280px",attrs:{square:"",bordered:"",flat:""}},[s("q-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{unelevated:"",label:t.maximum_items<t.data.length?"Buy slots":"Add an item","no-caps":"",flat:"",stack:"",color:"grey",icon:"add",size:"md"},on:{click:function(e){t.maximum_items<t.data.length?t.$refs.buy_slots.opened=!0:t.opened=!0}}})],1):t._e(),s("q-card",{staticClass:"q-ma-sm",style:t.$q.screen.lt.md?"width: 45% ; height: 260px":"width: 250px ; height: 280px",attrs:{square:"",bordered:"",flat:""}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentItem!=e.row.__index,expression:"currentItem != props.row.__index"}]},[s("div",{staticClass:"q-pa-xs row justify-between text-caption",staticStyle:{cursor:"pointer"},on:{click:function(s){t.currentItem=e.row.__index}}},[s("span",[t._v("\n              On-hand:\n              "),s("span",{staticClass:"text-primary"},[t._v("25")])]),s("div",{staticClass:"text-primary"},[t._v("Manage")])]),s("q-separator"),s("div",{staticStyle:{cursor:"pointer"},on:{click:function(s){t.currentItem=e.row.__index}}},[s("q-img",{attrs:{src:e.row.photos[0],ratio:t.$q.screen.lt.md?4/3:16/9}}),s("div",{staticClass:"q-pa-xs"},[s("div",{staticClass:"text-right"},[t._v("SKU: "+t._s(e.row.SKU))]),s("div",[t._v(t._s(e.row.item_type))]),s("div",[t._v("\n                "+t._s(t.$prettyMoney(e.row.regular_price))+"\n                "),s("small",{staticClass:"text-primary q-pl-sm"},[s("strike",[t._v(t._s(t.$prettyMoney(e.row.sale_price)))])],1)])])],1),s("q-separator"),s("div",{attrs:{align:"center"}},["past"!=t.$compareToCurrentDate(e.row.expiry)?s("AdvertiseButton",{attrs:{related_id:e.row._id,item_type:"product"}}):t._e()],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentItem==e.row.__index,expression:"currentItem == props.row.__index"}]},[s("div",{staticClass:"q-pa-xs row text-caption"},[s("div",[t._v("Manage SKU: "+t._s(e.row.SKU))]),s("q-space"),s("q-btn",{attrs:{flat:"",icon:"close",size:"sm",dense:""},on:{click:function(e){t.currentItem=null}}})],1),s("q-separator"),s("div",{staticClass:"q-pa-sm"},["Product"==e.row.item_type?s("div",{staticClass:"q-mb-sm",staticStyle:{cursor:"pointer"},on:{click:function(s){t.current_item_id=e.row._id,t.$refs.manageproduct.openadjuststock(e.row._id)}}},[s("q-icon",{staticClass:"text-primary q-mr-sm",attrs:{name:"fa fa-edit"}}),t._v("Add/Deduct inventory\n            ")],1):s("div",{staticClass:"q-mb-sm",staticStyle:{cursor:"pointer"}},[s("q-icon",{staticClass:"text-primary q-mr-sm",attrs:{name:"fa fa-edit"}}),t._v("Booking\n              Calendar\n            ")],1),s("div",{staticClass:"q-mb-sm",staticStyle:{cursor:"pointer"},on:{click:function(s){t.current_item_id=e.row._id,t.$refs.manageproduct.openeditproduct(e.row._id)}}},[s("q-icon",{staticClass:"text-primary q-mr-sm",attrs:{name:"fa fa-edit"}}),t._v("Edit\n              details\n            ")],1),s("div",{staticClass:"q-mb-sm",staticStyle:{cursor:"pointer"},on:{click:function(s){t.current_item_id=e.row._id,t.$refs.manageproduct.deleteProduct(e.row._id)}}},[s("q-icon",{staticClass:"text-primary q-mr-sm",attrs:{name:"fa fa-edit"}}),t._v("Delete\n              item\n            ")],1)]),s("div",{staticClass:"q-ml-sm"},[s("font",{attrs:{size:"2"}},["Product"==e.row.item_type?s("table",[s("tr",[s("td",[t._v("On-hand")]),s("td",{staticClass:"text-primary"},[t._v("25")])]),s("tr",[s("td",[t._v("Sold")]),s("td",{staticClass:"text-primary"},[t._v("1")])]),s("tr",[s("td",[t._v("Cancelled")]),s("td",{staticClass:"text-primary"},[t._v("1")])]),s("tr",[s("td",[t._v("Returned")]),s("td",{staticClass:"text-primary"},[t._v("1")])]),s("tr",[s("td",[t._v("Gift-wrapped")]),s("td",{staticClass:"text-primary"},[t._v("1")])])]):s("table",[s("tr",[s("td",[t._v("Available")]),s("td",{staticClass:"text-primary"},[t._v("25")])]),s("tr",[s("td",[t._v("Booked")]),s("td",{staticClass:"text-primary"},[t._v("1")])]),s("tr",[s("td",[t._v("Completed")]),s("td",{staticClass:"text-primary"},[t._v("1")])]),s("tr",[s("td",[t._v("Cancelled")]),s("td",{staticClass:"text-primary"},[t._v("1")])]),s("tr",[s("td",[t._v("Refunded")]),s("td",{staticClass:"text-primary"},[t._v("1")])])])])],1)],1)])]}}])}),s("q-dialog",{attrs:{persistent:"",maximized:t.$q.screen.lt.md,"full-height":""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[s("q-card",{staticStyle:{width:"400px"}},[s("q-card-section",{staticClass:"row items-center text-grey-10"},[1==t.step?s("div",{staticClass:"text-h6"},[t._v("Add an item")]):t._e(),1!=t.step?s("div",{staticClass:"text-h6"},[t._v("\n          Adding "+t._s(t.category.label)+"\n        ")]):t._e(),s("q-space"),s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),s("q-separator"),s("q-card-section",[s("q-breadcrumbs",{staticClass:"text-grey-10 col-12 text-body1 q-pb-md",attrs:{separator:">","active-color":"grey-10"}},[1==t.step?s("q-breadcrumbs-el",{attrs:{label:"Item category",icon:"dashboard"}}):t._e(),2==t.step?s("q-breadcrumbs-el",{attrs:{label:"Details",icon:"description"}}):t._e(),3==t.step?s("q-breadcrumbs-el",{attrs:{label:"Photos",icon:"photo"}}):t._e(),4==t.step?s("q-breadcrumbs-el",{attrs:{label:"Settings",icon:"settings"}}):t._e()],1),1==t.step?s("div",{staticClass:"row justify-center"},[s("q-select",{staticClass:"col-md-12 col-xs-12 q-pt-sm",class:t.$q.screen.lt.md?"":"q-pr-sm",attrs:{options:t.category_options,label:"Choose category"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),s("div",{staticClass:"col-12",attrs:{align:"right"}},[s("AddCategory")],1)],1):t._e(),1!=t.step&&"Product"==t.category.type?s("div",{staticClass:"row justify-center"},[s("AddProduct",{ref:"item_form",attrs:{step:t.step,category:t.category.value},on:{"update:step":function(e){t.step=e},"update:category":function(e){return t.$set(t.category,"value",e)}}})],1):t._e(),1!=t.step&&"Service"==t.category.type?s("div",{staticClass:"row justify-center"},[s("AddService",{ref:"item_form",attrs:{step:t.step,category:t.category.value},on:{"update:step":function(e){t.step=e},"update:category":function(e){return t.$set(t.category,"value",e)}}})],1):t._e(),s("div",{staticClass:"q-pt-md",attrs:{align:"right"}},[1==t.step?s("q-btn",{ref:"btn_save_next",attrs:{color:"primary",label:"Continue","no-caps":"",outline:""},on:{click:function(e){t.step=2},mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}}):t._e(),1!=t.step?s("div",[s("q-btn",{ref:"btn_back",attrs:{color:"grey",label:"Back","no-caps":"",flat:""},on:{click:function(e){t.step--},mouseover:function(e){t.$refs.btn_back.unelevated=!0,t.$refs.btn_back.flat=!1},mouseleave:function(e){t.$refs.btn_back.flat=!0,t.$refs.btn_back.unelevated=!1}}}),s("q-btn",{ref:"btn_save_next",staticClass:"q-ml-sm",attrs:{color:"primary",label:"Continue","no-caps":"",outline:""},on:{click:function(e){t.step++},mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1):t._e()],1)],1)],1)],1),s("ManageProduct",{ref:"manageproduct"})],1)},r=[],i=s("a34a"),n=s.n(i),o=(s("7514"),s("96cf"),s("c973")),l=s.n(o),c=s("6eaf"),u=s("0fda"),d=s("6356"),p=s("c078"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("q-btn",{attrs:{label:"Add new category","no-caps":"",size:"md",flat:"",color:"primary"},on:{click:function(e){t.opened=!0}}}),s("q-dialog",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[s("q-card",[s("q-card-section",[s("q-select",{ref:"categories",staticClass:"col-xs-12",attrs:{label:"Categories",rules:[function(){return 0!=t.store.categories.length||"This Field is required"}],"lazy-rules":"","use-chips":"","use-input":"",multiple:"","fill-input":"","input-debounce":"0",options:t.categories_option,outlined:"",square:"",dense:"",placeholder:t.categories_done?"search..":""},on:{filter:t.filterCategories,add:function(){t.$refs.categories.blur()},focus:function(){t.categories_done=!0},blur:function(){t.categories_done=!1}},scopedSlots:t._u([{key:"no-option",fn:function(){return[s("q-item",[s("q-item-section",{staticClass:"text-grey"},[t._v("No results")])],1)]},proxy:!0}]),model:{value:t.store.categories,callback:function(e){t.$set(t.store,"categories",e)},expression:"store.categories"}})],1),s("q-separator"),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:function(e){t.opened=!1}}}),s("q-btn",{attrs:{flat:"",label:"Save",color:"primary"},on:{click:t.save}})],1)],1)],1)],1)},_=[],f={data:function(){return{categories_option:[],categories_list:[],store:{},opened:!1,categories_done:!1}},methods:{filterCategories:function(t,e,s){var a=this;e(function(){var e=t.toLowerCase();a.categories_option=a.categories_list.filter(function(t){return t.toLowerCase().indexOf(e)>-1})})},save:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").patch(this.store._id,this.store);case 2:this.$EventBus.$emit("update-category",this.store.categories[this.store.categories.length-1]),this.opened=!1;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.store=t.data[0]});case 2:this.$dbCon.service("categories").find({query:{$select:["category_name"]}}).then(function(t){t.data.map(function(t){e.categories_option.push(t.category_name),e.categories_list.push(t.category_name)})});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},h=f,v=s("2877"),b=Object(v["a"])(h,m,_,!1,null,null,null),g=b.exports,y=s("50b2"),q={components:{AddProduct:c["a"],AddService:u["a"],AdvertiseButton:d["a"],AddMoreItem:p["a"],AddCategory:g,ManageProduct:y["default"]},data:function(){return{data:[],currentItem:null,current_item_id:"",opened:!1,manage_item:!1,filter:"",maximum_items:0,step:1,item_type:"",category_options:[],category:{},columns:[{name:"SKU",required:!0,label:"SKU",align:"left",field:"SKU"},{name:"product_name",required:!0,label:"Product Name",align:"left",field:"product_name"},{name:"category",align:"center",label:"Category",field:"category"},{name:"regular_price",label:"Regular Price",field:"regular_price"},{name:"sale_price",label:"Sale Price",field:"sale_price"},{name:"stock",label:"Stock",field:"stock"}]}},methods:{max_items:function(){this.$q.dialog({title:"Maximum number of Products reached!",message:"To add more product, you may avail it via Bank Deposit or Layaway"})},getData:function(){var t=l()(n.a.mark(function t(){var e,s;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("products").find({query:{store_id:this.$local.getItem("store_token"),deleted:!1}}).then(function(t){return t.data.map(function(e,s){t.data[s].item_type="Product"}),t.data});case 2:return e=t.sent,t.next=5,this.$dbCon.service("services").find({query:{store_id:this.$local.getItem("store_token"),deleted:!1}}).then(function(t){return t.data.map(function(e,s){t.data[s].item_type="Service"}),t.data});case 5:s=t.sent,this.data=e.concat(s);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),unavailableMessage:function(){this.$q.dialog({title:"Unavailable Item",message:"This item is no longer available due to expired item subscription. You may reactivate this item again by purchasing a subscription."})}},watch:{step:function(){var t=l()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(2==this.step&&void 0==this.category.value&&(this.step=1,this.$q.dialog({title:"Choose Item Category",message:"Please choose an Item Category to proceed."})),3!=this.step){t.next=6;break}return t.next=4,this.$refs.item_form.validate();case 4:if(!t.sent){t.next=6;break}this.step--;case 6:if(4!=this.step){t.next=11;break}return t.next=9,this.$refs.item_form.validate();case 9:if(!t.sent){t.next=11;break}this.step--;case 11:6==this.step&&(this.opened=!1,this.item_type="",this.step=1);case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),opened:function(){0==this.opened&&(this.step=1,this.item_type="")}},mounted:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$EventBus.$on("update-category",function(t){e.$dbCon.service("store").get(e.$local.getItem("store_token")).then(function(s){e.$dbCon.service("categories").find({query:{category_name:{$in:s.categories}}}).then(function(s){e.category_options=[],s.data.map(function(s){e.category_options.push({label:s.category_name,value:s.category_name,type:s.classification}),e.$forceUpdate();for(var a=0;a<e.category_options.length;a++)e.category_options[a].value==t&&(e.category=e.category_options[a])})})})}),this.$EventBus.$on("update-step",function(t){e.step=t}),this.$dbCon.service("products").onDataChange(function(){e.getData()}),this.$dbCon.service("services").onDataChange(function(){e.getData()}),this.$dbCon.service("item-subscriptions").onDataChange(function(){e.getData()}),t.next=7,this.$dbCon.service("item-subscriptions").find({query:{store_id:this.$local.getItem("store_token"),$or:[{date_end:{$gte:new Date},status:"Paid"},{status:"Free"}]}}).then(function(t){console.log(t);var s=0;t.data.map(function(t){s+=t.items}),e.maximum_items=s});case 7:this.$dbCon.service("store").get(this.$local.getItem("store_token")).then(function(t){e.$dbCon.service("categories").find({query:{category_name:{$in:t.categories}}}).then(function(t){e.category_options=[],t.data.map(function(t){e.category_options.push({label:t.category_name,value:t.category_name,type:t.classification}),e.$forceUpdate()})})});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},x=q,C=Object(v["a"])(x,a,r,!1,null,null,null);e["a"]=C.exports}}]);