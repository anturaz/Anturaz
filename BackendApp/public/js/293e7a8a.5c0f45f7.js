(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["293e7a8a"],{2309:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-lg"},[a("p",{staticClass:"text-h5"},[t._v("Recommended Products")]),a("div",{staticStyle:{height:"330px"}},[a("q-scroll-area",{staticClass:"bg-grey-1",staticStyle:{height:"100%",width:"100%"},attrs:{horizontal:""}},[a("div",{staticClass:"row no-wrap"},t._l(t.data,function(e){return a("q-card",{key:e._id,staticClass:"q-ma-sm",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticStyle:{height:"180px",width:"200px"}},[a("q-img",{attrs:{ratio:1,src:e.photos[0]}})],1),a("q-card-section",{staticStyle:{height:"75px",width:"200px"}},["product_name"in e?a("div",{staticClass:"text-title text-bold"},[t._v(t._s(e.product_name))]):t._e(),"service_name"in e?a("div",{staticClass:"text-title text-bold"},[t._v(t._s(e.service_name))]):t._e(),a("div",[a("font",{staticClass:"text-bold text-primary"},[t._v(t._s(""!=e.sale_price?t.$prettyMoney(e.sale_price):t.$prettyMoney(e.regular_price)))]),""!=e.sale_price?a("font",{staticClass:"text-grey q-pl-sm"},[a("strike",[t._v(t._s(t.$prettyMoney(e.regular_price)))])],1):t._e()],1),a("div",{staticClass:"row"},[a("div",[t._v("Store:  ")]),a("div",{staticClass:"text-primary",staticStyle:{cursor:"pointer"}},[t._v("Gilbert Shop")])])]),a("q-card-section",{staticStyle:{height:"55px",width:"200px"},attrs:{align:"right"}},["product_name"in e?a("q-btn",{attrs:{color:"primary",label:"View >",unelevated:""},on:{click:function(a){return t.$router.replace({path:"/ProductDetails/"+e._id})}}}):t._e(),"service_name"in e?a("q-btn",{attrs:{color:"primary",label:"View >",unelevated:""},on:{click:function(a){return t.$router.replace({path:"/ServiceDetails/"+e._id})}}}):t._e()],1)],1)}),1)])],1)])},s=[],r=a("a34a"),n=a.n(r),o=(a("ac6a"),a("7514"),a("96cf"),a("c973")),c=a.n(o),l={data:function(){return{data:[]}},mounted:function(){var t=c()(n.a.mark(function t(){var e,a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("product-advertisment").find({query:{$select:["related_id"],date_end:{$gte:new Date}}}).then(function(t){var e=[];return t.data.forEach(function(t){e.push(t.related_id)}),e});case 2:return e=t.sent,t.next=5,this.$dbCon.service("products").find({query:{_id:{$in:e}}}).then(function(t){a.data=t.data});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},d=l,u=a("2877"),p=Object(u["a"])(d,i,s,!1,null,null,null);e["a"]=p.exports},2374:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=this,a=e.$createElement,i=e._self._c||a;return i("div",{staticClass:"q-pa-lg row"},[i("div",{staticClass:"col-12"},[i("q-breadcrumbs",{staticClass:"q-pb-md text-primary",scopedSlots:e._u([{key:"separator",fn:function(){return[i("q-icon",{attrs:{size:"1.5em",name:"chevron_right",color:"primary"}})]},proxy:!0}])},[i("q-breadcrumbs-el",{attrs:{label:"Home",icon:"home"}}),i("q-breadcrumbs-el",{attrs:{label:"Seach",icon:"search"}})],1),i("q-separator")],1),i("div",{staticClass:"col-3 q-pt-md"},[i("div",{staticStyle:{overflow:"hidden",height:"300px"}},[i("q-img",{attrs:{src:e.currentPicture,ratio:1}})],1),i("div",{staticClass:"row"},[i("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(t){e.currentPicture=e.data.photos[0],e.currentIndexPicture=0}}},[i("q-img",{attrs:{src:e.data.photos[0],ratio:1}})],1),i("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(t){e.currentPicture=e.data.photos[1],e.currentIndexPicture=1}}},[i("q-img",{attrs:{src:e.data.photos[1],ratio:1}})],1),i("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(t){e.currentPicture=e.data.photos[2],e.currentIndexPicture=2}}},[i("q-img",{attrs:{src:e.data.photos[2],ratio:1}})],1),i("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(t){e.currentPicture=e.data.photos[3],e.currentIndexPicture=3}}},[i("q-img",{attrs:{src:e.data.photos[3],ratio:1}})],1),i("q-list",{staticClass:"q-mt-sm full-width",attrs:{bordered:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[i("q-item-section",{attrs:{avatar:""}},[""==e.store.logo?i("q-icon",{attrs:{name:"store",color:"grey"}}):e._e(),""!=e.store.logo?i("q-img",{attrs:{src:e.data.photos[3],ratio:1}}):e._e()],1),i("q-item-section",{staticClass:"text-grey"},[e._v(e._s(e.store.store_name))])],1)],1)],1)]),i("div",{staticClass:"col-5 q-pt-md q-pl-md"},[i("div",{staticClass:"text-h5"},[e._v(e._s(e.data.product_name))]),i("q-rating",{attrs:{value:2,size:"1em",max:5,color:"primary"}}),e._v("100 Rating\n      "),i("br"),e._v("\n      Category: "+e._s(e.data.category)+"\n      "),i("br"),i("br"),i("q-separator"),i("div",{staticClass:"text-primary text-h5 q-pt-sm"},[e._v("₱"+e._s(e.data.sale_price))]),i("div",{staticClass:"text-title"},[i("strike",{staticClass:"text-grey"},[e._v("₱"+e._s(e.data.regular_price))]),e._v(" \n        "),i("font",{staticClass:"text-black"},[e._v(e._s(Math.round(100-e.data.sale_price/e.data.regular_price*100))+"% OFF")])],1),i("br"),i("q-separator"),i("q-card",{attrs:{flat:"",bordered:""}},[i("q-tabs",{staticClass:"shadow-2",attrs:{"inline-label":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[i("q-tab",{attrs:{name:"description",icon:"description",label:"Description"}}),i("q-tab",{attrs:{name:"reviews",icon:"star",label:"Reviews"}})],1),i("q-separator"),i("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[i("q-tab-panel",{attrs:{name:"description"}},[i("div",{domProps:{innerHTML:e._s(e.data.description)}})]),i("q-tab-panel",{attrs:{name:"reviews"}},e._l(e.product_transactions,function(t){return i("q-card",{key:t._id,attrs:{flat:"",bordered:""}},[i("q-card-section",[i("q-icon",{attrs:{name:"schedule"}}),e._v(" "+e._s(e.$formatDate(t.logs[t.logs.length-1].date))+"\n                "),i("div",[i("font",{staticClass:"text-grey"},[e._v(e._s(t.remarks))])],1),i("q-rating",{attrs:{value:t.rate,size:"1em",max:5,color:"primary"}})],1)],1)}),1)],1)],1)],1),i("div",{staticClass:"col-4 q-pt-md q-pl-md"},[i("div",{staticClass:"q-pt-sm q-gutter-sm"},[0!=e.data.size.length?i("q-card",{attrs:{flat:"",bordered:""}},[i("q-card-section",[i("span",{staticClass:"text-bold"},[e._v("Size:")]),i("q-space"),e._l(e.data.size,function(t){return i("q-chip",{key:t,class:e.size==t?"bg-primary text-white":"grey",attrs:{disable:0==e.data.stock,clickable:""},on:{click:function(a){e.size=t}}},[e._v(e._s(t))])})],2)],1):e._e(),0!=e.data.color.length?i("q-card",{attrs:{flat:"",bordered:""}},[i("q-card-section",[i("span",{staticClass:"text-bold"},[e._v("Color:")]),i("q-space"),e._l(e.data.color,function(t){return i("q-chip",{key:t,class:e.color==t?"bg-primary text-white":"grey",attrs:{disable:0==e.data.stock,clickable:""},on:{click:function(a){e.color=t}}},[e._v(e._s(t))])})],2)],1):e._e(),0!=e.data.material.length?i("q-card",{attrs:{flat:"",bordered:""}},[i("q-card-section",[i("span",{staticClass:"text-bold"},[e._v("Material:")]),i("q-space"),e._l(e.data.material,function(t){return i("q-chip",{key:t,class:e.material==t?"bg-primary text-white":"grey",attrs:{disable:0==e.data.stock,clickable:""},on:{click:function(a){e.material=t}}},[e._v(e._s(t))])})],2)],1):e._e(),i("q-card",{attrs:{flat:"",bordered:""}},[i("q-card-section",[i("span",{staticClass:"text-title text-bold"},[e._v("Quantity:")]),i("q-input",{staticClass:"col-1",attrs:{type:"number",disable:0==e.data.stock,debounce:"200",outlined:"",squared:"",dense:""},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}}),i("div",{attrs:{align:"right"}},[i("span",{staticClass:"text-grey"},[e._v("Only "+e._s(e.data.stock)+" items left!")])])],1)],1),i("q-card",{attrs:{flat:"",bordered:""}},[i("q-card-section",[i("span",{staticClass:"text-title text-bold"},[e._v("Gift Wrap:")]),i("div",{staticClass:"text-grey"},[e._v("Size:")]),i("div",[i("q-chip",{class:"small"==e.giftwrapping_size?"bg-primary text-white":"grey",attrs:{clickable:""},on:{click:function(t){e.giftwrapping_size="small"}}},[e._v("Small")]),i("q-chip",{class:"medium"==e.giftwrapping_size?"bg-primary text-white":"grey",attrs:{clickable:""},on:{click:function(t){e.giftwrapping_size="medium"}}},[e._v("Medium")]),i("q-chip",{class:"large"==e.giftwrapping_size?"bg-primary text-white":"grey",attrs:{clickable:""},on:{click:function(t){e.giftwrapping_size="large"}}},[e._v("Large")]),i("q-chip",{class:"extra_large"==e.giftwrapping_size?"bg-primary text-white":"grey",attrs:{clickable:""},on:{click:function(t){e.giftwrapping_size="extra_large"}}},[e._v("Extra Large")])],1),i("div",{staticClass:"text-grey"},[e._v("Color:")]),e._v("\n"+e._s(e.store.giftwrapping.charges[e.giftwrapping_size])+"\n            "),i("div",e._l(e.store.giftwrapping.colors,function(t){return i("q-btn",{key:t,staticClass:"q-mr-sm",attrs:{rounded:"",color:e.giftwrapping_color==t?"orange":"grey"},on:{click:function(a){e.giftwrapping_color=t}}},[i("span",{staticStyle:{height:"25px",width:"25px","border-radius":"50%",display:"inline-block"},style:{"background-color":t}})])}),1)])],1),i("q-card",{attrs:{flat:"",bordered:""}},[i("q-card-section",[i("span",{staticClass:"text-title text-bold"},[e._v("Date Needed:")]),i("br"),i("span",{staticClass:"text-grey text-subtitle2"},[e._v("*Should be at least 5 days prior to the date of purchase")]),e.$getDateDiff(e.date_needed,this.$addToDate(new Date,5,0),"months")<3?i("span",{staticClass:"text-red text-subtitle2 q-pt-xs"},[i("br"),e._v("*Only\n              "),i("b",[e._v("Full Payment")]),e._v(" is applicable with the selected date needed\n            ")]):e._e(),i("br"),i("br"),i("div",{attrs:{align:"center"}},[i("q-date",{attrs:{disable:0==e.data.stock,options:function(e){return e>=t.$formatDateForPicker(t.$addToDate(new Date,5,0))},minimal:""},model:{value:e.date_needed,callback:function(t){e.date_needed=t},expression:"date_needed"}})],1)])],1)],1),i("br"),0!=e.data.stock?i("div",{staticClass:"row"},[i("q-btn",{staticClass:"col-md-7",attrs:{unelevated:"",color:"primary",size:"lg",label:"Proceed to checkout"},on:{click:e.checkLogin}}),i("q-btn",{staticClass:"col-md-5",attrs:{flat:"",color:"grey",size:"md",label:"Add to cart",icon:"add_shopping_cart"},on:{click:e.addToCart}})],1):i("div",[i("q-btn",{staticClass:"full-width",attrs:{unelevated:"",color:"red",disable:"",size:"lg",label:"Out of Stock!"}})],1)]),i("div",{staticClass:"col-12"},[i("RecommendedProducts")],1),i("q-dialog",{attrs:{persistent:""},model:{value:e.loginForm,callback:function(t){e.loginForm=t},expression:"loginForm"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center"},[i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",size:"xs"}})],1),i("q-card-section",[i("ShopperLoginForm",{attrs:{afterLogin:e.afterLogin}})],1)],1)],1),i("q-dialog",{model:{value:e.checkout,callback:function(t){e.checkout=t},expression:"checkout"}},[i("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[i("q-card-section",{staticClass:"row items-center"},[i("div",{staticClass:"text-h6"},[e._v("Checkout")]),i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),i("q-card-section")],1)],1)],1)},s=[],r=a("a34a"),n=a.n(r),o=(a("7514"),a("96cf"),a("c973")),c=a.n(o),l=a("4d91"),d=a("2309"),u=a("30ce"),p={components:{ShopperLoginForm:l["a"],RecommendedProducts:d["a"],CheckoutProduct:u["default"]},data:function(){return{tab:"description",data:{},store:{},product_transactions:[],currentPicture:"",size:null,color:null,material:null,giftwrapping:!0,giftwrapping_color:"",giftwrapping_size:"small",date_needed:this.$formatDateForPicker(this.$addToDate(new Date,5,0)),payment_option:"",quantity:"1",loginForm:!1,checkout:!1}},methods:{afterLogin:function(){this.loginForm=!1,this.checkLogin()},checkIfLoggedIn:function(){var t=c()(n.a.mark(function t(){var e,a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=!0,t.next=3,this.$dbCon.authenticate().then(function(t){a.$local.has("user_token")?a.$dbCon.service("users").find({query:{_id:a.$local.getItem("user_token")}}).then(function(t){e="Shopper"==t.data[0].system_user_type}):e=!1}).catch(function(t){e=!1});case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addToCart:function(){var t=c()(n.a.mark(function t(){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.checkIfLoggedIn();case 2:if(!t.sent){t.next=6;break}this.addToCartSignedIn(),t.next=7;break;case 6:this.addToCartNotSignedIn();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addToCartSignedIn:function(){var t=c()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.service("cart").create({item_id:this.data._id,store_id:this.data.store_id,shopper_id:this.$local.getItem("user_token"),type:"products",quantity:this.quantity,size:this.size,color:this.color,material:this.material,date_needed:this.date_needed,giftwrapping:this.giftwrapping,giftwrapping_details:{color:this.giftwrapping_color,size:this.giftwrapping_size,price:this.store.giftwrapping.charges[this.giftwrapping_size]}}).then(function(){e.$q.notify({message:"Item Added To Cart!",position:"top-right",color:"green",timeout:700,icon:"shopping_cart"})});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addToCartNotSignedIn:function(){var t=[];this.$session.has("cart")?t=this.$session.get("cart"):this.$session.set("cart",[]),t.push({item_id:this.data._id,store_id:this.data.store_id,type:"products",quantity:this.quantity,size:this.size,color:this.color,material:this.material,date_needed:this.date_needed,giftwrapping:this.giftwrapping,giftwrapping_details:{color:this.giftwrapping_color,size:this.giftwrapping_size,price:this.store.giftwrapping.charges[this.giftwrapping_size]}}),this.$session.set("cart",t),this.$q.notify({message:"Item Added To Cart!",position:"top-right",color:"green",timeout:700,icon:"shopping_cart"}),this.$EventBus.$emit("modify-cart",null)},checkoutSignedIn:function(){var t=c()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.service("cart").create({item_id:this.data._id,store_id:this.data.store_id,shopper_id:this.$local.getItem("user_token"),type:"products",quantity:this.quantity,size:this.size,color:this.color,material:this.material,date_needed:this.date_needed,giftwrapping:this.giftwrapping,giftwrapping_details:{color:this.giftwrapping_color,size:this.giftwrapping_size,price:this.store.giftwrapping.charges[this.giftwrapping_size]}}).then(function(t){e.$router.push("/CheckoutProduct/"+t._id)});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),checkLogin:function(){var t=c()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.authenticate().then(function(){e.checkoutSignedIn()}).catch(function(){e.loginForm=!0});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},watch:{quantity:function(){this.quantity<1&&(this.quantity=1),this.quantity%2==0&&(this.quantity=this.quantity-this.quantity%2),this.quantity>this.data.stock&&(this.quantity=this.data.stock)}},mounted:function(){var t=c()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$dbCon.service("product-transactions").find({query:{item_id:this.$route.params.product,status:"Done"}}).then(function(t){e.product_transactions=t.data}),t.next=3,this.$dbCon.service("products").find({query:{_id:this.$route.params.product}}).then(function(t){e.data=t.data[0],e.currentPicture=e.data.photos[0]});case 3:return t.next=5,this.$dbCon.service("store").find({query:{_id:this.data.store_id}}).then(function(t){e.store=t.data[0],e.giftwrapping_color=e.store.giftwrapping.colors[0]});case 5:this.$router.push(this.$route.path);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},h=p,g=a("2877"),f=Object(g["a"])(h,i,s,!1,null,null,null);e["default"]=f.exports},"4d91":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-center"},[a("q-card",{staticStyle:{"min-width":"300px","max-width":"500px"},attrs:{flat:"",bordered:!t.$q.screen.lt.sm}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Login")])]),a("q-card-section",[a("q-input",{attrs:{label:"Email Address"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("q-input",{attrs:{type:"password",label:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("q-card-section",{staticClass:"flex justify-between"},[a("q-btn",{staticClass:"col-6",attrs:{flat:"",color:"grey",dense:""}},[t._v("FORGOT ACCOUNT?")]),a("q-btn",{staticClass:"col-6",attrs:{flat:"",color:"grey",dense:""},on:{click:function(e){return t.$router.push("/ShopperSignUp")}}},[t._v("SIGN UP")])],1),a("q-card-section",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"LOG IN"},on:{click:t.validate}})],1)],1)],1)},s=[],r=a("a34a"),n=a.n(r),o=(a("96cf"),a("c973")),c=a.n(o),l={props:{afterLogin:{type:Function}},data:function(){return{email:"",password:""}},methods:{validate:function(){""==this.email||""==this.password?this.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."}):this.login()},login:function(){var t=this;this.$q.loading.show(),this.$dbCon.authenticate({email:this.email,password:this.password,strategy:"local"}).then(function(){var e=c()(n.a.mark(function e(a){var i,s;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$dbCon.passport.verifyJWT(t.$local.getItem("jwt"));case 2:return i=e.sent,e.next=5,t.$dbCon.services.users.get(i.userId);case 5:s=e.sent,"Shopper"!=s.system_user_type?(t.$q.loading.hide(),t.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."}),t.$dbCon.logout()):0==s.access?(t.$q.loading.hide(),t.$q.dialog({title:"Access Turned Off",message:"Your access to the app is turned off. Kindly contact Anturaz Team for this issue."}),t.$dbCon.logout()):(t.$q.loading.hide(),t.$local.set("user_token",s._id),t.$EventBus.$emit("logged-in",null),t.afterLogin());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){t.$q.loading.hide(),t.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."})})}}},d=l,u=a("2877"),p=Object(u["a"])(d,i,s,!1,null,null,null);e["a"]=p.exports}}]);