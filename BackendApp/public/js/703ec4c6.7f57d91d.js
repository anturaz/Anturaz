(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["703ec4c6"],{"4d91":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-center"},[a("q-card",{staticStyle:{"min-width":"300px","max-width":"500px"},attrs:{flat:"",bordered:!t.$q.screen.lt.sm}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("Login")])]),a("q-card-section",[a("q-input",{attrs:{label:"Email Address"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("q-input",{attrs:{type:"password",label:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("q-card-section",{staticClass:"flex justify-between"},[a("q-btn",{staticClass:"col-6",attrs:{flat:"",color:"grey",dense:""}},[t._v("FORGOT ACCOUNT?")]),a("q-btn",{staticClass:"col-6",attrs:{flat:"",color:"grey",dense:""},on:{click:function(e){return t.$router.push("/ShopperSignUp")}}},[t._v("SIGN UP")])],1),a("q-card-section",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"LOG IN"},on:{click:t.validate}})],1)],1)],1)},n=[],i=a("a34a"),o=a.n(i),r=(a("96cf"),a("c973")),l=a.n(r),c={props:{afterLogin:{type:Function}},data:function(){return{email:"",password:""}},methods:{validate:function(){""==this.email||""==this.password?this.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."}):this.login()},login:function(){var t=this;this.$q.loading.show(),this.$dbCon.authenticate({email:this.email,password:this.password,strategy:"local"}).then(function(){var e=l()(o.a.mark(function e(a){var s,n;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$dbCon.passport.verifyJWT(t.$local.getItem("jwt"));case 2:return s=e.sent,e.next=5,t.$dbCon.services.users.get(s.userId);case 5:n=e.sent,"Shopper"!=n.system_user_type?(t.$q.loading.hide(),t.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."}),t.$dbCon.logout()):0==n.access?(t.$q.loading.hide(),t.$q.dialog({title:"Access Turned Off",message:"Your access to the app is turned off. Kindly contact Anturaz Team for this issue."}),t.$dbCon.logout()):(t.$q.loading.hide(),t.$local.set("user_token",n._id),t.$EventBus.$emit("logged-in",null),t.afterLogin());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){t.$q.loading.hide(),t.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."})})}}},d=c,u=a("2877"),p=Object(u["a"])(d,s,n,!1,null,null,null);e["a"]=p.exports},e8c5:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pt-xl"},[a("ShopperLoginForm",{attrs:{afterLogin:t.afterLogin}})],1)},n=[],i=a("4d91"),o={components:{ShopperLoginForm:i["a"]},methods:{afterLogin:function(){this.$router.push("/")}}},r=o,l=a("2877"),c=Object(l["a"])(r,s,n,!1,null,null,null);e["default"]=c.exports}}]);