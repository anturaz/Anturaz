(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d207b39"],{a23e:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:t.$q.screen.lt.sm?"min-width:100%":""},[t.$q.screen.lt.sm?n("br"):t._e(),n("q-table",{attrs:{data:t.data,columns:t.columns,filter:t.filter,"row-key":"name"},scopedSlots:t._u([{key:"top-right",fn:function(){return[n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(e){return n("q-tr",{attrs:{props:e}},[n("q-td",{key:"title",attrs:{props:e}},[t._v(t._s(e.row.title))]),n("q-td",{key:"created_at",attrs:{props:e}},[t._v(t._s(t.$formatDate(e.row.createdAt)))]),n("q-td",{key:"until",attrs:{props:e}},[t._v(t._s(t.$formatDate_DateOnly(e.row.until)))]),n("q-td",{key:"content",attrs:{props:e}},[t._v(t._s(e.row.content))]),n("q-td",{key:"user",attrs:{props:e}},[t._v(t._s(e.row.user))]),n("q-td",{key:"actions",staticClass:"flex item-center",attrs:{props:e}},[t.$q.screen.lt.lg?t._e():n("ViewAnnouncement",{staticClass:"col",attrs:{announcement:e.row}}),t.$q.screen.lt.lg?t._e():n("EditAnnouncement",{staticClass:"col",attrs:{announcement:e.row}}),t.$q.screen.lt.lg?t._e():n("DeleteAnnouncement",{staticClass:"col",attrs:{announcement:e.row}}),t.$q.screen.lt.lg?n("q-btn",{attrs:{icon:"more_vert",flat:"",round:"",size:"sm",color:"grey-7"}},[n("q-menu",[n("q-list",[n("q-item",[n("q-item-section",[n("ViewAnnouncement",{staticClass:"col",attrs:{announcement:e.row}})],1)],1),n("q-separator"),n("q-item",[n("q-item-section",[n("EditAnnouncement",{staticClass:"col",attrs:{announcement:e.row}})],1)],1),n("q-separator"),n("q-item",[n("q-item-section",[n("DeleteAnnouncement",{staticClass:"col",attrs:{announcement:e.row}})],1)],1)],1)],1)],1):t._e()],1)],1)}}])}),n("q-page-sticky",{staticStyle:{"z-index":"999"},attrs:{position:"bottom-right",offset:[30,30]}},[n("AddAnnouncement")],1)],1)},s=[],r=(n("7514"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-btn",{attrs:{icon:"add",size:t.$q.screen.lt.sm?"md":"xl",round:"",color:"primary"},on:{click:function(e){t.opened=!0}}}),n("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[n("q-card",{style:t.$q.screen.lt.sm?"":"min-width: 700px; max-width: 80vw;"},[n("q-card-section",{staticClass:"bg-primary text-white"},[n("div",{staticClass:"text-h6"},[t._v("Add New Announcement")])]),n("q-separator"),n("q-card-section",{staticClass:"scroll q-gutter-sm",staticStyle:{"max-height":"60vh"}},[0!=t.error.length?n("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[n("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[n("ul",t._l(t.error,function(e,a){return n("li",{key:a},[t._v(t._s(e))])}),0)]):t._e(),n("div",{class:t.$q.screen.lt.sm?"":"row"},[n("div",{staticClass:"col-6 items-center"},[n("q-input",{attrs:{label:"Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("q-select",{attrs:{options:["Store Owner","Shopper","All"],label:"User"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),n("q-input",{attrs:{outlined:"",type:"textarea",label:"Content"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v("\n               \n        "),n("div",{staticClass:"col-5 items-center"},[n("p",{staticClass:"text-h7 text-grey-6"},[t._v("Posted Until:")]),n("q-date",{attrs:{options:function(e){return e>=t.$formatDateForPicker(new Date)},minimal:""},model:{value:t.until,callback:function(e){t.until=e},expression:"until"}})],1)])],1),n("q-separator"),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{flat:"",label:"Submit",color:"primary"},on:{click:t.validate}}),n("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:t.close}})],1)],1)],1)],1)}),i=[],o={data:function(){return{opened:!1,title:"",content:"",user:"All",until:this.$formatDateForPicker(new Date),error:[]}},methods:{validate:function(){var t=this;this.error=[],""==this.title.trim()&&this.error.push("Title field is required."),""==this.content.trim()&&this.error.push("Content field is required."),0==this.error.length&&this.$q.dialog({title:"Confirm",message:"Add this Announcement?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.submit()})},submit:function(){var t=this;this.$dbCon.service("announcements").create({title:this.title,content:this.content,user:this.user,createdAt:new Date,until:this.$formatDateFromPickerToDatabase(this.until)}).then(function(){t.close()})},close:function(){this.title="",this.content="",this.user="All",this.until=this.$formatDateForPicker(new Date),this.opened=!1}}},l=o,c=n("2877"),u=Object(c["a"])(l,r,i,!1,null,null,null),d=u.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-btn",{attrs:{icon:"remove_red_eye",size:"sm",color:"primary",flat:""},on:{click:function(e){t.opened=!0}}}),n("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[n("q-card",{staticStyle:{width:"400px"}},[n("q-card-section",{staticClass:"bg-primary text-white"},[n("div",{staticClass:"text-h5 text-bold"},[t._v(t._s(t.announcement.title))]),n("div",{staticClass:"text-h7"},[n("b",[t._v("Date Created:")]),t._v(" "+t._s(t.$formatDate(t.announcement.createdAt)))]),n("div",{staticClass:"text-h7"},[n("b",[t._v("Posted Until:")]),t._v(" "+t._s(t.$formatDate_DateOnly(t.announcement.until)))])]),n("q-separator"),n("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[n("q-field",{attrs:{outlined:"",color:"black",label:"User","stack-label":""}},[t._v(t._s(t.announcement.user))])],1),n("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[n("q-field",{attrs:{outlined:"",color:"black",label:"Content","stack-label":""}},[t._v(t._s(t.announcement.content))])],1),n("q-separator"),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Close",color:"primary"}})],1)],1)],1)],1)},p=[],h={props:["announcement"],data:function(){return{opened:!1}}},f=h,q=Object(c["a"])(f,m,p,!1,null,null,null),v=q.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-btn",{attrs:{icon:"edit",size:"sm",color:"primary",flat:""},on:{click:function(e){t.opened=!0}}}),n("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[n("q-card",{style:t.$q.screen.lt.sm?"":"min-width: 700px; max-width: 80vw;"},[n("q-card-section",{staticClass:"bg-primary text-white"},[n("div",{staticClass:"text-h6"},[t._v("Edit Announcement")])]),n("q-separator"),n("q-card-section",{staticClass:"scroll q-gutter-sm",staticStyle:{"max-height":"50vh"}},[0!=t.error.length?n("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[n("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[n("ul",t._l(t.error,function(e,a){return n("li",{key:a},[t._v(t._s(e))])}),0)]):t._e(),n("div",{class:t.$q.screen.lt.sm?"":"row"},[n("div",{staticClass:"col-6 items-center"},[n("q-input",{attrs:{label:"Title"},model:{value:t.updated.title,callback:function(e){t.$set(t.updated,"title",e)},expression:"updated.title"}}),n("q-select",{attrs:{options:["Store Owner","Shopper","All"],label:"User"},model:{value:t.updated.user,callback:function(e){t.$set(t.updated,"user",e)},expression:"updated.user"}}),n("br"),n("q-input",{attrs:{outlined:"",type:"textarea",label:"Content"},model:{value:t.updated.content,callback:function(e){t.$set(t.updated,"content",e)},expression:"updated.content"}})],1),t._v("\n               \n        "),n("div",{staticClass:"col-5 items-center "},[n("p",{staticClass:"text-h7 text-grey-6"},[t._v("Posted Until:")]),n("q-date",{attrs:{options:function(e){return e>=t.$formatDateForPicker(new Date)},minimal:""},model:{value:t.updated_until,callback:function(e){t.updated_until=e},expression:"updated_until"}})],1)])],1),n("q-separator"),n("q-card-actions",{attrs:{align:"right"}},[n("q-btn",{attrs:{flat:"",label:"Save",color:"primary"},on:{click:t.validate}}),n("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:t.close}})],1)],1)],1)],1)},y=[],g={props:["announcement"],data:function(){return{opened:!1,updated:_.cloneDeep(this.announcement),updated_until:this.$formatDateForPicker(this.announcement.until),error:[]}},methods:{validate:function(){var t=this;this.error=[],""==this.updated.title.trim()&&this.error.push("Title field is required."),""==this.updated.content.trim()&&this.error.push("Content field is required."),0==this.error.length&&this.$q.dialog({title:"Confirm",message:"Update this Announcement?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.save()})},save:function(){this.updated.until=this.updated_until,this.$dbCon.service("announcements").update(this.updated._id,this.updated),this.opened=!1},close:function(){this.updated=_.cloneDeep(this.announcement),this.opened=!1}},beforeMount:function(){console.log(this.updated_until)}},w=g,x=Object(c["a"])(w,b,y,!1,null,null,null),k=x.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-btn",{attrs:{icon:"delete",size:"sm",color:"primary",flat:""},on:{click:function(e){return t.deleteAnnouncement()}}})],1)},$=[],A={props:["announcement"],methods:{deleteAnnouncement:function(){var t=this;this.$q.dialog({title:"Confirm",message:"Do you really want to delete this Announcement?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.$dbCon.service("announcements").remove(t.announcement._id)})}}},D=A,S=Object(c["a"])(D,C,$,!1,null,null,null),O=S.exports,P=(n("b178"),{components:{AddAnnouncement:d,ViewAnnouncement:v,EditAnnouncement:k,DeleteAnnouncement:O},data:function(){return{filter:"",columns:[{name:"title",label:"Title",field:"title",align:"center",style:"width:20%"},{name:"created_at",label:"Created At",field:"created_at",align:"center",style:"width:10%"},{name:"until",label:"Posted Until",field:"until",align:"center",style:"width:10%"},{name:"content",label:"Content",field:"content",align:"center"},{name:"user",label:"User",field:"user",align:"center"},{name:"actions",label:"Actions",align:"center",style:"width:200px"}],data:[]}},methods:{getData:function(){var t=this;this.$dbCon.service("announcements").find({query:{$sort:{createdAt:-1},$limit:999999999999}}).then(function(e){t.data=e.data})}},mounted:function(){var t=this;this.$dbCon.service("announcements").onDataChange(function(){t.getData()})}}),E=P,U=Object(c["a"])(E,a,s,!1,null,null,null);e["default"]=U.exports}}]);