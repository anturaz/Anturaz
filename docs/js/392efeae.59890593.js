(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["392efeae"],{"2b67":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"100px",square:""}},[a("img",{attrs:{ratio:1,src:t.product.photos[0]}})])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-title",attrs:{lines:"1"}},[t._v(t._s(t.product.service_name))]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Category:")]),t._v("\n        "+t._s(t.product.category)+"\n      ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Date Needed:")]),t._v("\n        "+t._s(t.$formatDate_DateOnly(t.order.date_needed))+"\n      ")]),void 0!=t.order.mode_of_delivery?a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Mode of Delivery:")]),t._v("\n        "+t._s(t.order.mode_of_delivery)+"\n      ")]):t._e()],1),a("q-item-section",{attrs:{side:"",top:""}},[void 0!=t.order.order_number?a("span",{staticClass:"text-primary text-title text-bold"},[t._v("RESERVATION# "+t._s(t.order.order_number)+" ")]):t._e(),a("div",[a("span",{staticClass:"text-primary text-title text-bold"},[t._v(t._s(t.$prettyMoney(t.payment.total))+" ")])]),a("div",[t._v("Qty "+t._s(t.order.quantity))]),a("q-space"),a("div",[t.buttonVisible?a("q-btn",{attrs:{label:t.buttonLabel,color:"primary",unelevated:""},on:{click:t.updateFunction}}):t._e()],1)],1)],1)],1)},n=[],o=(a("7514"),{props:{order:Object,updateFunction:Function,buttonLabel:String,buttonVisible:Boolean},data:function(){return{product:{},shopper:{},payment:{}}},mounted:function(){var t=this;this.$dbCon.service("services").get(this.order.item_id).then(function(e){t.product=e}),this.$dbCon.service("users").get(this.order.shopper_id).then(function(e){t.shopper=e}),this.$dbCon.service("shopper-payments").find({query:{related_id:this.order._id}}).then(function(e){console.log(e),t.payment=e.data[0]})}}),s=o,i=a("2877"),l=Object(i["a"])(s,r,n,!1,null,null,null);e["a"]=l.exports},"653e":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[t._data&&t._data[t.current_count]?a("div",{staticClass:"col-9 text-right self-center q-pr-md"},[t._v(t._s(t._data[t.current_count].length))]):t._e(),a("div",{staticClass:"col-3"},[a("q-btn",{attrs:{icon:"pageview",size:"lg",dense:"",flat:"",color:"grey"},on:{click:function(e){t.opened=!0}}})],1),a("q-dialog",{staticClass:"column",attrs:{"full-height":"","full-width":"",maximized:t.$q.screen.lt.md},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticClass:"col-12",staticStyle:{width:"800px","max-width":"80vw"}},[a("q-bar",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"},on:{click:function(e){t.opened=!1}}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),a("q-card-section",[a("q-breadcrumbs",{staticClass:"text-grey"},[a("q-breadcrumbs-el",{attrs:{label:"Store",icon:"store"}}),a("q-breadcrumbs-el",{attrs:{label:"Reservations",icon:"menu_book"}})],1),a("br"),a("q-card",{staticClass:"col-12",attrs:{flat:""}},[a("q-card-section",[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},model:{value:t.tabData,callback:function(e){t.tabData=e},expression:"tabData"}},[a("q-tab",{attrs:{name:"Pending Payment",label:"Pending Payment"}},[a("q-badge",{attrs:{color:"primary",label:t.pendingPayment.length}})],1),a("q-tab",{attrs:{name:"To Acknowledge",label:"To Acknowledge"}},[a("q-badge",{attrs:{color:"primary",label:t.toAcknowledge.length}})],1),a("q-tab",{attrs:{name:"Status",label:"Status"}},[a("q-badge",{attrs:{color:"primary",label:t.status.length}})],1),a("q-tab",{attrs:{name:"Completed",label:"Completed"}},[a("q-badge",{attrs:{color:"primary",label:t.completed.length}})],1)],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tabData,callback:function(e){t.tabData=e},expression:"tabData"}},[a("q-tab-panel",{attrs:{name:"Pending Payment"}},t._l(t.pendingPayment,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("PendingPayment",{attrs:{order:t}})],1)}),1),a("q-tab-panel",{attrs:{name:"To Acknowledge"}},t._l(t.toAcknowledge,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ToAcknowledge",{attrs:{order:t}})],1)}),1),a("q-tab-panel",{attrs:{name:"Status"}},t._l(t.status,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("Status",{attrs:{order:t}})],1)}),1),a("q-tab-panel",{attrs:{name:"Completed"}},t._l(t.completed,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("Status",{attrs:{order:t}})],1)}),1)],1)],1)],1)],1)],1)],1)],1)],1)},n=[],o=(a("28a5"),a("a34a")),s=a.n(o),i=(a("7514"),a("96cf"),a("c973")),l=a.n(i),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ServiceDetails",{attrs:{order:t.order,buttonVisible:!1}})],1)},d=[],u=a("2b67"),p={props:["order"],components:{ServiceDetails:u["a"]}},b=p,m=a("2877"),v=Object(m["a"])(b,c,d,!1,null,null,null),h=v.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ServiceDetails",{attrs:{order:t.order,updateFunction:t.update,buttonLabel:"Review",buttonVisible:!0}})],1)},g=[],f={props:["order"],components:{ServiceDetails:u["a"]},methods:{update:function(){var t=this;this.$q.dialog({title:"Mark as Reviewed",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.order.status="To Acknowledge",t.order.logs.push({event:"Reviewed",date:new Date}),t.$dbCon.service("service-transactions").patch(t.order._id,t.order).then(function(){t.opened=!1})})}}},y=f,q=Object(m["a"])(y,_,g,!1,null,null,null),w=q.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ServiceDetails",{attrs:{order:t.order,updateFunction:t.update,buttonVisible:!1}})],1)},x=[],C={props:["order"],components:{ServiceDetails:u["a"]},methods:{update:function(){var t=this;this.$q.dialog({title:"Mark as Prepared",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){"Shipping"==t.order.mode_of_delivery?t.order.status="For Shipping":"Pickup"==t.order.mode_of_delivery&&(t.order.status="For Pickup"),t.order.logs.push({event:"Packaged",date:new Date}),t.$dbCon.service("service-transactions").patch(t.order._id,t.order).then(function(){t.opened=!1})})}}},D=C,P=Object(m["a"])(D,k,x,!1,null,null,null),S=P.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ServiceDetails",{attrs:{order:t.order,buttonVisible:!1}})],1)},A=[],O={props:["order"],components:{ServiceDetails:u["a"]},methods:{}},T=O,j=Object(m["a"])(T,$,A,!1,null,null,null),E=j.exports,F={props:["tab"],components:{PendingPayment:h,ToAcknowledge:w,Status:S,Completed:E},data:function(){return{pendingPayment:[],toAcknowledge:[],status:[],completed:[],tabData:"To Acknowledge",opened:!1,current_count:""}},methods:{getData:function(){var t=l()(s.a.mark(function t(e){var a;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("service-transactions").find({query:{store_id:this.$local.getItem("store_token"),status:e}});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=l()(s.a.mark(function t(){var e=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.current_count=this.tab.split(" ").join(""),this.current_count=this.current_count.charAt(0).toLowerCase()+this.current_count.substring(1),this.$dbCon.service("service-transactions").onDataChange(l()(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData("Pending Payment");case 2:return e.pendingPayment=t.sent,t.next=5,e.getData("For Acknowledgement");case 5:return e.toAcknowledge=t.sent,t.next=8,e.getData("To Acknowledge");case 8:return e.status=t.sent,t.next=11,e.getData("Completed");case 11:e.completed=t.sent;case 12:case"end":return t.stop()}},t)})));case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},V=F,R=Object(m["a"])(V,r,n,!1,null,null,null);e["default"]=R.exports}}]);