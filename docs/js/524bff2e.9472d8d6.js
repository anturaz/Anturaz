(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["524bff2e"],{"171d":function(t,e,a){},"1cc4":function(t,e,a){"use strict";var s=a("171d"),n=a.n(s);n.a},"4d91":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card-section",{staticClass:"column items-center"},[a("img",{staticStyle:{width:"80px"},attrs:{src:t.$appLink+"/uploads/admin/sample_logo.png"}}),a("div",{staticClass:"text-h5 text-black col-12"},[t._v("Anturaz Shopper")]),a("div",{staticClass:"text-subtitle2 text-black col-12"},[t._v("Login")])]),a("q-card-section",[a("q-input",{attrs:{color:"primary",label:"Email"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"email"}})]},proxy:!0}]),model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("q-input",{attrs:{color:"primary",type:"password",label:"Password"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"lock"}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("q-card-actions",{staticClass:"q-px-md"},[a("q-btn",{staticClass:"full-width",attrs:{unelevated:"",color:"primary",size:"lg",label:"Login"},on:{click:t.validate}})],1),a("q-card-section",{staticClass:"text-center q-pa-none",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$router.push("/ShopperSignUp")}}},[a("p",{staticClass:"text-grey-6"},[t._v("Don't have an account? Sign up here!")])])],1)},n=[],o=a("a34a"),i=a.n(o),r=(a("96cf"),a("c973")),c=a.n(r),l={props:{afterLogin:{type:Function}},data:function(){return{email:"",password:""}},methods:{validate:function(){""==this.email||""==this.password?(console.log("validate method"),this.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."})):this.login()},login:function(){var t=this;this.$q.loading.show(),console.log(this.email),console.log(this.password,"hey"),this.$dbCon.authenticate({email:this.email,password:this.password,strategy:"local"}).then(function(){var e=c()(i.a.mark(function e(a){var s,n;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$dbCon.passport.verifyJWT(t.$local.getItem(t.$appLink+"-jwt"));case 2:return s=e.sent,e.next=5,t.$dbCon.services.users.get(s.userId);case 5:n=e.sent,"Shopper"!=n.system_user_type?(console.log("shopper type?"),t.$q.loading.hide(),t.$q.dialog({title:"Invalid Credentials",message:"The credentials is of a Shopper."})):0==n.access?(t.$q.loading.hide(),t.$q.dialog({title:"Access Turned Off",message:"Your access to the app is turned off. Kindly contact Anturaz Team for this issue."}),t.$dbCon.logout()):(t.$q.loading.hide(),t.$local.set("user_token",n._id),t.$EventBus.$emit("logged-in",n),t.afterLogin());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log("catch",e),t.$q.loading.hide(),t.$q.dialog({title:"Invalid Credentials",message:"The Email and Password you've entered doesn't match any account."})})}}},d=l,u=a("2877"),p=Object(u["a"])(d,s,n,!1,null,null,null);e["a"]=p.exports},e8c5:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-primary window-height window-width row justify-center items-center"},[a("div",{staticClass:"column"},[a("q-card",{staticClass:"q-pa-lg shadow-1",attrs:{square:"",bordered:""}},[a("ShopperLoginForm",{attrs:{afterLogin:t.afterLogin}})],1)],1)])},n=[],o=a("4d91"),i={components:{ShopperLoginForm:o["a"]},methods:{afterLogin:function(){this.$router.push("/")}}},r=i,c=(a("1cc4"),a("2877")),l=Object(c["a"])(r,s,n,!1,null,"0ae49116",null);e["default"]=l.exports}}]);