(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0ba736"],{"36eb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"add",round:"",size:"lg",color:"primary"},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6 text-white"},[t._v("Add Category")])]),a("q-separator"),a("q-card-section",[0!=t.error.length?a("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[a("ul",t._l(t.error,function(e,s){return a("li",{key:s},[t._v(t._s(e))])}),0)]):t._e(),a("div",{staticClass:"q-pa-md"},[a("q-input",{attrs:{label:"Category Name*"},model:{value:t.category_name,callback:function(e){t.category_name=e},expression:"category_name"}}),a("br"),a("q-field",{attrs:{outlined:"",label:"Classification*","stack-label":""},scopedSlots:t._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline",attrs:{tabindex:"0"}},[a("q-radio",{attrs:{val:"Product",label:"Product"},model:{value:t.classification,callback:function(e){t.classification=e},expression:"classification"}}),a("q-radio",{attrs:{val:"Service",label:"Service"},model:{value:t.classification,callback:function(e){t.classification=e},expression:"classification"}})],1)]},proxy:!0}])}),a("br"),a("q-select",{staticClass:"full-width",staticStyle:{width:"250px"},attrs:{filled:"",multiple:"",options:t.options,label:"Payment Option","use-chips":""},model:{value:t.payment_options,callback:function(e){t.payment_options=e},expression:"payment_options"}}),a("br"),a("div",{staticClass:"text-black"},[a("q-input",{attrs:{"bottom-slots":"","stack-label":"",label:"Subcategory name*"},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addSubcategory}})]},proxy:!0}]),model:{value:t.subcategory,callback:function(e){t.subcategory=e},expression:"subcategory"}}),0!=t.subcategories.length?a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.subcategories,function(e,s){return a("q-item",{key:s},[a("q-item-section",[t._v(t._s(e))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{icon:"close",size:"xs",flat:""},on:{click:function(e){return t.removeSubcategory(s)}}})],1)],1)}),1):t._e()],1)],1)],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:t.close}}),a("q-btn",{attrs:{flat:"",label:"Submit",color:"primary"},on:{click:t.validate}})],1)],1)],1)],1)},i=[],o=a("a34a"),n=a.n(o),r=(a("7514"),a("96cf"),a("c973")),c=a.n(r),l=(a("6762"),a("2fdb"),{data:function(){return{opened:!1,step:1,category_name:"",classification:"Product",subcategory:"",subcategories:[],payment_options:["Full-payment","Layaway"],options:["Full-payment","Layaway","20% Reservation"],error:[]}},methods:{addSubcategory:function(){this.subcategories.includes(this.subcategory)?this.$q.notify({message:"Subcategory Name must be unique.",color:"red"}):""!=this.subcategory?(this.subcategories.push(this.subcategory),this.subcategory=""):this.$q.notify({message:"Subcategory Name is required.",color:"red"})},removeSubcategory:function(t){this.subcategories.splice(t,1)},submit:function(){var t=this;this.$dbCon.services.categories.create({category_name:this.category_name,classification:this.classification,subcategories:this.subcategories,payment_options:this.payment_options,status:"Active",createdAt:new Date}).then(function(e){t.close()})},close:function(){this.opened=!1,this.step=1,this.category_name="",this.classification="Product",this.subcategory="",this.subcategories=[],this.payment_options=["Full-payment","Layaway"],this.error=[]},validate:function(){var t=c()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.error=[],""!=this.category_name.trim()){t.next=5;break}this.error.push("Category Name field is required."),t.next=7;break;case 5:return t.next=7,this.$dbCon.service("categories").find({query:{category_name:this.category_name}}).then(function(t){0!=t.total?e.error.push("Category Name exists."):e.$q.dialog({title:"Confirm",message:"Would you like to add this Category?",cancel:{push:!0,color:"grey",flat:!0},persistent:!0}).onOk(function(){e.submit()})});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},watch:{classification:function(){"Product"==this.classification?this.payment_options=["Full-payment","Layaway"]:this.payment_options=["Full-payment","Layaway","20% Reservation"]}}}),u=l,d=a("2877"),p=Object(d["a"])(u,s,i,!1,null,null,null);e["default"]=p.exports}}]);