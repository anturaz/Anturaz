(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d21a74c"],{bc1f:function(r,e,t){"use strict";t.r(e);var n=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[r.$q.screen.lt.sm?t("br"):r._e(),t("q-card",{attrs:{flat:"",bordered:""}},[t("q-card-section",{staticClass:"q-gutter-sm"},[0!=r.error.length?t("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:r._u([{key:"avatar",fn:function(){return[t("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[t("ul",r._l(r.error,function(e,n){return t("li",{key:n},[r._v(r._s(e))])}),0)]):r._e(),t("q-input",{attrs:{label:"Old Password",type:"password"},model:{value:r.old_pw,callback:function(e){r.old_pw=e},expression:"old_pw"}}),t("q-input",{attrs:{label:"New Password",type:"password"},model:{value:r.new_pw,callback:function(e){r.new_pw=e},expression:"new_pw"}}),t("q-input",{attrs:{label:"Confirm Password",type:"password"},model:{value:r.confirm_pw,callback:function(e){r.confirm_pw=e},expression:"confirm_pw"}}),t("div",{attrs:{align:"right"}},[t("q-btn",{attrs:{color:"primary",label:"save"},on:{click:r.validate}})],1)],1)],1)],1)},s=[],o=t("a34a"),a=t.n(o),i=(t("7514"),t("96cf"),t("c973")),d=t.n(i),p={data:function(){return{old_pw:"",new_pw:"",confirm_pw:"",error:[]}},methods:{validate:function(){var r=d()(a.a.mark(function r(){var e,t=this;return a.a.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(e=!0,this.error=[],""==this.old_pw.trim()&&(this.error.push("Old Password field is required."),e=!1),""==this.new_pw.trim()&&(this.error.push("New Password is required."),e=!1),""==this.confirm_pw.trim()&&(this.error.push("Confirm Password is required"),e=!1),1!=e){r.next=8;break}return r.next=8,this.$dbCon.service("shopper").find({query:{_id:this.$session.get("shopper_token")}}).then(function(r){t.old_pw!=r.data[0].password?t.error.push("Wrong old password."):t.new_pw!=t.confirm_pw?t.error.push("New Password and Confirm Password doesn't match."):t.submit()});case 8:case"end":return r.stop()}},r,this)}));function e(){return r.apply(this,arguments)}return e}(),submit:function(){var r=d()(a.a.mark(function r(){var e=this;return a.a.wrap(function(r){while(1)switch(r.prev=r.next){case 0:this.$q.dialog({title:"Confirm",message:"Continue to change your password?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){e.$q.loading.show(),e.$dbCon.service("shopper").find({query:{_id:e.$session.get("shopper_token")}}).then(function(r){r.data[0].password=e.new_pw,e.$dbCon.service("shopper").update(r.data[0]._id,r.data[0]).then(function(){e.$axios({method:"GET",url:e.$appLink+"/ShopperPasswordChangeConfirmation?id="+r.data[0]._id}).then(function(r){e.old_pw="",e.new_pw="",e.confirm_pw="",e.$q.loading.hide(),e.$q.dialog({title:"Success",message:"New Password is saved."}).onOk(function(){})})})})});case 1:case"end":return r.stop()}},r,this)}));function e(){return r.apply(this,arguments)}return e}()},mounted:function(){}},c=p,u=t("2877"),l=Object(u["a"])(c,n,s,!1,null,null,null);e["default"]=l.exports}}]);