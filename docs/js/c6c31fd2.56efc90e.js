(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c6c31fd2","2d0ba736"],{"36eb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"add",round:"",size:"lg",color:"primary"},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6 text-white"},[t._v("Add Category")])]),a("q-separator"),a("q-card-section",[0!=t.error.length?a("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[a("ul",t._l(t.error,function(e,s){return a("li",{key:s},[t._v(t._s(e))])}),0)]):t._e(),a("div",{staticClass:"q-pa-md"},[a("q-input",{attrs:{label:"Category Name*"},model:{value:t.category_name,callback:function(e){t.category_name=e},expression:"category_name"}}),a("br"),a("q-field",{attrs:{outlined:"",label:"Classification*","stack-label":""},scopedSlots:t._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline",attrs:{tabindex:"0"}},[a("q-radio",{attrs:{val:"Product",label:"Product"},model:{value:t.classification,callback:function(e){t.classification=e},expression:"classification"}}),a("q-radio",{attrs:{val:"Service",label:"Service"},model:{value:t.classification,callback:function(e){t.classification=e},expression:"classification"}})],1)]},proxy:!0}])}),a("br"),a("q-select",{staticClass:"full-width",staticStyle:{width:"250px"},attrs:{filled:"",multiple:"",options:t.options,label:"Payment Option","use-chips":""},model:{value:t.payment_options,callback:function(e){t.payment_options=e},expression:"payment_options"}}),a("br"),a("div",{staticClass:"text-black"},[a("q-input",{attrs:{"bottom-slots":"","stack-label":"",label:"Subcategory name*"},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addSubcategory}})]},proxy:!0}]),model:{value:t.subcategory,callback:function(e){t.subcategory=e},expression:"subcategory"}}),0!=t.subcategories.length?a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.subcategories,function(e,s){return a("q-item",{key:s},[a("q-item-section",[t._v(t._s(e))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{icon:"close",size:"xs",flat:""},on:{click:function(e){return t.removeSubcategory(s)}}})],1)],1)}),1):t._e()],1)],1)],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:t.close}}),a("q-btn",{attrs:{flat:"",label:"Submit",color:"primary"},on:{click:t.validate}})],1)],1)],1)],1)},o=[],i=a("a34a"),r=a.n(i),c=(a("7514"),a("96cf"),a("c973")),n=a.n(c),l=(a("6762"),a("2fdb"),{data:function(){return{opened:!1,step:1,category_name:"",classification:"Product",subcategory:"",subcategories:[],payment_options:["Full-payment","Layaway"],options:["Full-payment","Layaway","20% Reservation"],error:[]}},methods:{addSubcategory:function(){this.subcategories.includes(this.subcategory)?this.$q.notify({message:"Subcategory Name must be unique.",color:"red"}):""!=this.subcategory?(this.subcategories.push(this.subcategory),this.subcategory=""):this.$q.notify({message:"Subcategory Name is required.",color:"red"})},removeSubcategory:function(t){this.subcategories.splice(t,1)},submit:function(){var t=this;this.$dbCon.services.categories.create({category_name:this.category_name,classification:this.classification,subcategories:this.subcategories,payment_options:this.payment_options,status:"Active",createdAt:new Date}).then(function(e){t.close()})},close:function(){this.opened=!1,this.step=1,this.category_name="",this.classification="Product",this.subcategory="",this.subcategories=[],this.payment_options=["Full-payment","Layaway"],this.error=[]},validate:function(){var t=n()(r.a.mark(function t(){var e=this;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.error=[],""!=this.category_name.trim()){t.next=5;break}this.error.push("Category Name field is required."),t.next=7;break;case 5:return t.next=7,this.$dbCon.service("categories").find({query:{category_name:this.category_name}}).then(function(t){0!=t.total?e.error.push("Category Name exists."):e.$q.dialog({title:"Confirm",message:"Would you like to add this Category?",cancel:{push:!0,color:"grey",flat:!0},persistent:!0}).onOk(function(){e.submit()})});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},watch:{classification:function(){"Product"==this.classification?this.payment_options=["Full-payment","Layaway"]:this.payment_options=["Full-payment","Layaway","20% Reservation"]}}}),u=l,d=a("2877"),p=Object(d["a"])(u,s,o,!1,null,null,null);e["default"]=p.exports},"60e9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{data:t.data,columns:t.columns,filter:t.filter,"row-key":"name"},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(e){return a("q-tr",{attrs:{props:e}},[a("q-td",{key:"category_name",attrs:{props:e}},[t._v(t._s(e.row.category_name))]),a("q-td",{key:"classification",attrs:{props:e}},[t._v(t._s(e.row.classification))]),a("q-td",{key:"subcategories",attrs:{props:e}},[t._v(t._s(e.row.subcategories.length))]),a("q-td",{key:"payment_options",attrs:{props:e}},[t._v(t._s(e.row.payment_options.length))]),a("q-td",{key:"status",attrs:{props:e}},[t._v(t._s(e.row.status))]),a("q-td",{key:"actions",staticClass:"row item-center",attrs:{props:e}},[a("ViewCategory",{staticClass:"col",attrs:{category:e.row}}),a("EditCategory",{staticClass:"col",attrs:{category:e.row}}),a("OtherActions",{staticClass:"col",attrs:{category:e.row}})],1)],1)}}])})],1),a("q-page-sticky",{staticStyle:{"z-index":"999"},attrs:{position:"bottom-right",offset:[30,30]}},[a("AddCategory")],1)],1)},o=[],i=(a("7514"),a("36eb")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"remove_red_eye",color:"primary",size:"sm",round:"",flat:""},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"700px","max-width":"80vw"},attrs:{flat:""}},[a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"text-h6 col-11"},[t._v("View Category ")]),a("div",{staticClass:"col-1"},[a("q-btn",{attrs:{flat:"",icon:"close",size:"xs"},on:{click:function(e){t.opened=!1}}})],1)])]),a("q-card-section",{staticClass:"bg-white text-black"},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-11"},[a("b",[t._v("Category Name:")]),t._v(" "+t._s(t.category.category_name)+" \n                     ")]),a("div",{staticClass:"col-1"},[a("EditCategory",{attrs:{category:t.category}})],1)]),a("b",[t._v("Classification:")]),t._v(" "+t._s(t.category.classification)+" "),a("br"),a("b",[t._v("Status:")]),t._v(" "+t._s(t.category.status)+" "),a("br"),a("br"),a("q-field",{attrs:{outlined:"",label:"Payment Options",color:"black","stack-label":""},scopedSlots:t._u([{key:"control",fn:function(){return t._l(t.category.payment_options,function(e,s){return a("q-chip",{key:s,attrs:{icon:"brightness_1"}},[t._v(t._s(e))])})},proxy:!0}])}),a("br"),a("q-field",{attrs:{outlined:"",label:"Subcategories",color:"black","stack-label":""},scopedSlots:t._u([{key:"control",fn:function(){return[a("ol",t._l(t.category.subcategories,function(e,s){return a("li",{key:s},[t._v(t._s(e))])}),0)]},proxy:!0}])})],1),a("br"),a("div",{attrs:{align:"right"}},[a("q-btn",{attrs:{label:"close",outline:"",color:"primary"},on:{click:function(e){t.opened=!1}}})],1)])],1)],1)],1)},c=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"edit",color:"primary",size:"sm",round:"",flat:""},on:{click:t.open}}),a("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticClass:"bg-primary text-white",staticStyle:{width:"700px","max-width":"80vw"},attrs:{flat:""}},[a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"text-h6 col-11"},[t._v("Edit Category")]),a("div",{staticClass:"col-1"},[a("q-btn",{attrs:{flat:"",icon:"close",size:"xs"},on:{click:function(e){t.opened=!1}}})],1)])]),a("q-card-section",{staticClass:"bg-white text-black"},[a("div",{staticClass:"q-pa-md"},[0!=t.error.length?a("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[a("ul",t._l(t.error,function(e,s){return a("li",{key:s},[t._v(t._s(e))])}),0)]):t._e(),0!=t.error.length?a("br"):t._e(),a("q-input",{attrs:{label:"Category Name*"},model:{value:t.updated_category.category_name,callback:function(e){t.$set(t.updated_category,"category_name",e)},expression:"updated_category.category_name"}}),a("br"),a("q-field",{attrs:{outlined:"",label:"Classification*","stack-label":""},scopedSlots:t._u([{key:"control",fn:function(){return[a("div",{staticClass:"self-center full-width no-outline",attrs:{tabindex:"0"}},[a("q-radio",{attrs:{val:"Product",label:"Product"},model:{value:t.updated_category.classification,callback:function(e){t.$set(t.updated_category,"classification",e)},expression:"updated_category.classification"}}),a("q-radio",{attrs:{val:"Service",label:"Service"},model:{value:t.updated_category.classification,callback:function(e){t.$set(t.updated_category,"classification",e)},expression:"updated_category.classification"}})],1)]},proxy:!0}])}),a("br"),a("q-select",{staticClass:"full-width",staticStyle:{width:"250px"},attrs:{filled:"",multiple:"",options:t.options,label:"Payment Option","use-chips":""},model:{value:t.updated_category.payment_options,callback:function(e){t.$set(t.updated_category,"payment_options",e)},expression:"updated_category.payment_options"}}),a("br"),a("q-field",{attrs:{outlined:"",label:"Subcategories","stack-label":""}},[a("div",{staticClass:"text-black q-pa-md full-width"},[a("q-input",{attrs:{"bottom-slots":"",label:"Subcategory name*","stack-label":""},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addSubcategory}})]},proxy:!0}]),model:{value:t.subcategory,callback:function(e){t.subcategory=e},expression:"subcategory"}}),0!=t.updated_category.subcategories.length?a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.updated_category.subcategories,function(e,s){return a("q-item",{key:s},[a("q-item-section",[t._v(t._s(e))]),a("q-item-section",{attrs:{avatar:""}},[a("q-btn",{attrs:{icon:"close",size:"xs",flat:""},on:{click:function(e){return t.removeSubcategory(s)}}})],1)],1)}),1):t._e()],1)])],1),a("div",{staticClass:"q-gutter-sm",attrs:{align:"right"}},[a("q-btn",{attrs:{label:"close",outline:"",color:"grey"},on:{click:t.close}}),a("q-btn",{attrs:{label:"save",color:"primary"},on:{click:t.validate}})],1)])],1)],1),a("q-dialog",{model:{value:t.confirm_status,callback:function(e){t.confirm_status=e},expression:"confirm_status"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"warning",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Edit this category?")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"YES",color:"primary"},on:{click:t.save}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"NO",color:"grey"}})],1)],1)],1),a("q-dialog",{model:{value:t.success,callback:function(e){t.success=e},expression:"success"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"check",color:"green","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Category Updated!")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OKAY",color:"green"}})],1)],1)],1)],1)},l=[],u=(a("6762"),a("2fdb"),a("a34a")),d=a.n(u),p=(a("96cf"),a("c973")),y=a.n(p),g={props:["category"],data:function(){return{opened:!1,options:["Full-payment","Layaway","20% Reservation"],subcategory:"",updated_category:{},confirm_status:!1,success:!1,error:[]}},methods:{validate:function(){var t=y()(d.a.mark(function t(){var e=this;return d.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.error=[],""!=this.updated_category.category_name.trim()){t.next=5;break}this.error.push("Category Name field is required"),t.next=7;break;case 5:return t.next=7,this.$dbCon.service("categories").find({query:{category_name:this.updated_category.category_name,_id:{$ne:this.updated_category._id}}}).then(function(t){0!=t.total&&e.error.push("Category Name exists.")});case 7:0==this.error.length&&(this.confirm_status=!0);case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addSubcategory:function(){this.updated_category.subcategories.includes(this.subcategory)?this.$q.notify({message:"Subcategory Name must be unique.",color:"red"}):""!=this.subcategory?(this.updated_category.subcategories.push(this.subcategory),this.subcategory=""):this.$q.notify({message:"Subcategory Name is required.",color:"red"})},removeSubcategory:function(t){this.updated_category.subcategories.splice(t,1)},open:function(){this.updated_category=_.cloneDeep(this.category),this.opened=!0},close:function(){this.updated_category=_.cloneDeep(this.category),this.opened=!1},save:function(){this.$dbCon.services.categories.update(this.updated_category["_id"],this.updated_category),this.opened=!1,this.success=!0}},beforeMount:function(){this.updated_category=_.cloneDeep(this.category)}},f=g,m=a("2877"),b=Object(m["a"])(f,n,l,!1,null,null,null),h=b.exports,v={props:["category"],components:{EditCategory:h},data:function(){return{opened:!1}}},q=v,k=Object(m["a"])(q,r,c,!1,null,null,null),w=k.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{color:"grey-7",round:"",flat:"",size:"sm",icon:"more_vert"}},[a("q-menu",{attrs:{cover:"","auto-close":""}},[a("q-list",[a("q-item",{attrs:{clickable:""},on:{click:function(e){t.confirm_status=!0}}},[a("q-item-section",[t._v("Set as "+t._s("Active"==t.category.status?"Inactive":"Active"))])],1),a("q-item",{attrs:{clickable:""},on:{click:function(e){t.confirm_delete=!0}}},[a("q-item-section",[t._v("Delete Permanently")])],1)],1)],1)],1),a("q-dialog",{model:{value:t.confirm_status,callback:function(e){t.confirm_status=e},expression:"confirm_status"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"warning",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Set this Category as "+t._s("Active"==t.category.status?"Inactive":"Active")+"? ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"YES",color:"primary"},on:{click:t.setStatus}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"NO",color:"grey"}})],1)],1)],1),a("q-dialog",{model:{value:t.confirm_delete,callback:function(e){t.confirm_delete=e},expression:"confirm_delete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"warning",color:"red","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Delete this Category permanently? ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"YES",color:"red"},on:{click:t.deleteCategory}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"NO",color:"grey"}})],1)],1)],1),a("q-dialog",{model:{value:t.success_delete,callback:function(e){t.success_delete=e},expression:"success_delete"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"check",color:"green","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[t._v("Successfully Deleted! ")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"OKAY",color:"green"}})],1)],1)],1)],1)},x=[],S={props:["category"],data:function(){return{confirm_status:!1,confirm_delete:!1,success_delete:!1}},methods:{setStatus:function(){"Active"==this.category.status?this.category.status="Inactive":this.category.status="Active",this.$dbCon.services.categories.update(this.category["_id"],this.category)},deleteCategory:function(){var t=this;this.$dbCon.services.categories.remove(this.category["_id"]).then(function(){t.success_delete=!0})}}},$=S,N=Object(m["a"])($,C,x,!1,null,null,null),A=N.exports,O={components:{AddCategory:i["default"],ViewCategory:w,EditCategory:h,OtherActions:A},data:function(){return{categories:[],filter:"",columns:[{name:"category_name",label:"Category Name",field:"category_name",align:"left"},{name:"classification",label:"Classification",field:"classification",align:"center"},{name:"subcategories",label:"Subcategories",field:"subcategories",align:"center"},{name:"payment_options",label:"Payment Options",field:"payment_options",align:"center"},{name:"status",label:"Status",field:"status",align:"center"},{name:"actions",label:"Actions",field:"actions",align:"center"}],data:[]}},methods:{getData:function(){var t=this;this.$q.loading.show(),this.$dbCon.services.categories.find({query:{$sort:{createdAt:-1},$limit:999999999999}}).then(function(e){t.data=e.data,t.categories=e.data,t.$q.loading.hide()})}},mounted:function(){var t=this;this.getData(),this.$dbCon.service("categories").onDataChange(function(){t.getData()})}},E=O,P=Object(m["a"])(E,s,o,!1,null,null,null);e["default"]=P.exports}}]);