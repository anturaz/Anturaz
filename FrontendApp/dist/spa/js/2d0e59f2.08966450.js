(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0e59f2"],{"94ef":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md row"},[a("div",{staticClass:"col-12"},[a("q-breadcrumbs",{staticClass:"text-grey"},[a("q-breadcrumbs-el",{attrs:{label:"Store",icon:"store"}}),a("q-breadcrumbs-el",{attrs:{label:"Inventory",icon:"inventory"}}),a("q-breadcrumbs-el",{attrs:{label:"Service"}}),a("q-breadcrumbs-el",{attrs:{label:t.data.service_name}})],1),a("br")],1),a("div",{staticClass:"col-12"},[a("q-btn",{attrs:{icon:"arrow_back_ios",color:"primary",flat:"",label:"back",dense:""},on:{click:function(e){return t.$router.push("/StoreOwner/Inventory/Services")}}})],1),a("div",{class:t.$q.screen.lt.sm?"col-12":"col-6"},[a("input",{ref:"fileInput",staticClass:"hidden",attrs:{type:"file"},on:{change:t.onFileSelected}}),a("div",{staticStyle:{overflow:"hidden",height:"300px"}},[a("q-img",{attrs:{src:t.currentPicture}},[a("q-btn",{staticClass:"absolute",staticStyle:{top:"1",right:"12px",transform:"translateY(20%)"},attrs:{fab:"",color:"primary",icon:"edit"},on:{click:function(e){return t.changeCurrentPicture()}}})],1)],1),a("div",{staticClass:"row"},[a("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(e){t.currentPicture=t.data.photos[0],t.currentIndexPicture=0}}},[a("q-img",{attrs:{src:t.data.photos[0]}})],1),a("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(e){t.currentPicture=t.data.photos[1],t.currentIndexPicture=1}}},[a("q-img",{attrs:{src:t.data.photos[1]}})],1),a("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(e){t.currentPicture=t.data.photos[2],t.currentIndexPicture=2}}},[a("q-img",{attrs:{src:t.data.photos[2]}})],1),a("q-btn",{staticClass:"col-3",staticStyle:{overflow:"hidden",height:"100px"},attrs:{outline:"",color:"grey"},on:{click:function(e){t.currentPicture=t.data.photos[3],t.currentIndexPicture=3}}},[a("q-img",{attrs:{src:t.data.photos[3]}})],1)],1),a("br"),a("q-markup-table",{attrs:{flat:"",bordered:"",dense:""}},[a("thead",[a("tr",[a("td",{staticClass:"bg-primary text-white",attrs:{colspan:"3"}},[t._v("Logs")])]),a("tr",[a("td",{staticClass:"text-bold text-left"},[t._v("Date")]),a("td",{staticClass:"text-bold text-right"},[t._v("Description")])])]),a("tbody",t._l(t.data.logs.slice().reverse(),function(e){return a("tr",{key:e.date},[a("td",{staticClass:"text-left"},[t._v(t._s(t.$formatDate(e.date)))]),a("td",{staticClass:"text-right"},[t._v(t._s(e.event))])])}),0)])],1),a("div",{class:t.$q.screen.lt.sm?"col-12":"col-6 q-pl-md"},[a("div",{staticClass:"col-12 row"},[a("EditService",{staticClass:"col-6"}),a("q-btn",{staticClass:"col-6",attrs:{outline:"",color:"primary",size:"sm",dense:"",label:"Delete Service"},on:{click:function(e){return t.deleteService()}}})],1),a("br"),a("q-markup-table",{attrs:{flat:"",bordered:"",dense:""}},[a("tbody",[a("tr",[a("td",{staticClass:"text-bold"},[t._v("SKU:")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.data.SKU))])]),a("tr",[a("td",{staticClass:"text-bold"},[t._v("Service Name:")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.data.service_name))])]),a("tr",[a("td",{staticClass:"text-bold"},[t._v("Category:")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.data.category))])]),a("tr",[a("td",{staticClass:"text-bold"},[t._v("Regular Price:")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.data.regular_price))])]),a("tr",[a("td",{staticClass:"text-bold"},[t._v("Sale Price:")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.data.sale_price))])])])]),a("br"),a("q-card",{attrs:{flat:"",bordered:""}},[a("q-card-section",[a("p",{staticClass:"text-bold"},[t._v("Description:")]),a("div",{domProps:{innerHTML:t._s(t.data.description)}})])],1)],1)])},s=[],i=(a("7f7f"),a("a34a")),c=a.n(i),n=(a("96cf"),a("c973")),o=a.n(n),l=(a("7514"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("q-btn",{staticClass:"col-11",attrs:{outline:"",color:"primary",size:"sm",dense:"",label:"Edit Service"},on:{click:function(e){t.opened=!0}}}),a("div",{staticClass:"col-1"}),a("q-dialog",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"700px","max-width":"80vw"}},[a("q-card-section",{staticClass:"row items-center bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v("Edit Service")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("br")]),a("div",{staticClass:"col-12 row"},[a("q-select",{staticClass:"col-6 q-pr-sm",attrs:{dense:"",square:"",outlined:"",options:t.category_options,label:"Category"},model:{value:t.data.category,callback:function(e){t.$set(t.data,"category",e)},expression:"data.category"}}),a("q-input",{staticClass:"col-6",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Stock Keeping Unit(SKU)"}}),a("q-input",{ref:"inp_service_name",staticClass:"col-12 q-pt-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Service Name",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":"",counter:""},model:{value:t.data.service_name,callback:function(e){t.$set(t.data,"service_name",e)},expression:"data.service_name"}}),a("p",{staticClass:"text-caption text-grey"},[t._v("Description:")]),a("q-editor",{ref:"inp_description",staticClass:"col-12 q-pt-sm",attrs:{"min-height":"4rem"},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}}),a("q-input",{ref:"inp_regular_price",staticClass:"col-6 q-pt-sm q-pr-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Regular Price",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":""},on:{focus:t.toInputRegularPrice,blur:t.toChangeRegularPrice},model:{value:t.temp_regular_price,callback:function(e){t.temp_regular_price=e},expression:"temp_regular_price"}}),a("q-input",{staticClass:"col-6 q-pt-sm q-pr-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Sale Price",rules:[function(e){return parseFloat(t.data.regular_price)>parseFloat(t.data.sale_price)||"Invalid Sale Price"}],"lazy-rules":""},on:{focus:t.toInputSalePrice,blur:t.toChangeSalePrice},model:{value:t.temp_sale_price,callback:function(e){t.temp_sale_price=e},expression:"temp_sale_price"}})],1),a("div",{staticClass:"col-12 q-pt-sm"}),a("q-card",{staticClass:"col-6",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("Enable Cash on Fulfillment?")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.cof?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.cof,callback:function(e){t.$set(t.data,"cof",e)},expression:"data.cof"}})],1)],1),a("q-card",{staticClass:"col-6",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("Enable Lay-away?")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.lay_away?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.lay_away,callback:function(e){t.$set(t.data,"lay_away",e)},expression:"data.lay_away"}})],1)],1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{unelevated:"",label:"Save",color:"primary"},on:{click:t.save}})],1)],1)],1)],1)}),d=[],u=(a("2fdb"),a("6762"),{data:function(){return{opened:!1,data:{},category_options:[],temp_regular_price:"",temp_sale_price:""}},methods:{openModal:function(){this.opened=!0},save:function(){var t=o()(c.a.mark(function t(){var e,a=this;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validate();case 2:e=!t.sent,e&&(this.$parent.data=this.data,this.$dbCon.service("services").patch(this.data._id,this.data).then(function(){a.$q.dialog({title:"Success!",message:"You successfully updated a service.",cancel:{push:!0,color:"grey",flat:!0},persistent:!0}).onOk(function(){a.opened=!1})}));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),validate:function(){var t=o()(c.a.mark(function t(){var e;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=[],t.next=3,this.$refs.inp_service_name.validate();case 3:return e[0]=t.sent,t.next=6,this.$refs.inp_regular_price.validate();case 6:return e[2]=t.sent,t.abrupt("return",e.includes(!1));case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toInputRegularPrice:function(){this.temp_regular_price=this.data.regular_price},toChangeRegularPrice:function(){this.data.regular_price=this.temp_regular_price,this.temp_regular_price=this.$prettyMoney(parseFloat(this.temp_regular_price))},toInputSalePrice:function(){this.temp_sale_price=this.data.sale_price},toChangeSalePrice:function(){this.data.sale_price=this.temp_sale_price,this.temp_sale_price=this.$prettyMoney(parseFloat(this.temp_sale_price))}},mounted:function(){var t=this;this.data=_.cloneDeep(this.$parent.data),this.temp_regular_price=this.$prettyMoney(parseFloat(this.data.regular_price)),this.temp_sale_price=this.$prettyMoney(parseFloat(this.data.sale_price)),this.$dbCon.service("categories").find({query:{classification:"Service"}}).then(function(e){e.data.map(function(e){t.category_options.push(e.category_name)})})}}),p=u,h=a("2877"),v=Object(h["a"])(p,l,d,!1,null,null,null),f=v.exports,m={components:{EditService:f},data:function(){return{data:{},currentPicture:"",currentIndexPicture:0,fileSelected:{}}},methods:{deleteService:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you really want to delete this service?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.$q.dialog({title:"Confirmation",message:"Enter your password",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk(function(e){t.$dbCon.service("shop").find({query:{_id:t.$local.getItem("store_token")}}).then(function(a){a.data[0].password==e?(t.data.deleted=!0,t.$dbCon.service("services").patch(t.data._id,t.data).then(function(){t.$q.dialog({title:"Success!",message:"You have successfully deleted a service."}),t.$router.push("/StoreOwner/Inventory/Services")}),t.$dbCon.service("shop").find({query:{_id:t.$local.getItem("store_token")}}).then(function(e){t.$axios.post(t.$appLink+"/customizableEmail",{receiver:e.data[0].email,subject:"Deleted Service",message:"<h3>Deleted Service</h3>\n                  <p>Your service has been deleted!</p>\n                  "})})):t.$q.dialog({title:"Error!",message:"Unable to delete service. You have entered wrong password"})})})})},changeCurrentPicture:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you want to replace the current photo?",cancel:{push:!0,color:"grey",flat:!0},persistent:!0}).onOk(function(){t.$refs["fileInput"].click()})},onFileSelected:function(){var t=o()(c.a.mark(function t(){var e,a=this;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$q.loading.show(),this.fileSelected=event.target.files[0],t.next=4,this.uploadImage(this.fileSelected);case 4:return e=t.sent,this.data.photos[this.currentIndexPicture]=e,this.currentPicture=this.data.photos[this.currentIndexPicture],t.next=9,this.$forceUpdate();case 9:this.$dbCon.service("services").patch(this.data._id,this.data).then(function(){a.$q.loading.hide(),a.$q.notify({message:"Successfully Updated!",position:"top-right",color:"primary",timeout:700,icon:"check"})});case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),uploadImage:function(){var t=o()(c.a.mark(function t(e){var a,r;return c.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append(this.$appLink,e,e.name),t.next=4,this.$axios.post(this.$appLink+"/uploadServices",a);case 4:return r=t.sent,t.abrupt("return",r.data);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;this.$dbCon.service("services").find({query:{_id:this.$route.query.service,store_id:this.$local.getItem("store_token")}}).then(function(e){0==e.data.length?t.$router.push("/StoreOwner/Inventory"):(t.data=e.data[0],t.currentPicture=t.data.photos[0])})}},g=m,b=Object(h["a"])(g,r,s,!1,null,null,null);e["default"]=b.exports}}]);