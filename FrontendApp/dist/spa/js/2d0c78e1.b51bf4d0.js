(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0c78e1"],{"50b2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md row"},[a("q-dialog",{attrs:{persistent:"",maximized:t.$q.screen.lt.md,"full-height":""},model:{value:t.adjuststock,callback:function(e){t.adjuststock=e},expression:"adjuststock"}},[a("q-card",{staticStyle:{width:"400px"}},[a("q-card-section",{staticClass:"row items-center text-grey-10"},[a("div",{staticClass:"text-h6"},[t._v("Adjust Stock")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",{staticClass:"q-gutter-sm"},[a("q-input",{attrs:{square:"",outlined:"",dense:"","stack-label":"",label:"Stock on Hand",min:"1",type:"number"},model:{value:t.number_of_stock,callback:function(e){t.number_of_stock=e},expression:"number_of_stock"}}),a("q-input",{attrs:{square:"",outlined:"",dense:"","stack-label":"",label:"Reason for Adjustment"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{ref:"btn_adjust_stock",staticClass:"q-ml-sm",attrs:{color:"primary",label:"Submit","no-caps":"",outline:""},on:{click:t.saveadjuststore,mouseover:function(e){t.$refs.btn_adjust_stock.unelevated=!0,t.$refs.btn_adjust_stock.outline=!1},mouseleave:function(e){t.$refs.btn_adjust_stock.outline=!0,t.$refs.btn_adjust_stock.unelevated=!1}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:"",maximized:t.$q.screen.lt.md,"full-height":""},model:{value:t.editproduct,callback:function(e){t.editproduct=e},expression:"editproduct"}},[a("q-card",{staticStyle:{width:"400px"}},[a("q-card-section",{staticClass:"row items-center text-grey-10"},[a("div",{staticClass:"text-h6"},[t._v("Edit Product")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",{staticClass:"row"},[a("div",{staticClass:"col-12 row"},[a("q-select",{staticClass:"col-12",attrs:{dense:"",square:"",outlined:"",options:t.category_options,label:"Category"},model:{value:t.data.category,callback:function(e){t.$set(t.data,"category",e)},expression:"data.category"}}),a("q-input",{staticClass:"col-12 q-pt-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Stock Keeping Unit(SKU)"}}),a("q-input",{ref:"inp_product_name",staticClass:"col-12 q-pt-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Product Name",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":"",counter:""},model:{value:t.data.product_name,callback:function(e){t.$set(t.data,"product_name",e)},expression:"data.product_name"}}),a("p",{staticClass:"text-caption text-grey"},[t._v("Description:")]),a("q-editor",{ref:"inp_description",staticClass:"col-12 q-pt-sm",attrs:{"min-height":"15rem"},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}}),a("q-input",{ref:"inp_regular_price",staticClass:"col-4 q-pt-sm q-pr-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Regular Price",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":""},on:{focus:t.toInputRegularPrice,blur:t.toChangeRegularPrice},model:{value:t.temp_regular_price,callback:function(e){t.temp_regular_price=e},expression:"temp_regular_price"}}),a("q-input",{staticClass:"col-4 q-pt-sm q-pr-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Sale Price",rules:[function(e){return parseFloat(t.data.regular_price)>parseFloat(t.data.sale_price)||"Invalid Sale Price"}],"lazy-rules":""},on:{focus:t.toInputSalePrice,blur:t.toChangeSalePrice},model:{value:t.temp_sale_price,callback:function(e){t.temp_sale_price=e},expression:"temp_sale_price"}}),a("q-input",{ref:"inp_stock",staticClass:"col-4 q-pt-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Stock On Hand",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":""},model:{value:t.data.stock,callback:function(e){t.$set(t.data,"stock",e)},expression:"data.stock"}})],1),a("div",{staticClass:"col-12 q-gutter-sm row"},[a("p",{staticClass:"text-title text-bold text-grey"},[t._v("Variant")]),a("q-select",{staticClass:"col-12 q-pt-sm",attrs:{label:"Size",square:"",outlined:"",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:t.data.size,callback:function(e){t.$set(t.data,"size",e)},expression:"data.size"}}),a("q-select",{staticClass:"col-12 q-pt-sm",attrs:{label:"Color",square:"",outlined:"",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:t.data.color,callback:function(e){t.$set(t.data,"color",e)},expression:"data.color"}}),a("q-select",{staticClass:"col-12 q-pt-sm",attrs:{label:"Material",square:"",outlined:"",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:t.data.material,callback:function(e){t.$set(t.data,"material",e)},expression:"data.material"}}),a("div",{staticClass:"row col-12"},[a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Gift Wrapping Services?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.gift_wrapping_services?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.gift_wrapping_services,callback:function(e){t.$set(t.data,"gift_wrapping_services",e)},expression:"data.gift_wrapping_services"}})],1)],1),a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Pick-up Item In Store?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.pickup_service?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.pickup_service,callback:function(e){t.$set(t.data,"pickup_service",e)},expression:"data.pickup_service"}})],1)],1)],1),a("div",{staticClass:"row"},[a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Cash in Delivery?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.cod?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.cod,callback:function(e){t.$set(t.data,"cod",e)},expression:"data.cod"}})],1)],1),a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Lay-away?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.lay_away?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.lay_away,callback:function(e){t.$set(t.data,"lay_away",e)},expression:"data.lay_away"}})],1)],1)],1),a("q-card",{staticClass:"col-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-6 text-title text-bold text-grey"},[t._v("\n                Enable Delivery Services?\n              ")]),a("q-btn-toggle",{staticClass:"col-6",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.delivery_services?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.delivery_services,callback:function(e){t.$set(t.data,"delivery_services",e)},expression:"data.delivery_services"}}),1==t.data.delivery_services?a("div",{staticClass:"col-12 text-grey"},[t._v("\n                Delivery Period (From "+t._s(t.data.delivery_period.min)+" days to\n                "+t._s(t.data.delivery_period.max)+" days):\n                "),a("q-range",{attrs:{color:"grey",label:"",markers:"",min:1,max:15},model:{value:t.data.delivery_period,callback:function(e){t.$set(t.data,"delivery_period",e)},expression:"data.delivery_period"}})],1):t._e()],1)],1)],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{ref:"btn_edit",staticClass:"q-ml-sm",attrs:{color:"primary",label:"Save","no-caps":"",outline:""},on:{click:t.save,mouseover:function(e){t.$refs.btn_edit.unelevated=!0,t.$refs.btn_edit.outline=!1},mouseleave:function(e){t.$refs.btn_edit.outline=!0,t.$refs.btn_edit.unelevated=!1}}})],1)],1)],1)],1)},r=[],o=(a("7f7f"),a("7514"),a("a34a")),i=a.n(o),l=(a("96cf"),a("c973")),c=a.n(l),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("q-btn",{staticClass:"col-11",attrs:{outline:"",color:"primary",size:"sm",dense:"",label:"Adjust Stock"},on:{click:function(e){t.opened=!0}}}),a("div",{staticClass:"col-1"}),a("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6 text-white"},[t._v("Adjust Stock")])]),a("q-separator"),a("q-card-section",{staticClass:"q-gutter-sm"},[a("q-input",{attrs:{square:"",outlined:"",dense:"","stack-label":"",label:"Stock on Hand",min:"1",type:"number"},model:{value:t.number_of_stock,callback:function(e){t.number_of_stock=e},expression:"number_of_stock"}}),a("q-input",{attrs:{square:"",outlined:"",dense:"","stack-label":"",label:"Reason for Adjustment"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"grey",label:"cancel",flat:""},on:{click:t.close}}),a("q-btn",{attrs:{color:"primary",label:"submit",flat:""},on:{click:t.save}})],1)],1)],1)],1)},d=[],u={data:function(){return{opened:!1,number_of_stock:this.$parent.data.stock,description:""}},methods:{openModal:function(){this.opened=!0},save:function(){var t=c()(i.a.mark(function t(){var e,a,s=this;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.number_of_stock>=this.$parent.data.stock,a=e?this.number_of_stock-this.$parent.data.stock:this.$parent.data.stock-this.number_of_stock,this.$parent.data.stock=this.number_of_stock,t.next=5,this.$parent.data.logs.push({event:this.description,date:new Date,amount:a,status:e?"+":"-"});case 5:this.$dbCon.service("products").patch(this.$parent.data._id,this.$parent.data).then(function(){s.$q.dialog({title:"Success!",message:"You successfully updated the inventory."}).onOk(function(){s.close()}),s.$dbCon.service("store").find({query:{_id:s.$local.getItem("store_token")}}).then(function(t){})});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),close:function(){this.opened=!1}}},p=u,m=a("2877"),v=Object(m["a"])(p,n,d,!1,null,null,null),h=v.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("q-btn",{staticClass:"col-11",attrs:{outline:"",color:"primary",size:"sm",dense:"",label:"Edit Product"},on:{click:function(e){t.opened=!0}}}),a("div",{staticClass:"col-1"}),a("q-dialog",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"1200px","max-width":"80vw"}},[a("q-card-section",{staticClass:"row bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v("Edit Product")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("br")]),a("div",{staticClass:"col-7 row"},[a("q-select",{staticClass:"col-6 q-pr-sm",attrs:{dense:"",square:"",outlined:"",options:t.category_options,label:"Category"},model:{value:t.data.category,callback:function(e){t.$set(t.data,"category",e)},expression:"data.category"}}),a("q-input",{staticClass:"col-6",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Stock Keeping Unit(SKU)"}}),a("q-input",{ref:"inp_product_name",staticClass:"col-12 q-pt-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Product Name",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":"",counter:""},model:{value:t.data.product_name,callback:function(e){t.$set(t.data,"product_name",e)},expression:"data.product_name"}}),a("p",{staticClass:"text-caption text-grey"},[t._v("Description:")]),a("q-editor",{ref:"inp_description",staticClass:"col-12 q-pt-sm",attrs:{"min-height":"15rem"},model:{value:t.data.description,callback:function(e){t.$set(t.data,"description",e)},expression:"data.description"}}),a("q-input",{ref:"inp_regular_price",staticClass:"col-4 q-pt-sm q-pr-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Regular Price",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":""},on:{focus:t.toInputRegularPrice,blur:t.toChangeRegularPrice},model:{value:t.temp_regular_price,callback:function(e){t.temp_regular_price=e},expression:"temp_regular_price"}}),a("q-input",{staticClass:"col-4 q-pt-sm q-pr-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Sale Price",rules:[function(e){return parseFloat(t.data.regular_price)>parseFloat(t.data.sale_price)||"Invalid Sale Price"}],"lazy-rules":""},on:{focus:t.toInputSalePrice,blur:t.toChangeSalePrice},model:{value:t.temp_sale_price,callback:function(e){t.temp_sale_price=e},expression:"temp_sale_price"}}),a("q-input",{ref:"inp_stock",staticClass:"col-4 q-pt-sm",attrs:{square:"",outlined:"",dense:"",stack:"",label:"Stock On Hand",rules:[function(t){return""!=t.trim()||"Required"}],"lazy-rules":""},model:{value:t.data.stock,callback:function(e){t.$set(t.data,"stock",e)},expression:"data.stock"}})],1),a("div",{staticClass:"col-5 q-pl-md q-gutter-sm row"},[a("q-card",{staticClass:"col-12",attrs:{flat:"",bordered:""}},[a("q-card-section",[a("p",{staticClass:"text-title text-bold text-grey"},[t._v("Variant")]),a("q-select",{staticClass:"col-12 q-pt-sm",attrs:{label:"Size",square:"",outlined:"",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:t.data.size,callback:function(e){t.$set(t.data,"size",e)},expression:"data.size"}}),a("q-select",{staticClass:"col-12 q-pt-sm",attrs:{label:"Color",square:"",outlined:"",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:t.data.color,callback:function(e){t.$set(t.data,"color",e)},expression:"data.color"}}),a("q-select",{staticClass:"col-12 q-pt-sm",attrs:{label:"Material",square:"",outlined:"",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique"},model:{value:t.data.material,callback:function(e){t.$set(t.data,"material",e)},expression:"data.material"}})],1)],1),a("div",{staticClass:"row col-12"},[a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Gift Wrapping Services?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.gift_wrapping_services?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.gift_wrapping_services,callback:function(e){t.$set(t.data,"gift_wrapping_services",e)},expression:"data.gift_wrapping_services"}})],1)],1),a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Pick-up Item In Store?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.pickup_service?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.pickup_service,callback:function(e){t.$set(t.data,"pickup_service",e)},expression:"data.pickup_service"}})],1)],1)],1),a("div",{staticClass:"row"},[a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Cash in Delivery?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.cod?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.cod,callback:function(e){t.$set(t.data,"cod",e)},expression:"data.cod"}})],1)],1),a("q-card",{staticClass:"col-md-6 col-sm-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-12 text-title text-bold text-grey"},[t._v("\n                  Enable Lay-away?\n                ")]),a("q-btn-toggle",{staticClass:"col-12",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.lay_away?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.lay_away,callback:function(e){t.$set(t.data,"lay_away",e)},expression:"data.lay_away"}})],1)],1)],1),a("q-card",{staticClass:"col-12",attrs:{flat:"",bordered:""}},[a("q-card-section",{staticClass:"row"},[a("p",{staticClass:"col-6 text-title text-bold text-grey"},[t._v("\n                Enable Delivery Services?\n              ")]),a("q-btn-toggle",{staticClass:"col-6",staticStyle:{border:"1px solid grey"},attrs:{spread:"",value:"one","no-caps":"",rounded:"",unelevated:"","toggle-color":t.data.delivery_services?"primary":"grey",color:"white","text-color":"grey",options:[{label:"Yes",value:!0},{label:"No",value:!1}]},model:{value:t.data.delivery_services,callback:function(e){t.$set(t.data,"delivery_services",e)},expression:"data.delivery_services"}}),1==t.data.delivery_services?a("div",{staticClass:"col-12 text-grey"},[t._v("\n                Delivery Period (From "+t._s(t.data.delivery_period.min)+" days to\n                "+t._s(t.data.delivery_period.max)+" days):\n                "),a("q-range",{attrs:{color:"grey",label:"",markers:"",min:1,max:15},model:{value:t.data.delivery_period,callback:function(e){t.$set(t.data,"delivery_period",e)},expression:"data.delivery_period"}})],1):t._e()],1)],1)],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{unelevated:"",label:"Save",color:"primary"},on:{click:t.save}})],1)],1)],1)],1)},g=[],b=(a("2fdb"),a("6762"),{data:function(){return{opened:!1,data:{},category_options:[],temp_regular_price:"",temp_sale_price:""}},methods:{openModal:function(){this.opened=!0},save:function(){var t=c()(i.a.mark(function t(){var e,a=this;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.validate();case 2:e=!t.sent,e&&(this.$parent.data=this.data,this.$dbCon.service("products").patch(this.data._id,this.data).then(function(){a.$q.dialog({title:"Success!",message:"You successfully added a product.",persistent:!0}).onOk(function(){a.opened=!1})}));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),validate:function(){var t=c()(i.a.mark(function t(){var e;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=[],t.next=3,this.$refs.inp_product_name.validate();case 3:return e[0]=t.sent,t.next=6,this.$refs.inp_regular_price.validate();case 6:return e[2]=t.sent,t.next=9,this.$refs.inp_stock.validate();case 9:return e[3]=t.sent,t.abrupt("return",e.includes(!1));case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toInputRegularPrice:function(){this.temp_regular_price=this.data.regular_price},toChangeRegularPrice:function(){this.data.regular_price=this.temp_regular_price,this.temp_regular_price=this.$prettyMoney(parseFloat(this.temp_regular_price))},toInputSalePrice:function(){this.temp_sale_price=this.data.sale_price},toChangeSalePrice:function(){this.data.sale_price=this.temp_sale_price,this.temp_sale_price=this.$prettyMoney(parseFloat(this.temp_sale_price))}},mounted:function(){var t=this;this.data=_.cloneDeep(this.$parent.data),this.temp_regular_price=this.$prettyMoney(parseFloat(this.data.regular_price)),this.temp_sale_price=this.$prettyMoney(parseFloat(this.data.sale_price)),this.$dbCon.service("categories").find({query:{classification:"Product"}}).then(function(e){e.data.map(function(e){t.category_options.push(e.category_name)})})}}),y=b,q=Object(m["a"])(y,f,g,!1,null,null,null),k=q.exports,x={props:["product_id"],components:{AdjustStock:h,EditProduct:k},data:function(){return{data:{},adjuststock:!1,number_of_stock:0,editproduct:!1,currentPicture:"",currentIndexPicture:0,fileSelected:{},temp_regular_price:"",temp_sale_price:""}},methods:{openadjuststock:function(){var t=c()(i.a.mark(function t(e){return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData(e);case 2:this.number_of_stock=this.data.stock,this.adjuststock=!0;case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),saveadjuststock:function(){var t=c()(i.a.mark(function t(){var e,a,s=this;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.number_of_stock>=this.data.stock,a=e?this.number_of_stock-this.data.stock:this.data.stock-this.number_of_stock,this.data.stock=this.number_of_stock,t.next=5,this.data.logs.push({event:this.description,date:new Date,amount:a,status:e?"+":"-"});case 5:this.$dbCon.service("products").patch(this.data._id,this.data).then(function(){s.$q.dialog({title:"Success!",message:"You successfully updated the inventory."}).onOk(function(){s.adjuststock=!1}),s.$dbCon.service("store").find({query:{_id:s.$local.getItem("store_token")}}).then(function(t){})});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openeditproduct:function(){var t=c()(i.a.mark(function t(e){return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getData(e);case 2:this.editproduct=!0;case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),deleteProduct:function(t){var e=this;this.getData(t),this.$q.dialog({title:"Confirmation",message:"Do you really want to delete this product?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){e.$q.dialog({title:"Confirmation",message:"Enter your password",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk(function(t){e.$dbCon.service("store").find({query:{_id:e.$local.getItem("store_token")}}).then(function(a){a.data[0].password==t?(e.data.deleted=!0,e.$dbCon.service("products").patch(e.data._id,e.data).then(function(){e.$dbCon.service("store").find({query:{_id:e.$local.getItem("store_token")}}).then(function(t){e.$axios.post(e.$appLink+"/customizableEmail",{receiver:t.data[0].email,subject:"Deleted Product",message:"<h3>Deleted Product</h3>\n                  <p>Your product has been deleted!</p>\n                  "})}),e.$q.dialog({title:"Success!",message:"You have successfully deleted a product."})})):e.$q.dialog({title:"Error!",message:"Unable to delete product. You have entered wrong password",cancel:{push:!0,color:"grey",flat:!0}})})})})},changeCurrentPicture:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you want to replace the current photo?",cancel:{push:!0,color:"grey",flat:!0},persistent:!0}).onOk(function(){t.$refs["fileInput"].click()})},onFileSelected:function(){var t=c()(i.a.mark(function t(){var e,a=this;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.$q.loading.show(),this.fileSelected=event.target.files[0],t.next=4,this.uploadImage(this.fileSelected);case 4:return e=t.sent,this.data.photos[this.currentIndexPicture]=e,this.currentPicture=this.data.photos[this.currentIndexPicture],t.next=9,this.$forceUpdate();case 9:this.$dbCon.service("products").patch(this.data._id,this.data).then(function(){a.$q.loading.hide(),a.$q.notify({message:"Successfully Updated!",position:"top-right",color:"primary",timeout:700,icon:"check"})});case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),uploadImage:function(){var t=c()(i.a.mark(function t(e){var a,s;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append(this.$appLink,e,e.name),t.next=4,this.$axios.post(this.$appLink+"/uploadProducts",a);case 4:return s=t.sent,t.abrupt("return",s.data);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getData:function(){var t=c()(i.a.mark(function t(e){var a=this;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("product id: ",e),t.next=3,this.$dbCon.service("products").find({query:{_id:e,store_id:this.$local.getItem("store_token")}}).then(function(t){0==t.data.length||(a.data=t.data[0],a.currentPicture=a.data.photos[0])});case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){}},C=x,w=Object(m["a"])(C,s,r,!1,null,null,null);e["default"]=w.exports}}]);