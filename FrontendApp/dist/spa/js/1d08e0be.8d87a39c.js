(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1d08e0be","2d0dd9df","2d0abe68"],{"16f3":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("q-breadcrumbs",{staticClass:"col-12 text-grey"},[i("q-breadcrumbs-el",{attrs:{label:"Maintenance",icon:"widgets"}}),i("q-breadcrumbs-el",{attrs:{label:"Gift Wrapping Services",icon:"card_giftcard"}})],1),i("br"),i("br"),i("div",{staticClass:"col-12"},[i("div",{staticClass:"text-h5"},[e._v("Charges")]),i("br"),i("q-list",{attrs:{bordered:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editCharge("small",e.data.giftwrapping.charges.small)}}},[i("q-item-section",[e._v("Small")]),i("q-item-section",{attrs:{avatar:""}},[e._v(e._s(""==e.data.giftwrapping.charges.small||"0"==e.data.giftwrapping.charges.small?"Free":e.$prettyMoney(e.data.giftwrapping.charges.small)))])],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editCharge("medium",e.data.giftwrapping.charges.medium)}}},[i("q-item-section",[e._v("Medium")]),i("q-item-section",{attrs:{avatar:""}},[e._v(e._s(""==e.data.giftwrapping.charges.medium||"0"==e.data.giftwrapping.charges.medium?"Free":e.$prettyMoney(e.data.giftwrapping.charges.medium)))])],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editCharge("large",e.data.giftwrapping.charges.large)}}},[i("q-item-section",[e._v("Large")]),i("q-item-section",{attrs:{avatar:""}},[e._v(e._s(""==e.data.giftwrapping.charges.large||"0"==e.data.giftwrapping.charges.large?"Free":e.$prettyMoney(e.data.giftwrapping.charges.large)))])],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editCharge("extra_large",e.data.giftwrapping.charges.extra_large)}}},[i("q-item-section",[e._v("Extra Large")]),i("q-item-section",{attrs:{avatar:""}},[e._v(e._s(""==e.data.giftwrapping.charges.extra_large||"0"==e.data.giftwrapping.charges.extra_large?"Free":e.$prettyMoney(e.data.giftwrapping.charges.extra_large)))])],1),i("q-separator")],1),i("br"),i("div",{staticClass:"text-h5"},[e._v("Colors")]),i("q-list",{attrs:{bordered:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editColor(0)}}},[i("q-item-section",[i("span",{staticStyle:{height:"25px",width:"25px","border-radius":"50%",display:"inline-block"},style:{"background-color":e.data.giftwrapping.colors[0]}})]),i("q-item-section",[e._v(e._s(e.data.giftwrapping.colors[0]))]),i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{icon:"colorize",flat:""}})],1)],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editColor(1)}}},[i("q-item-section",[i("span",{staticStyle:{height:"25px",width:"25px","border-radius":"50%",display:"inline-block"},style:{"background-color":e.data.giftwrapping.colors[1]}})]),i("q-item-section",[e._v(e._s(e.data.giftwrapping.colors[1]))]),i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{icon:"colorize",flat:""}})],1)],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editColor(2)}}},[i("q-item-section",[i("span",{staticStyle:{height:"25px",width:"25px","border-radius":"50%",display:"inline-block"},style:{"background-color":e.data.giftwrapping.colors[2]}})]),i("q-item-section",[e._v(e._s(e.data.giftwrapping.colors[2]))]),i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{icon:"colorize",flat:""}})],1)],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(t){return e.editColor(3)}}},[i("q-item-section",[i("span",{staticStyle:{height:"25px",width:"25px","border-radius":"50%",display:"inline-block"},style:{"background-color":e.data.giftwrapping.colors[3]}})]),i("q-item-section",[e._v(e._s(e.data.giftwrapping.colors[3]))]),i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{icon:"colorize",flat:""}})],1)],1),i("q-separator")],1)],1),i("q-dialog",{model:{value:e.color_picker,callback:function(t){e.color_picker=t},expression:"color_picker"}},[i("q-card",[i("q-card-section",[i("q-color",{attrs:{inline:"","no-header":"","default-view":"palette"},model:{value:e.current_val,callback:function(t){e.current_val=t},expression:"current_val"}})],1)],1)],1)],1)},a=[],s=(i("7514"),{data:function(){return{data:{},color_picker:!1,current_val:"",current_color:0}},methods:{editCharge:function(e,t){var i=this;this.$q.dialog({title:"Edit Gift Wrapping Charge",prompt:{model:t,type:"text"},cancel:!0}).onOk(function(t){i.$q.dialog({title:"Do you want to continue?",message:"Charges apply to all products.",cancel:!0}).onOk(function(){i.data.giftwrapping.charges[e]=t.trim(),i.$dbCon.service("store").update(i.data._id,i.data).then(function(){i.$q.notify({message:"Successfully Updated!",position:"top-right",color:"primary",timeout:700,icon:"check"})})})})},editColor:function(e){this.color_picker=!0,this.current_color=e}},mounted:function(){var e=this;this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.data=t.data[0]})},watch:{current_val:function(){var e=this;this.data.giftwrapping.colors[this.current_color]=this.current_val,this.$dbCon.service("store").update(this.data._id,this.data).then(function(){e.color_picker=!1}).then(function(){e.$q.notify({message:"Successfully Updated!",position:"top-right",color:"primary",timeout:700,icon:"check"})})}}}),n=s,c=i("2877"),o=Object(c["a"])(n,r,a,!1,null,null,null);t["default"]=o.exports},"6eaf":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"row"},[i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.step,expression:"step == 2"}],staticClass:"col-12 row"},[i("q-input",{ref:"inp_sku",staticClass:"col-md-12 col-xs-12 q-pt-sm",attrs:{dense:"",stack:"",label:"Stock Keeping Unit(SKU)",rules:[function(e){return""!=e.trim()||"Required"}]},model:{value:e.SKU,callback:function(t){e.SKU=t},expression:"SKU"}}),i("q-input",{ref:"inp_product_name",staticClass:"col-12 q-pt-sm",attrs:{dense:"",stack:"",label:"Product Name",maxlength:60,rules:[function(e){return""!=e.trim()||"Required"}],"lazy-rules":"",counter:""},model:{value:e.product_name,callback:function(t){e.product_name=t},expression:"product_name"}}),i("p",{staticClass:"text-title text-black"},[e._v("Description:")]),i("div",{staticClass:"col-12"},[i("q-editor",{ref:"inp_description",style:e.description_error?"border:solid red 1px":"",attrs:{"min-height":"4rem"},on:{input:function(){e.validateDescription()}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e.description_error?e._e():i("div",{attrs:{align:"right"}},[i("small",{staticClass:"text-grey"},[e._v(e._s(e.description_counter)+" / 1000 words")])]),e.description_error?i("small",{staticClass:"text-red"},[e._v(e._s(e.description_error_message))]):e._e()],1),i("q-input",{ref:"inp_regular_price",staticClass:"col-4 q-pt-sm q-pr-sm",attrs:{dense:"",stack:"",label:"Regular Price",maxlength:14,rules:[function(t){return e.temp_regular_price>0||"Invalid Regular Price"},function(e){return""!=e.trim()||"Required"}],"lazy-rules":""},on:{focus:e.toInputRegularPrice,blur:e.toChangeRegularPrice},model:{value:e.regular_price,callback:function(t){e.regular_price=t},expression:"regular_price"}}),i("q-input",{staticClass:"col-4 q-pt-sm q-pr-sm",attrs:{dense:"",stack:"",label:"Sale Price","error-message":"Invalid Sale Price",error:e.sale_price_error,rules:[]},on:{focus:e.toInputSalePrice,blur:e.toChangeSalePrice},model:{value:e.sale_price,callback:function(t){e.sale_price=t},expression:"sale_price"}}),i("q-input",{ref:"inp_stock",staticClass:"col-4 q-pt-sm",attrs:{dense:"",stack:"",mask:"################",label:"Stock On Hand",rules:[function(e){return""!=e.trim()||"Required"}],"lazy-rules":""},model:{value:e.stock,callback:function(t){e.stock=t},expression:"stock"}}),e._m(0),i("q-select",{ref:"inp_size",staticClass:"col-12",attrs:{label:"Size",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"100","new-value-mode":"add-unique",rules:[function(t){return 0!=e.size.length||"Required"}],"lazy-rules":""},on:{"new-value":e.variantInput},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),i("q-select",{ref:"inp_color",staticClass:"col-12 q-pt-xs",attrs:{label:"Color",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",rules:[function(t){return 0!=e.size.length||"Required"}],"lazy-rules":""},on:{"new-value":e.variantInput},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}}),i("q-select",{ref:"inp_material",staticClass:"col-12 q-pt-xs",attrs:{label:"Material",dense:"",stack:"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",rules:[function(t){return 0!=e.size.length||"Required"}],"lazy-rules":""},on:{"new-value":e.variantInput},model:{value:e.material,callback:function(t){e.material=t},expression:"material"}})],1),i("input",{ref:"fileInput0",staticClass:"col-12 hidden",attrs:{type:"file",multiple:""},on:{change:e.onImageSelected0}}),i("input",{ref:"fileInput1",staticClass:"col-12 hidden",attrs:{type:"file"},on:{change:e.onImageSelected1}}),i("input",{ref:"fileInput2",staticClass:"col-12 hidden",attrs:{type:"file"},on:{change:e.onImageSelected2}}),i("input",{ref:"fileInput3",staticClass:"col-12 hidden",attrs:{type:"file"},on:{change:e.onImageSelected3}}),i("br"),i("div",{directives:[{name:"show",rawName:"v-show",value:3==e.step,expression:"step == 3"}],staticClass:"row flex q-gutter-md justify-center",attrs:{align:"center"}},e._l([0,1,2,3],function(t){return i("q-card",{key:t,staticStyle:{"min-width":"154px","max-width":"154px","min-height":"152px","max-height":"152px",cursor:"pointer",overflow:"hidden"},style:e.validation[3+t]?"":"border-color:red",attrs:{flat:"",bordered:""},on:{mouseover:function(i){e.currentPic=t},mouseleave:function(t){e.currentPic=-1}}},[0==e.fileSelected[t].length?i("q-card-section",[i("br"),i("br"),i("q-btn",{attrs:{icon:"add",color:"primary",round:"",unelevated:""},on:{click:function(i){e.currentPic=-1,e.$refs["fileInput"+t].click()}}})],1):e._e(),e.currentPic==t?i("q-card-section",[i("br"),i("br"),i("q-btn",{attrs:{icon:"edit",color:"primary",round:"",unelevated:""},on:{click:function(i){e.currentPic=-1,e.$refs["fileInput"+t].click()}}}),e._v("Â \n        "),i("q-btn",{attrs:{icon:"delete",color:"red",round:"",unelevated:""},on:{click:function(i){e.currentPic=-1,e.fileSelected[t]=[]}}})],1):e._e(),e.currentPic!=t?i("img",{directives:[{name:"show",rawName:"v-show",value:0!=e.fileSelected[t].length,expression:"fileSelected[i].length != 0"}],attrs:{src:e.photoUrl[t],width:"100%",height:"100%"}}):e._e()],1)}),1),i("div",{directives:[{name:"show",rawName:"v-show",value:4==e.step,expression:"step == 4"}],staticClass:"col-12"},[i("div",{staticClass:"col-12 text-title text-black text-bold"},[e._v("Payment Method")]),i("div",{staticClass:"col-12 q-pt-sm row items-center"},[i("div",{staticClass:"col-11 text-title text-grey"},[e._v("\n        Online Debit/Credit Card (default)\n      ")]),i("q-radio",{staticClass:"col-1",attrs:{active:!0,readonly:""}})],1),i("div",{staticClass:"col-12 q-pt-sm row items-center"},[i("div",{staticClass:"col-11 text-title text-grey"},[e._v("\n        Bank Deposit/Wire Transfer (default)\n      ")]),i("q-radio",{staticClass:"col-1",attrs:{active:!0,readonly:""}})],1),i("div",{staticClass:"col-12 q-pt-sm text-title text-black text-bold"},[e._v("\n      Other Flexible Options for Your Clients\n    ")]),i("div",{staticClass:"col-12 row items-center"},[i("div",{staticClass:"col-11 text-title text-grey-8"},[e._v("\n        Enable Cash on Delivery?\n      ")]),i("q-checkbox",{staticClass:"col-1",model:{value:e.cod,callback:function(t){e.cod=t},expression:"cod"}})],1),i("div",{staticClass:"col-12 row items-center"},[i("div",{staticClass:"col-11 text-title text-grey-8"},[e._v("\n        Enable Layaway?\n        "),i("q-btn",{attrs:{color:"grey",size:"sm",round:"",flat:"",icon:"help"}},[i("q-popup-proxy",[i("q-banner",[i("div",{staticClass:"text-bold"},[e._v("What is Layaway?")]),e._v("\n              a system of paying a deposit to secure an item for later\n              purchase.\n            ")])],1)],1)],1),i("q-checkbox",{staticClass:"col-1",model:{value:e.lay_away,callback:function(t){e.lay_away=t},expression:"lay_away"}})],1),i("div",{staticClass:"col-12 text-title text-black text-bold"},[e._v("Others")]),i("div",{staticClass:"col-12 row items-center"},[i("div",{staticClass:"col-11 text-title text-grey-8"},[e._v("\n        Enable Gift Wrapping Services?\n      ")]),i("q-checkbox",{staticClass:"col-1",model:{value:e.gift_wrapping_services,callback:function(t){e.gift_wrapping_services=t},expression:"gift_wrapping_services"}}),e.gift_wrapping_services?i("q-select",{staticClass:"col-12 q-pa-sm",attrs:{dense:"",options:["Small","Medium","Large","Extra Large"],label:"Size Classification"},model:{value:e.size_classification,callback:function(t){e.size_classification=t},expression:"size_classification"}}):e._e(),e.gift_wrapping_services?i("q-btn",{attrs:{flat:"",color:"grey-8",icon:"edit","no-caps":"",label:"Edit giftwrapping charges",size:"md"},on:{click:function(t){e.opened=!0,e.toEdit="giftwrapping_charges"}}}):e._e()],1),i("div",{staticClass:"col-12 row items-center"},[i("div",{staticClass:"col-11 text-title text-grey-8"},[e._v("\n        Enable Pick-up Item In Store?\n      ")]),i("q-checkbox",{staticClass:"col-1",model:{value:e.pickup_service,callback:function(t){e.pickup_service=t},expression:"pickup_service"}}),e.pickup_service?i("q-btn",{attrs:{flat:"",color:"grey-8",icon:"edit","no-caps":"",label:"Edit store address",size:"md"},on:{click:function(t){e.opened_address=!0}}}):e._e()],1),i("div",{staticClass:"col-12 row items-center"},[i("div",{staticClass:"col-11 text-title text-grey-8"},[e._v("\n        Enable Delivery Services?\n      ")]),i("q-checkbox",{staticClass:"col-1",model:{value:e.delivery_services,callback:function(t){e.delivery_services=t},expression:"delivery_services"}}),e.delivery_services?i("q-btn",{attrs:{flat:"",color:"grey-8",icon:"edit","no-caps":"",label:"Edit delivery charges",size:"md"},on:{click:function(t){e.opened=!0,e.toEdit="delivery_charges"}}}):e._e()],1),1==e.delivery_services?i("div",{staticClass:"col-12 row items-center text-grey-8"},[e._v("\n      This item could be delivered within how many days from the date of\n      purchase?\n      "),i("q-input",{staticClass:"q-ma-sm",staticStyle:{width:"100px"},attrs:{type:"number",max:"100",dense:"",label:"Days"},model:{value:e.delivery_period.max,callback:function(t){e.$set(e.delivery_period,"max",t)},expression:"delivery_period.max"}})],1):e._e()]),i("q-dialog",{staticClass:"column",attrs:{"full-height":"","full-width":"",maximized:e.$q.screen.lt.md},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[i("q-card",{staticClass:"col-12",staticStyle:{width:"800px","max-width":"80vw"}},[i("q-bar",[i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){e.opened=!1,e.toEdit=""}}},[i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),i("q-card-section",{staticClass:"column"},["giftwrapping_charges"==e.toEdit?i("GiftWrappingServices"):e._e(),"delivery_charges"==e.toEdit?i("Delivery"):e._e()],1)],1)],1),i("q-dialog",{staticClass:"column",attrs:{maximized:e.$q.screen.lt.md},model:{value:e.opened_address,callback:function(t){e.opened_address=t},expression:"opened_address"}},[i("q-card",{staticClass:"col-12",staticStyle:{width:"400px","max-width":"80vw"}},[i("q-bar",[i("q-space"),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){e.opened_address=!1,e.toEdit=""}}},[i("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),i("q-card-section",[i("q-form",{staticClass:"row",on:{submit:e.saveEditAddress}},[i("p",{staticClass:"text-body1 text-grey col-12"},[e._v("Address")]),i("q-separator",{staticClass:"col-12"}),i("q-input",{staticClass:"q-pa-md col-12",attrs:{label:"House/ Building No./ Street",rules:[function(e){return""!=e.trim()||"This Field is required"}],"lazy-rules":"",outlined:"",square:"",dense:""},model:{value:e.store.house_bldg_st,callback:function(t){e.$set(e.store,"house_bldg_st",t)},expression:"store.house_bldg_st"}}),i("q-input",{staticClass:"q-pa-md col-12",attrs:{label:"Barangay/ District",rules:[function(e){return""!=e.trim()||"This Field is required"}],"lazy-rules":"",outlined:"",square:"",dense:""},model:{value:e.store.barangay_district,callback:function(t){e.$set(e.store,"barangay_district",t)},expression:"store.barangay_district"}}),i("q-input",{staticClass:"q-pa-md col-12",attrs:{label:"City/Municipality",rules:[function(e){return""!=e.trim()||"This Field is required"}],"lazy-rules":"",outlined:"",square:"",dense:""},model:{value:e.store.city_municipality,callback:function(t){e.$set(e.store,"city_municipality",t)},expression:"store.city_municipality"}}),i("q-select",{staticClass:"q-pa-md col-12",attrs:{label:"State/Province",options:e.state_province_options,rules:[function(e){return""!=e.trim()||"This Field is required"}],"lazy-rules":"","input-debounce":"0","use-input":"","fill-input":"",outlined:"",square:"",dense:""},on:{filter:e.filterStateProvince},model:{value:e.store.state_province,callback:function(t){e.$set(e.store,"state_province",t)},expression:"store.state_province"}}),i("q-input",{staticClass:"q-pa-md col-12",attrs:{label:"Zip Code",rules:[function(e){return""!=e.trim()||"This Field is required"}],"lazy-rules":"",outlined:"",square:"",dense:""},model:{value:e.store.zip_code,callback:function(t){e.$set(e.store,"zip_code",t)},expression:"store.zip_code"}}),i("q-select",{staticClass:"q-pa-md col-12",attrs:{label:"Country",value:"Philippines",rules:[function(e){return""!=e.trim()||"This Field is required"}],"lazy-rules":"",outlined:"",square:"",dense:"",readonly:""}}),i("div",{staticClass:"col-12",attrs:{align:"right"}},[i("q-btn",{ref:"btn_save_next",attrs:{label:"Save",color:"primary",type:"submit","no-caps":"",outline:""},on:{mouseover:function(t){e.$refs.btn_save_next.unelevated=!0,e.$refs.btn_save_next.outline=!1},mouseleave:function(t){e.$refs.btn_save_next.outline=!0,e.$refs.btn_save_next.unelevated=!1}}})],1)],1)],1)],1)],1)],1)},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",{staticClass:"text-title text-black col-12"},[i("span",{},[e._v("Variant")]),e._v(" (press enter/return key after typing a\n      variant i.e. small, red, linen)\n    ")])}],s=(i("7f7f"),i("6762"),i("2fdb"),i("a34a")),n=i.n(s),c=(i("7514"),i("96cf"),i("c973")),o=i.n(c),l=(i("5df3"),i("1c4c"),i("16f3")),d=i("81c3"),u={props:["step","category"],components:{GiftWrappingServices:l["default"],Delivery:d["default"]},data:function(){return{currentPic:-1,category:"",category_options:[],SKU:"",product_name:"",description:"",regular_price:"",temp_regular_price:"",sale_price:null,temp_sale_price:null,stock:"",size:[],color:[],material:[],gift_wrapping_services:!0,pickup_service:!0,delivery_services:!0,cod:!0,lay_away:!0,delivery_period:{min:1,max:15},size_classification:"",fileSelected:[[],[],[],[]],photoUrl:["","","",""],validation:[],toEdit:"",opened:!1,opened_address:!1,store:{},state_province_options:this.$provinceList,sale_price_error:!1,description_error:!1,description_error_message:"",description_counter:0}},methods:{variantInput:function(e,t){t(e[0].toUpperCase()+e.substring(1,e.length))},onImageSelected0:function(e){var t=this;Array.from(e.target.files).map(function(i,r){t.photoUrl[r]=URL.createObjectURL(e.target.files[r]),t.$forceUpdate(),t.fileSelected[r]=e.target.files[r],t.$forceUpdate()})},onImageSelected1:function(e){this.photoUrl[1]=URL.createObjectURL(e.target.files[0]),this.$forceUpdate(),this.fileSelected[1]=e.target.files[0],this.$forceUpdate()},onImageSelected2:function(e){this.photoUrl[2]=URL.createObjectURL(e.target.files[0]),this.$forceUpdate(),this.fileSelected[2]=e.target.files[0],this.$forceUpdate()},onImageSelected3:function(e){this.photoUrl[3]=URL.createObjectURL(e.target.files[0]),this.$forceUpdate(),this.fileSelected[3]=e.target.files[0],this.$forceUpdate()},save:function(){var e=o()(n.a.mark(function e(){var t,i,r=this;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],this.$q.loading.show(),e.next=4,this.uploadImage(this.fileSelected[0]);case 4:return t[0]=e.sent,e.next=7,this.uploadImage(this.fileSelected[1]);case 7:return t[1]=e.sent,e.next=10,this.uploadImage(this.fileSelected[2]);case 10:return t[2]=e.sent,e.next=13,this.uploadImage(this.fileSelected[3]);case 13:return t[3]=e.sent,console.log(t),e.next=17,this.$dbCon.service("product-subscriptions").find({query:{store_id:this.$local.getItem("store_token"),$or:[{date_end:{$gte:new Date},status:"Paid"},{status:"Free"}],$sort:{date_ordered:-1}}}).then(function(e){return 0==e.data.length?"":"Free"==e.data[0].status?"":"Paid"==e.data[0].status?e.data[0].date_end:void 0});case 17:i=e.sent,this.$dbCon.service("products").create({store_id:this.$local.getItem("store_token"),category:this.category,SKU:this.SKU,product_name:this.product_name,description:this.description,regular_price:this.temp_regular_price,sale_price:this.temp_sale_price,stock:this.stock,size:this.size,color:this.color,material:this.material,gift_wrapping_services:this.gift_wrapping_services,size_classification:this.size_classification,pickup_service:this.pickup_service,cod:this.cod,lay_away:this.lay_away,delivery_services:this.delivery_services,delivery_period:this.delivery_period,deleted:!1,photos:t,expiry:i,logs:[{event:"added",date:new Date,amount:this.stock,status:"+"}],createdAt:new Date}).then(function(){r.$q.loading.hide(),r.opened=!1,r.$q.dialog({title:"Success!",message:"You successfully added a product."})}).catch(function(e){console.log("ERROR",e)}),this.$EventBus.$emit("update-step",6);case 20:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),validate:function(){var e=o()(n.a.mark(function e(){return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.validation=[],2!=this.step){e.next=27;break}return e.next=4,this.$refs.inp_product_name.validate();case 4:return this.validation[0]=e.sent,e.next=7,this.$refs.inp_regular_price.validate();case 7:return this.validation[1]=e.sent,e.next=10,this.$refs.inp_stock.validate();case 10:return this.validation[2]=e.sent,e.next=13,this.$refs.inp_sku.validate();case 13:return this.validation[3]=e.sent,e.next=16,this.$refs.inp_size.validate();case 16:return this.validation[4]=e.sent,e.next=19,this.$refs.inp_color.validate();case 19:return this.validation[5]=e.sent,e.next=22,this.$refs.inp_material.validate();case 22:return this.validation[6]=e.sent,this.validateDescription(),this.description_error&&(this.validation[3]=!1),parseFloat(this.temp_regular_price)<=parseFloat(this.temp_sale_price)?(this.sale_price_error=!0,this.validation[8]=!1):parseFloat(this.temp_sale_price)<1?(this.sale_price_error=!0,this.validation[8]=!1):this.sale_price_error=!1,e.abrupt("return",this.validation.includes(!1));case 27:if(3!=this.step){e.next=33;break}return this.validation[3]=0!=this.fileSelected[0].length,this.validation[4]=0!=this.fileSelected[1].length,this.validation[5]=0!=this.fileSelected[2].length,this.validation[6]=0!=this.fileSelected[3].length,e.abrupt("return",this.validation.includes(!1));case 33:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),uploadImage:function(){var e=o()(n.a.mark(function e(t){var i,r;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,i.append(this.$appLink,t,t.name),e.next=4,this.$axios.post(this.$appLink+"/uploadProducts",i);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),toInputRegularPrice:function(){this.regular_price=this.temp_regular_price},toChangeRegularPrice:function(){this.temp_regular_price=this.regular_price,this.regular_price=this.$prettyMoney(this.regular_price)},toInputSalePrice:function(){this.sale_price=this.temp_sale_price},toChangeSalePrice:function(){this.temp_sale_price=this.sale_price,this.sale_price=this.$prettyMoney(this.sale_price)},getData:function(){var e=o()(n.a.mark(function e(){var t=this;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(e){t.store=e.data[0]});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),filterStateProvince:function(e,t,i){var r=this;t(function(){var t=e.toLowerCase();r.state_province_options=r.$provinceList.filter(function(e){return e.toLowerCase().indexOf(t)>-1})})},saveEditAddress:function(){var e=this;this.$dbCon.service("store").patch(this.store._id,this.store).then(function(){e.$q.dialog({title:"Successfully Saved!",message:"Your Store Address has been successfully saved."}),e.opened_address=!1})},validateDescription:function(){if(""==this.$sanitize(this.description).trim())return this.description_error=!0,void(this.description_error_message="This field is required.");this.description_error=!1,this.description_counter=this.$wordsCount(this.$sanitize(this.description).trim()),this.description_counter>1e3?(this.description_error=!0,this.description_error_message="Maximum of 1000 words only."):this.description_error=!1}},watch:{step:function(){5==this.step&&this.save()}},mounted:function(){var e=this;this.$dbCon.service("store").onDataChange(function(){e.getData()})}},p=u,f=i("2877"),h=Object(f["a"])(p,r,a,!1,null,null,null);t["a"]=h.exports},"81c3":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("q-breadcrumbs",{staticClass:"col-12 text-grey"},[i("q-breadcrumbs-el",{attrs:{label:"Maintenance",icon:"widgets"}}),i("q-breadcrumbs-el",{attrs:{label:"Delivery",icon:"motorcycle"}})],1),i("br"),i("q-table",{attrs:{pagination:e.myPagination,flat:"",bordered:"",data:e.data.fuel_delivery,columns:e.columns,filter:e.filter,"row-key":"name"},on:{"update:pagination":function(t){e.myPagination=t}},scopedSlots:e._u([{key:"top-right",fn:function(){return[i("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return e.store.market_areas.includes(t.row.location)?i("q-tr",{attrs:{props:t}},[i("q-td",{key:"province",attrs:{props:t}},[e._v(e._s(t.row.location))]),i("q-td",{key:"delivery",attrs:{props:t}},[e._v(e._s(""!=t.row.delivery&&0!=t.row.delivery?e.$prettyMoney(t.row.delivery):"FREE"))]),i("q-td",{key:"edit",attrs:{props:t}},[i("q-btn",{attrs:{icon:"edit",flat:"",dense:""},on:{click:function(i){return e.editFee(t.row.__index,t.row.delivery)}}})],1)],1):e._e()}}],null,!0)}),i("q-dialog",{attrs:{persistent:""},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[e._v("Edit delivery charge")])]),i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{ref:"inp_fee",attrs:{dense:""},on:{focus:e.toInputFee,blur:e.toChangeFee},model:{value:e.current_formatted_fee,callback:function(t){e.current_formatted_fee=t},expression:"current_formatted_fee"}})],1),i("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.opened=!1}}}),i("q-btn",{attrs:{flat:"",label:"Submit"},on:{click:e.save}})],1)],1)],1)],1)},a=[],s=(i("7514"),i("a34a")),n=i.n(s),c=(i("96cf"),i("c973")),o=i.n(c),l={data:function(){return{opened:!1,myPagination:{rowsPerPage:10},data:{},store:{},current_row:0,current_fee:0,current_formatted_fee:0,filter:"",columns:[{name:"province",label:"Province",field:"location",align:"center",style:"width:20%"},{name:"delivery",label:"Delivery Fee",field:"delivery",align:"center"},{name:"edit",label:"Edit",align:"center",style:"width:200px"}]}},methods:{editFee:function(e,t){this.current_delivery=e,this.current_fee=this.data.fuel_delivery[this.current_delivery].delivery,this.current_formatted_fee=this.$prettyMoney(this.current_fee),this.opened=!0},toInputFee:function(){this.current_formatted_fee=this.current_fee},toChangeFee:function(){isNaN(this.current_formatted_fee)&&(this.current_formatted_fee=this.current_fee=this.data.fuel_delivery[this.current_delivery].delivery),this.current_fee=this.current_formatted_fee,this.current_formatted_fee=this.$prettyMoney(this.current_formatted_fee)},save:function(){var e=o()(n.a.mark(function e(t){var i=this;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.inp_fee.blur();case 2:this.data.fuel_delivery[this.current_delivery].delivery=this.current_fee,this.$q.dialog({title:"Do you want to continue?",message:"Charges apply to all products.",cancel:!0}).onOk(function(){i.$dbCon.service("store-fuel-delivery").update(i.data._id,i.data).then(function(){i.opened=!1,i.$q.notify({message:"Successfully Updated!",position:"top-right",color:"primary",timeout:700,icon:"check"})})});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=o()(n.a.mark(function e(){var t=this;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(e){t.store=e.data[0]});case 2:return e.next=4,this.$dbCon.service("store-fuel-delivery").find({query:{store_id:this.$local.getItem("store_token")}}).then(function(e){t.data=e.data[0]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},d=l,u=i("2877"),p=Object(u["a"])(d,r,a,!1,null,null,null);t["default"]=p.exports}}]);