(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0c9347"],{"57c2":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"q-pa-md row"},[e("q-breadcrumbs",{staticClass:"col-12 text-grey"},[e("q-breadcrumbs-el",{attrs:{label:"Maintenance",icon:"widgets"}}),e("q-breadcrumbs-el",{attrs:{label:"Booking System",icon:"library_books"}})],1),e("br"),e("br"),e("br"),e("div",{staticClass:"col-12'"},[e("q-card",{attrs:{flat:""}},[e("q-card-section",{staticClass:"row q-gutter-md"},[e("q-date",{class:t.$q.screen.lt.sm?"col-11":"col-7",attrs:{landscape:"",minimal:""},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}}),""!=t.date?e("div",{staticClass:"q-gutter-md",class:t.$q.screen.lt.sm?"col-11":"col-4"},[e("div",{staticClass:"text-title"},[t._v("Set date as..")]),t.btn_fully_booked?e("q-btn",{staticClass:"full-width",attrs:{color:"primary",unelevated:"",size:"sm",label:"FULLY BOOKED"},on:{click:t.setAsFullyBooked}}):t._e(),t.btn_not_available?e("q-btn",{staticClass:"full-width",attrs:{color:"primary",unelevated:"",size:"sm",label:"NOT AVAILABLE"},on:{click:t.setAsNotAvailable}}):t._e(),t.btn_available?e("q-btn",{staticClass:"full-width",attrs:{unelevated:"",size:"sm",color:"primary",label:"AVAILABLE"},on:{click:function(a){return t.makeAvailable()}}}):t._e(),t.btn_available?e("q-btn",{staticClass:"full-width",attrs:{unelevated:"",size:"sm",color:"primary",label:"Edit"},on:{click:function(a){return t.editNotAvailable()}}}):t._e()],1):t._e()],1),e("q-card-section",[e("q-markup-table",{attrs:{flat:""}},[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Date")]),e("th",{staticClass:"text-center"},[t._v("Status")]),e("th",{staticClass:"text-center"},[t._v("Remarks")])])]),e("tbody",[0==t.data.schedules.length?e("tr",[e("td",{staticClass:"text-grey",attrs:{colspan:"3",align:"center"}},[t._v("no records found")])]):t._e(),t._l(t.data.schedules,function(a,s){return e("tr",{key:s,on:{click:function(e){t.date=t.$formatDateForPicker(a.date)}}},[e("td",{staticClass:"text-left"},[t._v(t._s(t.$formatDate_DateOnly(a.date)))]),0==a.status?e("td",{staticClass:"text-center"},[t._v("Fully Booked")]):1==a.status?e("td",{staticClass:"text-center"},[t._v("Not Available")]):t._e(),e("td",{staticClass:"text-center"},[t._v(t._s(a.remarks?a.remarks:""))])])})],2)])],1)],1)],1)],1)},i=[],l=(e("7514"),e("ac6a"),e("a34a")),n=e.n(l),r=(e("96cf"),e("c973")),c=e.n(r),o={data:function(){return{date:"",data:[],btn_fully_booked:!1,btn_not_available:!1,btn_available:!1}},methods:{setAsFullyBooked:function(){var t=c()(n.a.mark(function t(){var a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$q.dialog({title:"Remarks",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(function(t){a.data.schedules.push({date:a.$formatDateFromPickerToDatabase(a.date),status:0,remarks:t}),a.date="",a.$dbCon.service("store-schedule").update(a.data._id,a.data)});case 1:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),setAsNotAvailable:function(){var t=c()(n.a.mark(function t(){var a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$q.dialog({title:"Remarks",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(function(t){a.data.schedules.push({date:a.$formatDateFromPickerToDatabase(a.date),status:1,remarks:t}),a.date="",a.$dbCon.service("store-schedule").update(a.data._id,a.data)});case 1:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),makeAvailable:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Are you sure you want to make this date available?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.data.schedules.forEach(function(t,a){this.$formatDateFromPickerToDatabase(this.date)==t.date&&(this.data.schedules.splice(a,1),this.$dbCon.service("store-schedule").update(this.data._id,this.data),this.date="")},t)})},changeDate:function(){var t=!1;this.data.schedules.forEach(function(a){this.$formatDateFromPickerToDatabase(this.date)==a.date&&(t=!0)},this),t?(this.btn_fully_booked=!1,this.btn_not_available=!1,this.btn_available=!0):(this.btn_fully_booked=!0,this.btn_not_available=!0,this.btn_available=!1)},editNotAvailable:function(){this.data.schedules.forEach(function(t,a){var e=this;this.$formatDateFromPickerToDatabase(this.date)==t.date&&this.$q.dialog({title:"Remarks",prompt:{model:this.data.schedules[a].remarks,type:"text"},cancel:!0,persistent:!0}).onOk(function(t){e.data.schedules[a].remarks=t,e.$dbCon.service("store-schedule").update(e.data._id,e.data),e.date=""})},this)}},watch:{date:function(){this.changeDate()}},mounted:function(){var t=this;this.$dbCon.service("store-schedule").find({query:{store_id:this.$local.getItem("store_token")}}).then(function(a){t.data=a.data[0]})}},d=o,u=e("2877"),h=Object(u["a"])(d,s,i,!1,null,null,null);a["default"]=h.exports}}]);