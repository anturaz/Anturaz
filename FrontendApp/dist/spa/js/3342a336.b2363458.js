(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3342a336"],{"2b67":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"100px",square:""}},[a("img",{attrs:{ratio:1,src:e.product.photos[0]}})])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-title",attrs:{lines:"1"}},[e._v(e._s(e.product.service_name))]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[e._v("Category:")]),e._v("\n        "+e._s(e.product.category)+"\n      ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[e._v("Date Needed:")]),e._v("\n        "+e._s(e.$formatDate_DateOnly(e.order.date_needed))+"\n      ")]),void 0!=e.order.mode_of_delivery?a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[e._v("Mode of Delivery:")]),e._v("\n        "+e._s(e.order.mode_of_delivery)+"\n      ")]):e._e()],1),a("q-item-section",{attrs:{side:"",top:""}},[void 0!=e.order.order_number?a("span",{staticClass:"text-primary text-title text-bold"},[e._v("RESERVATION# "+e._s(e.order.order_number)+" ")]):e._e(),a("div",[a("span",{staticClass:"text-primary text-title text-bold"},[e._v(e._s(e.$prettyMoney(e.payment.total))+" ")])]),a("div",[e._v("Qty "+e._s(e.order.quantity))]),a("q-space"),a("div",[e.buttonVisible?a("q-btn",{attrs:{label:e.buttonLabel,color:"primary",unelevated:""},on:{click:e.updateFunction}}):e._e()],1)],1)],1)],1)},n=[],s=(a("7514"),{props:{order:Object,updateFunction:Function,buttonLabel:String,buttonVisible:Boolean},data:function(){return{product:{},shopper:{},payment:{}}},mounted:function(){var e=this;this.$dbCon.service("services").get(this.order.item_id).then(function(t){e.product=t}),this.$dbCon.service("users").get(this.order.shopper_id).then(function(t){e.shopper=t}),this.$dbCon.service("shopper-payments").find({query:{related_id:this.order._id}}).then(function(t){console.log(t),e.payment=t.data[0]})}}),o=s,i=a("2877"),l=Object(i["a"])(o,r,n,!1,null,null,null);t["a"]=l.exports},"6cdf":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-btn",{staticClass:"q-pb-md",attrs:{icon:"history",label:"view payment schedules",flat:"",color:"black",size:"md"},on:{click:function(t){e.opened=!0}}}),a("q-dialog",{model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"text-h6 text-white bg-primary"},[a("div",[e._v("Payment Schedules")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"70vh"}},[a("q-list",{attrs:{bordered:"",separator:""}},e._l(e.schedules,function(t){return a("q-item",{key:t},[a("q-item-section",[a("q-item-label",{staticClass:"text-bold"},[e._v("Schedule: "+e._s(e.$formatDate_DateOnly(t.schedule)))]),a("q-item-label",{attrs:{caption:""}},[e._v("Amount: "+e._s(e.$prettyMoney(t.amount)))]),a("q-item-label",{attrs:{caption:""}},[e._v("Status: "),a("span",{class:"Pending"==t.status?"text-grey":"text-green"},[e._v(e._s("Pending"==t.status?"Pending":"Paid"))])])],1)],1)}),1)],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Close",color:"grey"},on:{click:function(t){e.opened=!1}}})],1)],1)],1)],1)},n=[],s={props:{schedules:Object},data:function(){return{opened:!1}}},o=s,i=a("2877"),l=Object(i["a"])(o,r,n,!1,null,null,null);t["a"]=l.exports},8961:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("q-btn",{attrs:{color:"primary",label:"Upload Bank Receipt"},on:{click:function(t){e.opened=!0}}}),a("q-dialog",{model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6 text-white"},[e._v("Upload Deposit Slip")])]),a("q-separator"),a("q-card-section",[a("input",{ref:"fileupload",staticClass:"hidden",attrs:{type:"file"},on:{change:e.onImageSelected}}),a("div",{staticStyle:{pointer:"cursor"}},[a("q-img",{staticStyle:{width:"100%",border:"1px solid grey"},attrs:{src:e.photoUrl,ratio:16/9},on:{click:function(t){return e.$refs.fileupload.click()}}})],1),a("q-input",{staticClass:"q-pt-sm",attrs:{outlined:"",label:"Reference Number"},model:{value:e.reference_number,callback:function(t){e.reference_number=t},expression:"reference_number"}}),a("q-input",{staticClass:"q-pt-sm",attrs:{outlined:"",type:"number",label:"Total Amount"},model:{value:e.total_amount,callback:function(t){e.total_amount=t},expression:"total_amount"}}),a("q-input",{staticClass:"q-pt-sm",attrs:{outlined:"",label:"Date Deposited",mask:"date",rules:["date"]},on:{click:function(){return e.$refs.qDateProxy.show()}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"startDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return e.$refs.startDate.hide()}},model:{value:e.date_deposited,callback:function(t){e.date_deposited=t},expression:"date_deposited"}})],1)],1)]},proxy:!0}]),model:{value:e.date_deposited,callback:function(t){e.date_deposited=t},expression:"date_deposited"}}),a("q-input",{attrs:{outlined:"",label:"Remarks",type:"textarea"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{label:"SUBMIT",color:"primary"},on:{click:e.validate}})],1)],1)],1)],1)},n=[],s=a("a34a"),o=a.n(s),i=(a("96cf"),a("c973")),l=a.n(i),c={props:{submitFunction:{type:Function}},data:function(){return{opened:!1,remarks:"",photoUrl:this.$appLink+"/statics/AddImage.png",fileSelected:{},reference_number:"",total_amount:"",date_deposited:"",data:{}}},methods:{onImageSelected:function(e){this.fileSelected={};try{this.fileSelected=e.target.files[0],this.photoUrl=URL.createObjectURL(e.target.files[0])}catch(t){this.photoUrl=this.$appLink+"/img/AddImage.png"}this.$forceUpdate()},validate:function(){var e=this;this.$q.dialog({title:"Confirmation",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){e.submit()})},submit:function(){var e=l()(o.a.mark(function e(){var t;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$uploadFile(this.fileSelected);case 2:t=e.sent,this.submitFunction(t,this.remarks,this.reference_number,this.total_amount,this.date_deposited),this.opened=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},d=c,u=a("2877"),p=Object(u["a"])(d,r,n,!1,null,null,null);t["a"]=p.exports},"8a19":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-lg row"},[a("div",{staticClass:"col-12"},[a("q-breadcrumbs",{staticClass:"q-pb-md text-primary",scopedSlots:e._u([{key:"separator",fn:function(){return[a("q-icon",{attrs:{size:"1.5em",name:"chevron_right",color:"primary"}})]},proxy:!0}])},[a("q-breadcrumbs-el",{attrs:{label:"Home",icon:"home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"My Reservations",icon:"menu_book"}})],1),a("q-separator")],1),a("q-card",{staticClass:"col-12",attrs:{flat:""}},[a("q-card-section",[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"To Pay",label:"To Pay"}},[a("q-badge",{attrs:{color:"primary",label:e.toPay.length}})],1),a("q-tab",{attrs:{name:"For Acknowledgement",label:"For Acknowledgement"}},[a("q-badge",{attrs:{color:"primary",label:e.forAcknowledgement.length}})],1),a("q-tab",{attrs:{name:"To Acknowledge",label:"To Acknowledge"}},[a("q-badge",{attrs:{color:"primary",label:e.toAcknowledge.length}})],1),a("q-tab",{attrs:{name:"To Rate",label:"To Rate"}},[a("q-badge",{attrs:{color:"primary",label:e.toRate.length}})],1)],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"To Pay"}},e._l(e.toPay,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("ToPay",{staticClass:"q-ma-md",attrs:{order:e}})],1)}),1),a("q-tab-panel",{attrs:{name:"For Acknowledgement"}},e._l(e.forAcknowledgement,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("ServiceDetails",{attrs:{order:e,buttonVisible:!1}})],1)}),1),a("q-tab-panel",{attrs:{name:"To Acknowledge"}},e._l(e.toAcknowledge,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("ToReceive",{attrs:{order:e}})],1)}),1),a("q-tab-panel",{attrs:{name:"To Rate"}},e._l(e.toRate,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("ToRate",{attrs:{order:e}})],1)}),1)],1)],1)],1)],1)],1)},n=[],s=a("a34a"),o=a.n(s),i=(a("7514"),a("96cf"),a("c973")),l=a.n(i),c=a("2b67"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ServiceDetails",{attrs:{order:e.order,buttonVisible:!1}}),a("div",{attrs:{align:"right"}},["Full Payment"!=e.payment.payment_type?a("PaymentSchedules",{attrs:{schedules:e.payment.recurring_payments}}):e._e(),"Bank Deposit"==e.payment.payment_option?a("div",[0==e.payment.deposit_details.length||"For Approval"!=e.payment.deposit_details[e.payment.deposit_details.length-1].status?a("UploadDepositSlip",{attrs:{submitFunction:e.bankDeposit}}):a("div",{staticClass:"text-grey text-italic"},[a("b",[e._v("Pending Payment Status:")]),e._v(" For Approval\n      ")])],1):e._e(),"Online Payment"==e.payment.payment_option?a("div",{staticClass:"text-grey text-italic text-bold"},[e._v("Auto Debit/Credit")]):e._e()],1)],1)},u=[],p=a("6cdf"),m=a("8961"),b={components:{PaymentSchedules:p["a"],UploadDepositSlip:m["a"],ServiceDetails:c["a"]},props:["order"],data:function(){return{payment:{}}},methods:{bankDeposit:function(e,t,a,r,n){var s={path:e,remarks:t,comments:"",date_uploaded:new Date,date_reviewed:"",reference_number:a,total_amount:r,date_deposited:n,status:"For Approval"};this.payment.deposit_details.push(s),this.$dbCon.service("shopper-payments").patch(this.payment._id,this.payment)}},mounted:function(){var e=this;this.$dbCon.authenticate(),this.$dbCon.service("shopper-payments").find({query:{related_id:this.order._id}}).then(function(t){e.payment=t.data[0],console.log("RESSSS",e.payment)})}},h=b,v=a("2877"),f=Object(v["a"])(h,d,u,!1,null,null,null),y=f.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ServiceDetails",{attrs:{order:e.order,buttonLabel:"Receive",updateFunction:e.update,buttonVisible:!0}})],1)},g=[],q={props:["order"],components:{ServiceDetails:c["a"]},methods:{update:function(){var e=this;this.$q.dialog({title:"Mark as Received",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){e.order.status="For Rating",e.order.logs.push({event:"Received",date:new Date}),e.$dbCon.service("service-transactions").patch(e.order._id,e.order).then(function(){e.opened=!1,e.$createSalesRecord(e.order,"Service")})})}}},k=q,x=Object(v["a"])(k,_,g,!1,null,null,null),w=x.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ServiceDetails",{attrs:{order:e.order,buttonLabel:"Rate Now",updateFunction:e.updateFunc,buttonVisible:!0}}),a("q-dialog",{model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"text-h6 text-white bg-primary"},[a("div",[e._v("RATE YOUR ORDER")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"70vh"}},[a("div",{staticClass:"q-pt-sm q-pl-xl q-pr-xl"},[a("ServiceDetails",{attrs:{order:e.order,buttonVisible:!1}}),a("div",{staticClass:"q-pt-md",attrs:{align:"center"}},[a("q-rating",{attrs:{size:"3.5em",color:"primary","icon-selected":"star"},model:{value:e.rate,callback:function(t){e.rate=t},expression:"rate"}}),e._v("\n            ("+e._s(e.rate)+")\n          ")],1),a("q-input",{attrs:{outlined:"",type:"textarea",dense:"",placeholder:"Tell us more!"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:function(t){e.opened=!1}}}),a("q-btn",{attrs:{flat:"",label:"Rate",color:"primary"},on:{click:e.update}})],1)],1)],1)],1)},S=[],R={props:["order"],components:{ServiceDetails:c["a"]},data:function(){return{opened:!1,rate:3,remarks:""}},methods:{updateFunc:function(){this.opened=!0},update:function(){var e=this;this.$q.dialog({title:"Rate this order",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){e.order.status="Done",e.order.rate=e.rate,e.order.remarks=e.remarks,e.order.logs.push({event:"Rated",date:new Date}),e.$dbCon.service("service-transactions").patch(e.order._id,e.order).then(function(){e.opened=!1})})}}},D=R,$=Object(v["a"])(D,C,S,!1,null,null,null),A=$.exports,O={components:{ToPay:y,ToReceive:w,ServiceDetails:c["a"],ToRate:A},data:function(){return{tab:"To Pay",toPay:[],forAcknowledgement:[],toAcknowledge:[],toRate:[],user:{},marker:1}},methods:{getOrder:function(){var e=l()(o.a.mark(function e(t){var a;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$dbCon.service("service-transactions").find({query:{shopper_id:this.user._id,status:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=l()(o.a.mark(function e(){var t=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$getUser();case 2:this.user=e.sent,this.$dbCon.service("service-transactions").onDataChange(l()(o.a.mark(function e(){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getOrder("Pending Payment");case 2:return t.toPay=e.sent,e.next=5,t.getOrder("For Acknowledgement");case 5:return t.forAcknowledgement=e.sent,e.next=8,t.getOrder("To Acknowledge");case 8:return t.toAcknowledge=e.sent,e.next=11,t.getOrder("For Rating");case 11:t.toRate=e.sent;case 12:case"end":return e.stop()}},e)})));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},P=O,F=Object(v["a"])(P,r,n,!1,null,null,null);t["default"]=F.exports}}]);