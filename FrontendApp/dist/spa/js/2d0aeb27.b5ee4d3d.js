(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0aeb27"],{"0abb":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:t.$q.screen.lt.sm?"min-width:100%":""},[t.$q.screen.lt.sm?a("br"):t._e(),a("q-table",{attrs:{data:t.data,columns:t.columns,filter:t.filter,"row-key":"name"},scopedSlots:t._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(e){return a("q-tr",{attrs:{props:e}},[a("q-td",{key:"title",attrs:{props:e}},[t._v(t._s(e.row.title))]),a("q-td",{key:"caption",attrs:{props:e}},[t._v(t._s(e.row.caption))]),a("q-td",{key:"createdAt",attrs:{props:e}},[t._v(t._s(t.$formatDate(e.row.createdAt)))]),a("q-td",{key:"actions",staticClass:"row",attrs:{props:e}},[a("ViewFeaturedPhoto",{staticClass:"col",attrs:{featuredPhoto:e.row}}),a("EditFeaturedPhoto",{staticClass:"col",attrs:{featuredPhoto:e.row}}),a("DeleteFeaturedPhoto",{staticClass:"col",attrs:{featuredPhoto:e.row}})],1)],1)}}])}),a("q-page-sticky",{staticStyle:{"z-index":"999"},attrs:{position:"bottom-right",offset:[30,30]}},[a("AddFeaturedPhoto")],1)],1)},r=[],i=(a("7514"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"add",size:t.$q.screen.lt.sm?"md":"xl",round:"",color:"primary"},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{"min-width":"700px","max-width":"80vw"}},[a("q-card-section",{staticClass:"bg-primary text-white"},[a("div",{staticClass:"text-h6"},[t._v("Add New Featured Photo")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll q-gutter-sm",staticStyle:{"max-height":"50vh"}},[0!=t.error.length?a("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[a("ul",t._l(t.error,function(e,o){return a("li",{key:o},[t._v(t._s(e))])}),0)]):t._e(),a("q-input",{attrs:{label:"Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("q-input",{attrs:{label:"Caption"},model:{value:t.caption,callback:function(e){t.caption=e},expression:"caption"}}),a("br"),a("p",{},[a("span",{staticClass:"text-grey-7"},[t._v("Featured Photo:")]),a("input",{attrs:{type:"file",file:"png"},on:{change:t.onImageSelected}})])],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Submit",color:"primary"},on:{click:t.validate}}),a("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:t.close}})],1)],1)],1)],1)}),n=[],s=(a("7f7f"),{data:function(){return{opened:!1,title:"",caption:"",fileSelected:"",error:[]}},methods:{validate:function(){var t=this;this.error=[],""==this.title.trim()&&this.error.push("Title field is required."),""==this.caption.trim()&&this.error.push("Caption field is required."),this.fileSelected||this.error.push("Featured Photo field is required."),0==this.error.length&&this.$q.dialog({title:"Confirmation",message:"Do you want to add this Featured Photo?s",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.submit()})},submit:function(){var t=this,e=new FormData;e.append(this.$appLink,this.fileSelected,this.fileSelected.name),this.$axios.post(this.$appLink+"/addFeaturedPhotos",e).then(function(e){console.log(e),e.data.title=t.title,e.data.caption=t.caption,e.data.createdAt=new Date,t.$dbCon.service("featured-photos").update(e.data._id,e.data).then(function(){t.$q.dialog({title:"Success!",message:"Featured Photo Added",persistent:!0}).onOk(function(){t.close()})})})},onImageSelected:function(t){this.fileSelected=t.target.files[0]},close:function(){this.opened=!1,this.title="",this.caption="",this.fileSelected=""}},mounted:function(){}}),l=s,c=a("2877"),d=Object(c["a"])(l,i,n,!1,null,null,null),u=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"remove_red_eye",color:"primary",flat:"",dense:""},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6 text-white"},[t._v("View Featured Photo")])]),a("q-separator"),a("q-card-section",[a("b",[t._v("Title:")]),t._v("\n        "+t._s(t.featuredPhoto.title)+"\n        "),a("br"),a("b",[t._v("Caption:")]),t._v("\n        "+t._s(t.featuredPhoto.caption)+"\n      ")]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[a("img",{attrs:{src:t.featuredPhoto.path,width:"100%"}})]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{label:"close",color:"grey",flat:""},on:{click:function(e){t.opened=!1}}})],1)],1)],1)],1)},h=[],f={props:["featuredPhoto"],data:function(){return{opened:!1}}},m=f,b=Object(c["a"])(m,p,h,!1,null,null,null),q=b.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"edit",color:"primary",flat:"",dense:""},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{attrs:{persistent:""},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6 text-white"},[t._v("Edit Featured Photo Details")])]),a("q-separator"),a("q-card-section",[0!=t.error.length?a("q-banner",{staticClass:"bg-red text-white",attrs:{rounded:""},scopedSlots:t._u([{key:"avatar",fn:function(){return[a("q-icon",{attrs:{name:"error",color:"white"}})]},proxy:!0}],null,!1,3709320977)},[a("ul",t._l(t.error,function(e,o){return a("li",{key:o},[t._v(t._s(e))])}),0)]):t._e(),a("q-input",{attrs:{label:"Title"},model:{value:t.data.title,callback:function(e){t.$set(t.data,"title",e)},expression:"data.title"}}),a("q-input",{attrs:{label:"Caption"},model:{value:t.data.caption,callback:function(e){t.$set(t.data,"caption",e)},expression:"data.caption"}})],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{label:"Close",color:"grey",flat:""},on:{click:t.close}}),a("q-btn",{attrs:{label:"Submit",color:"primary"},on:{click:t.validate}})],1)],1)],1)],1)},v=[],y={props:["featuredPhoto"],data:function(){return{opened:!1,data:{},error:[]}},methods:{validate:function(){this.error=[],""==this.data.title.trim()&&this.error.push("Title field is required."),""==this.data.caption.trim()&&this.error.push("Caption field is required."),0==this.error.length&&this.submit()},submit:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you really want to update this Featured Photo Details?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.$dbCon.service("featured-photos").update(t.data._id,t.data).then(function(){t.opened=!1,t.$q.dialog({title:"Success!",message:"Featured Photo details updated.",cancel:{push:!0,color:"grey",flat:!0}})})})},close:function(){this.data=_.cloneDeep(this.featuredPhoto),this.opened=!1}},mounted:function(){this.data=_.cloneDeep(this.featuredPhoto)}},w=y,k=Object(c["a"])(w,g,v,!1,null,null,null),x=k.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{icon:"delete",color:"primary",flat:"",dense:""},on:{click:t.deleteFeaturedPhoto}})],1)},C=[],$={props:["featuredPhoto"],methods:{deleteFeaturedPhoto:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you really want to delete this Featured Photo?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.$dbCon.service("featured-photos").remove(t.featuredPhoto._id).then(function(){fs.unlink(t.featuredPhoto.path,function(e){if(e)throw e;console.log(t.featuredPhoto.path+" was deleted")}),t.$q.dialog({title:"Deleted",message:"Featured Photo is deleted.",cancel:{push:!0,color:"grey",flat:!0}})})})}}},S=$,F=Object(c["a"])(S,P,C,!1,null,null,null),D=F.exports,A={components:{AddFeaturedPhoto:u,ViewFeaturedPhoto:q,EditFeaturedPhoto:x,DeleteFeaturedPhoto:D},data:function(){return{filter:"",columns:[{name:"title",label:"Title",align:"center"},{name:"caption",label:"Caption",align:"center"},{name:"createdAt",label:"Created At",align:"center"},{name:"actions",label:"Actions",align:"center",style:"min-width:160px"}],data:[],fileSelected:null}},methods:{getData:function(){var t=this;this.$dbCon.service("featured-photos").find({query:{$sort:{createdAt:-1},$limit:999999999999}}).then(function(e){t.data=e.data})}},mounted:function(){var t=this;this.$dbCon.service("featured-photos").onDataChange(function(){t.getData()})}},O=A,E=Object(c["a"])(O,o,r,!1,null,null,null);e["default"]=E.exports}}]);