(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0cfa87"],{"653e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[e._data&&e._data[e.current_count]?a("div",{staticClass:"col-9 text-right self-center q-pr-md"},[e._v(e._s(e._data[e.current_count].length))]):e._e(),a("div",{staticClass:"col-3"},[a("q-btn",{attrs:{icon:"pageview",size:"lg",dense:"",flat:"",color:"grey"},on:{click:function(t){e.opened=!0}}})],1),a("q-dialog",{staticClass:"column",attrs:{"full-height":"","full-width":"",maximized:e.$q.screen.lt.md},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[a("q-card",{staticClass:"col-12",staticStyle:{width:"800px","max-width":"80vw"}},[a("q-bar",[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"},on:{click:function(t){e.opened=!1}}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[e._v("Close")])],1)],1),a("q-card-section",[a("q-breadcrumbs",{staticClass:"text-grey"},[a("q-breadcrumbs-el",{attrs:{label:"Store",icon:"store"}}),a("q-breadcrumbs-el",{attrs:{label:"Reservations",icon:"menu_book"}})],1),a("br"),a("q-card",{staticClass:"col-12",attrs:{flat:""}},[a("q-card-section",[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},model:{value:e.tabData,callback:function(t){e.tabData=t},expression:"tabData"}},[a("q-tab",{attrs:{name:"Pending Payment",label:"Pending Payment"}},[a("q-badge",{attrs:{color:"primary",label:e.pendingPayment.length}})],1),a("q-tab",{attrs:{name:"To Acknowledge",label:"To Acknowledge"}},[a("q-badge",{attrs:{color:"primary",label:e.toAcknowledge.length}})],1),a("q-tab",{attrs:{name:"Status",label:"Status"}},[a("q-badge",{attrs:{color:"primary",label:e.status.length}})],1),a("q-tab",{attrs:{name:"Completed",label:"Completed"}},[a("q-badge",{attrs:{color:"primary",label:e.completed.length}})],1)],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:e.tabData,callback:function(t){e.tabData=t},expression:"tabData"}},[a("q-tab-panel",{attrs:{name:"Pending Payment"}},e._l(e.pendingPayment,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("PendingPayment",{attrs:{order:e}})],1)}),1),a("q-tab-panel",{attrs:{name:"To Acknowledge"}},e._l(e.toAcknowledge,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("ToAcknowledge",{attrs:{order:e}})],1)}),1),a("q-tab-panel",{attrs:{name:"Status"}},e._l(e.status,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("Status",{attrs:{order:e}})],1)}),1),a("q-tab-panel",{attrs:{name:"Completed"}},e._l(e.completed,function(e){return a("q-list",{key:e._id,attrs:{bordered:""}},[a("Status",{attrs:{order:e}})],1)}),1)],1)],1)],1)],1)],1)],1)],1)],1)},n=[],o=(a("28a5"),a("a34a")),s=a.n(o),c=(a("7514"),a("96cf"),a("c973")),i=a.n(c),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ServiceDetails",{attrs:{order:e.order,buttonVisible:!1}})],1)},d=[],u=a("2b67"),p={props:["order"],components:{ServiceDetails:u["a"]}},b=p,m=a("2877"),g=Object(m["a"])(b,l,d,!1,null,null,null),h=g.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ServiceDetails",{attrs:{order:e.order,updateFunction:e.update,buttonLabel:"Review",buttonVisible:!0}})],1)},f=[],w={props:["order"],components:{ServiceDetails:u["a"]},methods:{update:function(){var e=this;this.$q.dialog({title:"Mark as Reviewed",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){e.order.status="To Acknowledge",e.order.logs.push({event:"Reviewed",date:new Date}),e.$dbCon.service("service-transactions").patch(e.order._id,e.order).then(function(){e.opened=!1})})}}},_=w,q=Object(m["a"])(_,v,f,!1,null,null,null),k=q.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ServiceDetails",{attrs:{order:e.order,updateFunction:e.update,buttonVisible:!1}})],1)},x=[],D={props:["order"],components:{ServiceDetails:u["a"]},methods:{update:function(){var e=this;this.$q.dialog({title:"Mark as Prepared",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){"Shipping"==e.order.mode_of_delivery?e.order.status="For Shipping":"Pickup"==e.order.mode_of_delivery&&(e.order.status="For Pickup"),e.order.logs.push({event:"Packaged",date:new Date}),e.$dbCon.service("service-transactions").patch(e.order._id,e.order).then(function(){e.opened=!1})})}}},C=D,P=Object(m["a"])(C,y,x,!1,null,null,null),S=P.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ServiceDetails",{attrs:{order:e.order,buttonVisible:!1}})],1)},$=[],T={props:["order"],components:{ServiceDetails:u["a"]},methods:{}},O=T,j=Object(m["a"])(O,A,$,!1,null,null,null),E=j.exports,F={props:["tab"],components:{PendingPayment:h,ToAcknowledge:k,Status:S,Completed:E},data:function(){return{pendingPayment:[],toAcknowledge:[],status:[],completed:[],tabData:"To Acknowledge",opened:!1,current_count:""}},methods:{getData:function(){var e=i()(s.a.mark(function e(t){var a;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$dbCon.service("service-transactions").find({query:{store_id:this.$local.getItem("store_token"),status:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=i()(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.current_count=this.tab.split(" ").join(""),this.current_count=this.current_count.charAt(0).toLowerCase()+this.current_count.substring(1),this.$dbCon.service("service-transactions").onDataChange(i()(s.a.mark(function e(){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData("Pending Payment");case 2:return t.pendingPayment=e.sent,e.next=5,t.getData("For Acknowledgement");case 5:return t.toAcknowledge=e.sent,e.next=8,t.getData("To Acknowledge");case 8:return t.status=e.sent,e.next=11,t.getData("Completed");case 11:t.completed=e.sent;case 12:case"end":return e.stop()}},e)})));case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},R=F,V=Object(m["a"])(R,r,n,!1,null,null,null);t["default"]=V.exports}}]);