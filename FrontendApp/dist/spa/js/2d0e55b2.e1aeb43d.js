(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0e55b2"],{"93ac":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4 col-xs-12"},[i("SocialMediaLinks")],1),i("br"),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"uploader",attrs:{type:"file",multiple:""},on:{change:t.onImageSelected}}),i("div",{staticClass:"col-md-8 col-xs-12"},[i("q-card",{class:t.$q.screen.lt.md?"q-mt-md":"q-ml-md",attrs:{bordered:"",flat:""}},[i("q-card-section",[i("div",[i("b",[t._v("Available:")]),t._v("\n          "+t._s((t.total_storage-t.compute_used).toFixed(2))+" MB  \n          "),i("b",[t._v("Used:")]),t._v("\n          "+t._s(t.compute_used)+" MB  \n          "),i("b",[t._v("Total:")]),t._v("\n          "+t._s(t.total_storage.toFixed(2))+" MB\n        ")]),t.compute_used==t.total_storage&&.5==t.total_storage?i("div",[t._v("You have consumed your free 5MB storage.")]):t._e(),i("q-linear-progress",{staticStyle:{height:"10px"},attrs:{stripe:"",value:t.compute_used/t.total_storage}})],1),i("q-card-section",{staticClass:"row justify-end"},[i("AvailStorageSpace",{class:t.$q.screen.lt.md?"full-width q-pb-sm":""}),t.isDeletingMultiple?t._e():i("q-btn",{class:t.$q.screen.lt.md?"full-width":"",attrs:{label:"Delete Multiple",color:"grey",unelevated:"",disable:0==t.store.gallery.length},on:{click:function(e){t.isDeletingMultiple=!0}}}),t.isDeletingMultiple?i("q-btn",{class:t.$q.screen.lt.md?"full-width":"",attrs:{label:"Delete All Selected",color:"red",disable:0==t.store.gallery.length,unelevated:""},on:{click:function(e){t.isDeletingMultiple=!1,t.deleteMultiple()}}}):t._e()],1),i("q-card-section",{staticClass:"flex q-gutter-sm",class:t.$q.screen.lt.md?"justify-center":"justify-left"},[i("q-card",{staticStyle:{width:"130px",height:"130px"},attrs:{flat:"",bordered:""}},[i("q-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{flat:""},on:{click:function(e){t.upload=!0}}},[i("q-card-section",[i("q-icon",{attrs:{name:"add",size:"50px"}})],1)],1)],1),t._l(t.store.gallery,function(e,a){return i("div",{key:a},["image"==e.type?i("q-card",{staticStyle:{width:"130px",height:"130px"},attrs:{flat:"",bordered:""}},[i("q-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{flat:""},on:{click:function(i){t.isDeletingMultiple?t.selectToDelete(e):t.viewImage(e,a)}}},[t.isDeletingMultiple?i("q-checkbox",{staticClass:"absolute bg-white",staticStyle:{top:"10px",right:"4px",transform:"translateY(-20%)","z-index":"1"},attrs:{value:t.toDelete.includes(e)},nativeOn:{click:function(i){t.isDeletingMultiple?t.selectToDelete(e):t.viewImage(e,a)}}}):t._e(),t.isDeletingMultiple?t._e():i("q-icon",{staticClass:"absolute bg-white round-border",staticStyle:{top:"10px",right:"4px",transform:"translateY(-20%)","z-index":"1"},attrs:{name:"image",size:"30px",color:"grey"}}),i("img",{staticClass:"col",staticStyle:{height:"15vh",border:"1px solid grey"},attrs:{src:e.name}})],1)],1):t._e(),"video link"==e.type?i("q-card",{staticStyle:{width:"130px",height:"130px"},attrs:{flat:"",bordered:""}},[i("q-btn",{staticStyle:{width:"100%",height:"100%"},attrs:{flat:""},nativeOn:{click:function(i){t.isDeletingMultiple?t.selectToDelete(e):t.viewVideo(e,a)}}},[t.isDeletingMultiple?i("q-checkbox",{staticClass:"absolute bg-white",staticStyle:{top:"10px",right:"4px",transform:"translateY(-20%)","z-index":"1"},attrs:{value:t.toDelete.includes(e)},nativeOn:{click:function(i){t.isDeletingMultiple?t.selectToDelete(e):t.viewVideo(e,a)}}}):t._e(),t.isDeletingMultiple?t._e():i("q-icon",{staticClass:"absolute bg-white round-border",staticStyle:{top:"10px",right:"4px",transform:"translateY(-20%)","z-index":"1"},attrs:{name:"arrow_right",size:"30px",color:"grey"}}),i("q-img",{staticClass:"col",attrs:{src:"https://img.youtube.com/vi/"+t.getYTID(e.link)+"/maxresdefault.jpg",ratio:1}})],1)],1):t._e()],1)})],2)],1)],1),i("q-dialog",{model:{value:t.viewImg,callback:function(e){t.viewImg=e},expression:"viewImg"}},[i("q-card",{staticStyle:{width:"300px"}},[i("q-img",{attrs:{src:t.current_image.name}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"absolute",staticStyle:{top:"-19",right:"0px",transform:"translateY(-1%)"},attrs:{flat:"",icon:"close"}}),i("q-card-section",[i("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{fab:"",color:"red",icon:"delete"},on:{click:function(e){return t.deleteImage()}}}),i("div",{staticClass:"row no-wrap items-center"},[i("div",{staticClass:"col text-h7 ellipsis q-pt-md"},[t._v(t._s(t.$formatDate(t.current_image.createdAt)))]),i("div",{staticClass:"col-auto text-grey q-pt-md"},[i("q-icon",{attrs:{name:"storage"}}),t._v("\n            "+t._s(t.current_image.size)+" MB\n          ")],1)]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col-12 full-width q-mt-lg",attrs:{dense:"",outline:"",label:"close"}})],1)],1)],1),i("q-dialog",{model:{value:t.viewVid,callback:function(e){t.viewVid=e},expression:"viewVid"}},[i("q-card",[t.viewVid?i("q-video",{attrs:{src:"https://www.youtube.com/embed/"+t.getYTID(t.current_video.link)}}):t._e(),i("q-card-section",[i("q-btn",{staticClass:"absolute",staticStyle:{top:"0",right:"12px",transform:"translateY(-50%)"},attrs:{fab:"",color:"red",icon:"delete"},on:{click:t.deleteVideoLink}}),i("div",{staticClass:"row no-wrap items-center"},[i("div",{staticClass:"col text-h7 ellipsis q-pt-md"},[t._v(t._s(t.$formatDate(t.current_video.createdAt)))]),i("div",{staticClass:"col-auto text-grey q-pt-md"},[i("q-icon",{attrs:{name:"storage"}}),t._v("\n            "+t._s(t.current_video.size)+" MB\n          ")],1)]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"col-12 full-width q-mt-lg",attrs:{dense:"",outline:"",label:"close"}})],1)],1)],1),i("q-dialog",{model:{value:t.upload,callback:function(e){t.upload=e},expression:"upload"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center no-wrap"},[i("q-list",{staticStyle:{width:"100%"},attrs:{separator:"",bordered:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){t.$refs.uploader.click(),t.upload=!1}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{flat:"",round:"",icon:"insert_photo"}})],1),i("q-item-section",[t._v("Upload Picture")])],1),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){t.addVideoLink(),t.upload=!1}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{flat:"",round:"",icon:"link"}})],1),i("q-item-section",{staticStyle:{color:"primary"}},[t._v("Add Youtube Video Link")]),i("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"hiddenLink",attrs:{href:"https://"+t.current_link,target:"_blank"}})],1)],1)],1)],1)],1)],1)},s=[],r=(i("7514"),i("4917"),i("28a5"),i("ac6a"),i("20d6"),i("6762"),i("2fdb"),i("a34a")),n=i.n(r),o=(i("96cf"),i("c973")),l=i.n(o),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("p",{staticClass:"text-h6 text-black"},[t._v("Add your store social media page or channel")]),i("q-list",{attrs:{bordered:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.editLink("facebook",t.store.links.facebook)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{square:""}},[i("img",{attrs:{src:t.$appLink+"/statics/facebook-logo.jpg"}})])],1),i("q-item-section",[t._v("\n        Facebook\n        "),i("br"),""!=t.store.links.facebook.trim()?i("small",[t._v(t._s(t.store.links.facebook))]):i("small",{staticClass:"text-grey"},[t._v("click here to add link")])])],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.editLink("instagram",t.store.links.instagram)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{square:""}},[i("img",{attrs:{src:t.$appLink+"/statics/instagram-logo.jpg"}})])],1),i("q-item-section",[t._v("\n        Instagram\n        "),i("br"),""!=t.store.links.instagram.trim()?i("small",[t._v(t._s(t.store.links.instagram))]):i("small",{staticClass:"text-grey"},[t._v("click here to add link")])])],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.editLink("pinterest",t.store.links.pinterest)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{square:""}},[i("img",{attrs:{src:t.$appLink+"/statics/pinterest-logo.jpg"}})])],1),i("q-item-section",[t._v("\n        Pinterest\n        "),i("br"),""!=t.store.links.pinterest.trim()?i("small",[t._v(t._s(t.store.links.pinterest))]):i("small",{staticClass:"text-grey"},[t._v("click here to add link")])])],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.editLink("youtube",t.store.links.youtube)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{square:""}},[i("img",{attrs:{src:t.$appLink+"/statics/youtube-logo.jpg"}})])],1),i("q-item-section",[t._v("\n        Youtube\n        "),i("br"),""!=t.store.links.youtube.trim()?i("small",[t._v(t._s(t.store.links.youtube))]):i("small",{staticClass:"text-grey"},[t._v("click here to add link")])])],1),i("q-separator"),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.editLink("vimeo",t.store.links.vimeo)}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-avatar",{attrs:{square:""}},[i("img",{attrs:{src:t.$appLink+"/statics/vimeo-logo.jpg"}})])],1),i("q-item-section",[t._v("\n        Vimeo\n        "),i("br"),""!=t.store.links.vimeo.trim()?i("small",[t._v(t._s(t.store.links.vimeo))]):i("small",{staticClass:"text-grey"},[t._v("click here to add link")])])],1)],1),i("q-dialog",{model:{value:t.modifyLink,callback:function(e){t.modifyLink=e},expression:"modifyLink"}},[i("q-card",[i("q-card-section",{staticClass:"row items-center no-wrap"},[i("q-list",{staticStyle:{width:"100%"},attrs:{separator:"",bordered:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.modifyLinkDialog()}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{flat:"",round:"",icon:"edit"}})],1),i("q-item-section",[t._v("Modify Link")])],1),i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(e){return t.$refs.hiddenLink.click()}}},[i("q-item-section",{attrs:{avatar:""}},[i("q-btn",{attrs:{flat:"",round:"",icon:"remove_red_eye",color:"primary"}})],1),i("q-item-section",{staticStyle:{color:"primary"}},[t._v("View Link")]),i("a",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"hiddenLink",attrs:{href:"https://"+t.current_link,target:"_blank"}})],1)],1)],1)],1)],1)],1)},u=[],d=(i("a481"),{data:function(){return{store:{},current_link:"",current_type:"",modifyLink:!1}},methods:{getData:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.store=t.data[0]});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),modifyLinkDialog:function(){var t=this;this.$q.dialog({title:(""==this.current_link.trim()?"Add":"Modify")+" link",prompt:{model:this.current_link},cancel:!0,persistent:!0}).onOk(function(e){var i="";"facebook"==t.current_type?i="^(https?://)?(www.facebook.com|facebook.com|m.facebook.com|fb.com|m.fb.com)/.+$":"instagram"==t.current_type?i="^(https?://)?(www.instagram.com|instagram.com|m.instagram.com|ig.com|m.ig.com)/.+$":"pinterest"==t.current_type?i="^(https?://)?(www.pinterest.com|pinterest.com|m.pinterest.com)/.+$":"youtube"==t.current_type?i="^(https?://)?(www.youtube.com|youtube.com|m.youtube.com)/.+$":"vimeo"==t.current_type&&(i="^(https?://)?(www.vimeo.com|vimeo.com|m.vimeo.com)/.+$"),e.trim().match(i)?(t.modifyLink=!1,t.store.links[t.current_type]=e.trim().replace("https://","").replace("http://",""),t.$dbCon.service("store").patch(t.$local.getItem("store_token"),t.store).then(function(){t.$q.notify({message:"Successfully Updated!",position:"top-right",color:"primary",timeout:700,icon:"check"})})):t.$q.dialog({title:"The link was not a valid "+t.current_type[0].toUpperCase()+t.current_type.substring(1,t.current_type.length)+" link",message:"Please input valid "+t.current_type[0].toUpperCase()+t.current_type.substring(1,t.current_type.length)+" link to proceed."})})},isUrl:function(t){var e=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!!e.test(t)},editLink:function(t,e){this.current_link=e,this.current_type=t,""==e.trim()?this.modifyLinkDialog():this.modifyLink=!0}},mounted:function(){var t=this;this.$dbCon.service("store").onDataChange(function(){t.getData()})}}),p=d,m=i("2877"),f=Object(m["a"])(p,c,u,!1,null,null,null),h=f.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-btn",{staticClass:"q-mr-sm",class:t.$q.screen.lt.md?"full-width":"",attrs:{label:"Add Storage",unelevated:"",color:"primary"},on:{click:function(e){t.opened=!0}}}),i("q-dialog",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[i("q-card",{staticStyle:{width:"600px"}},[i("q-card-section",{staticClass:"text-h6 text-white bg-primary"},[i("div",[t._v("Add portfolio storage")])]),i("q-separator"),i("q-card-section",{staticClass:"row"},[i("q-markup-table",{staticStyle:{width:"100%"},attrs:{flat:""}},[i("tbody",{staticClass:"text-h4"},[i("tr",[i("th",{staticClass:"text-left text-bold"},[i("b",[t._v("Size")])]),i("th",{staticClass:"text-left text-bold"},[i("b",[t._v("Price/MB")])]),i("th",{staticClass:"text-right text-bold"},[i("b",[t._v("Cost")])])]),i("tr",[i("th",{staticClass:"text-left"},[i("q-input",{staticStyle:{width:"100px"},attrs:{autofocus:"",type:"number",min:"10",dense:""},on:{change:function(e){t.mb=Math.floor(t.mb),t.mb<10&&(t.mb=10)}},model:{value:t.mb,callback:function(e){t.mb=e},expression:"mb"}})],1),i("th",{staticClass:"text-left"},[i("div",[t._v(t._s(t.$prettyMoney(t.rate)))])]),i("th",{staticClass:"text-right"},[t._v(t._s(t.$prettyMoney(t.rate*t.mb)))])])])]),i("div",{staticClass:"q-pt-lg q-pa-md text-grey",attrs:{align:"left"}},[t._v("Minimum purchase is 10MB. Valid for one year from the date of purchase.")])],1),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{ref:"btn_back",attrs:{label:"Cancel",color:"grey","no-caps":"",flat:""},on:{click:function(e){t.opened=!1},mouseover:function(e){t.$refs.btn_back.unelevated=!0,t.$refs.btn_back.flat=!1},mouseleave:function(e){t.$refs.btn_back.flat=!0,t.$refs.btn_back.unelevated=!1}}}),i("q-btn",{ref:"btn_save_next",staticClass:"q-mr-sm",attrs:{label:"Pay now",color:"primary","no-caps":"",outline:""},on:{click:function(e){return t.$refs.altpaynet.openAltPayNet()},mouseover:function(e){t.$refs.btn_save_next.unelevated=!0,t.$refs.btn_save_next.outline=!1},mouseleave:function(e){t.$refs.btn_save_next.outline=!0,t.$refs.btn_save_next.unelevated=!1}}})],1)],1)],1),i("AltPayNet",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"altpaynet",attrs:{onlinePaymentResult:t.onlinePaymentResult,item:{price:t.rate*t.mb,description:"Storage Subscription: 1MB/PHP1.00/Year"}}})],1)},g=[],b=i("31f2"),k={components:{AltPayNet:b["a"]},data:function(){return{opened:!1,rate:5,mb:10}},methods:{onlinePaymentResult:function(){var t=l()(n.a.mark(function t(e,i){var a=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.service("gallery-subscription").create({store_id:this.$local.getItem("store_token"),mb:this.mb,total_amount:this.price,date_started:new Date,date_paid:new Date,date_end:this.$addToDate(new Date,0,12),status:"Paid",deposit_details:e}).then(function(){a.opened=!1,a.$q.dialog({title:"Success!",message:"You have successfully availed extra storage space."})});case 1:case"end":return t.stop()}},t,this)}));function e(e,i){return t.apply(this,arguments)}return e}()}},y=k,w=Object(m["a"])(y,v,g,!1,null,null,null),q=w.exports,x={components:{AvailStorageSpace:q,SocialMediaLinks:h},data:function(){return{store:[],current_image:{},current_video:{},current_index:0,total_storage:0,viewImg:!1,viewVid:!1,modifyLink:!1,upload:!1,current_link:"",toDelete:[],isDeletingMultiple:!1}},methods:{onlinePaymentResult:function(){var t=l()(n.a.mark(function t(e,i){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}},t)}));function e(e,i){return t.apply(this,arguments)}return e}(),viewImage:function(t,e){this.current_image=t,this.current_index=e,this.viewImg=!0},viewVideo:function(t,e){this.current_video=t,this.current_index=e,this.viewVid=!0},selectToDelete:function(t){this.toDelete.includes(t)?this.toDelete.splice(_.findIndex(this.toDelete,t),1):this.toDelete.push(t)},deleteImage:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$axios({method:"post",url:this.$appLink+"/deletePortfolioGallery",data:{img_directory:this.current_image.directory}}).then(function(t){1==t.data?(e.store.gallery.splice(e.current_index,1),e.$dbCon.service("store").patch(e.store._id,e.store).then(function(){e.$q.notify({message:"Successfully Deleted!",position:"top-right",color:"primary",timeout:700,icon:"check"}),e.viewImg=!1,e.viewVid=!1})):e.$q.notify({message:"An error occured! Please try again.",position:"top-right",color:"red",timeout:700,icon:"check"})});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),deleteVideoLink:function(){var t=this;this.store.gallery.splice(this.current_index,1),this.$dbCon.service("store").patch(this.store._id,this.store).then(function(){t.$q.notify({message:"Successfully Deleted!",position:"top-right",color:"primary",timeout:700,icon:"check"}),t.viewImg=!1,t.viewVid=!1})},deleteMultiple:function(){this.$q.loading.show(),this.toDelete.forEach(function(){var t=l()(n.a.mark(function t(e){return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("video link"==e.type){t.next=3;break}return t.next=3,this.$axios({method:"post",url:this.$appLink+"/deletePortfolioGallery",data:{img_directory:e.directory}});case 3:return t.t0=this.store.gallery,t.next=6,_.findIndex(this.store.gallery,e);case 6:return t.t1=t.sent,t.next=9,t.t0.splice.call(t.t0,t.t1,1);case 9:return t.next=11,this.$dbCon.service("store").patch(this.store._id,this.store);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),this),this.$q.loading.hide()},onImageSelected:function(){var t=l()(n.a.mark(function t(e){var i,a;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(this.$q.loading.show(),i=0,a=0;a<e.target.files.length;a++)i+=parseFloat(e.target.files[a].size/1024/1024);if(!(this.total_storage>parseFloat(this.compute_used)+i)){t.next=13;break}a=0;case 5:if(!(a<e.target.files.length)){t.next=11;break}return t.next=8,this.uploadFile(e.target.files[a]);case 8:a++,t.next=5;break;case 11:t.next=14;break;case 13:this.$q.dialog({title:"Not Enough Storage Space",message:"Your free space was used up. Please add portfolio storage to continue."});case 14:this.$q.loading.hide();case 15:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),uploadFile:function(){var t=l()(n.a.mark(function t(e){var i,a;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("FILE TO UPLOAD",e.type),!["image/jpeg","image/png"].includes(e.type)){t.next=12;break}return t.next=4,this.$uploadFile(e);case 4:return i=t.sent,a=i.split("/")[i.split("/").length-1],this.store.gallery.unshift({type:"image",name:i,directory:"public/uploads/"+a,size:(e.size/1e6).toFixed(2),createdAt:new Date}),console.log(this.store.gallery),t.next=10,this.$dbCon.service("store").patch(this.store._id,this.store);case 10:t.next=13;break;case 12:this.$q.notify({message:"Error Uploading! The system only accepts .JPG and .PNG!",position:"top-right",color:"red",timeout:700,icon:"check"});case 13:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),addVideoLink:function(){var t=this;this.$q.dialog({title:"Add Video Link",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk(function(){var e=l()(n.a.mark(function e(i){var a;return n.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.isUrl(i.trim());case 2:if(a=e.sent,""==i.trim()||!a){e.next=10;break}if(i.trim().match("^(https?://)?(www.youtube.com|youtube.com|youtu.?be)/.+$")){e.next=7;break}return t.$q.dialog({title:"The link was not a valid Youtube video",message:"Please input valid Youtube Link to proceed."}),e.abrupt("return");case 7:t.total_storage>parseFloat(t.compute_used)+1?(t.store.gallery.unshift({type:"video link",link:i,size:1,createdAt:new Date}),t.$dbCon.service("store").patch(t.store._id,t.store)):t.$q.dialog({title:"Not Enough Storage Space",message:"Your free space was used up. Please add portfolio storage to continue."}),e.next=11;break;case 10:t.$q.dialog({title:"Video Link is Invalid",message:"The Video Link you insert is invalid."});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},getData:function(){var t=l()(n.a.mark(function t(){var e=this;return n.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(t){e.store=t.data[0]});case 2:return t.next=4,this.$dbCon.service("gallery-subscription").find({query:{store_id:this.$local.getItem("store_token")}}).then(function(t){e.total_storage=0,t.data.map(function(t){e.total_storage+=t.mb})});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),isUrl:function(t){var e=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return!!e.test(t)},getYTID:function(t){var e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,i=t.match(e);return!(!i||11!=i[7].length)&&i[7]}},mounted:function(){var t=this;this.$dbCon.service("store").onDataChange(function(){t.getData()}),this.$dbCon.service("gallery-subscription").onDataChange(function(){t.getData()})},computed:{compute_used:function(){var t=0;return this.store.gallery.forEach(function(e){t+=parseFloat(e.size)}),t.toFixed(2)}}},$=x,C=Object(m["a"])($,a,s,!1,null,null,null);e["default"]=C.exports}}]);