(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0dd9df"],{"81c3":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-breadcrumbs",{staticClass:"col-12 text-grey"},[r("q-breadcrumbs-el",{attrs:{label:"Maintenance",icon:"widgets"}}),r("q-breadcrumbs-el",{attrs:{label:"Delivery",icon:"motorcycle"}})],1),r("br"),r("q-table",{attrs:{pagination:e.myPagination,flat:"",bordered:"",data:e.data.fuel_delivery,columns:e.columns,filter:e.filter,"row-key":"name"},on:{"update:pagination":function(t){e.myPagination=t}},scopedSlots:e._u([{key:"top-right",fn:function(){return[r("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return e.store.market_areas.includes(t.row.location)?r("q-tr",{attrs:{props:t}},[r("q-td",{key:"province",attrs:{props:t}},[e._v(e._s(t.row.location))]),r("q-td",{key:"delivery",attrs:{props:t}},[e._v(e._s(""!=t.row.delivery&&0!=t.row.delivery?e.$prettyMoney(t.row.delivery):"FREE"))]),r("q-td",{key:"edit",attrs:{props:t}},[r("q-btn",{attrs:{icon:"edit",flat:"",dense:""},on:{click:function(r){return e.editFee(t.row.__index,t.row.delivery)}}})],1)],1):e._e()}}],null,!0)}),r("q-dialog",{attrs:{persistent:""},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[r("q-card",{staticStyle:{"min-width":"350px"}},[r("q-card-section",[r("div",{staticClass:"text-h6"},[e._v("Edit delivery charge")])]),r("q-card-section",{staticClass:"q-pt-none"},[r("q-input",{ref:"inp_fee",attrs:{dense:""},on:{focus:e.toInputFee,blur:e.toChangeFee},model:{value:e.current_formatted_fee,callback:function(t){e.current_formatted_fee=t},expression:"current_formatted_fee"}})],1),r("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[r("q-btn",{attrs:{flat:"",label:"Cancel"},on:{click:function(t){e.opened=!1}}}),r("q-btn",{attrs:{flat:"",label:"Submit"},on:{click:e.save}})],1)],1)],1)],1)},i=[],a=(r("7514"),r("a34a")),o=r.n(a),s=(r("96cf"),r("c973")),c=r.n(s),l={data:function(){return{opened:!1,myPagination:{rowsPerPage:10},data:{},store:{},current_row:0,current_fee:0,current_formatted_fee:0,filter:"",columns:[{name:"province",label:"Province",field:"location",align:"center",style:"width:20%"},{name:"delivery",label:"Delivery Fee",field:"delivery",align:"center"},{name:"edit",label:"Edit",align:"center",style:"width:200px"}]}},methods:{editFee:function(e,t){this.current_delivery=e,this.current_fee=this.data.fuel_delivery[this.current_delivery].delivery,this.current_formatted_fee=this.$prettyMoney(this.current_fee),this.opened=!0},toInputFee:function(){this.current_formatted_fee=this.current_fee},toChangeFee:function(){isNaN(this.current_formatted_fee)&&(this.current_formatted_fee=this.current_fee=this.data.fuel_delivery[this.current_delivery].delivery),this.current_fee=this.current_formatted_fee,this.current_formatted_fee=this.$prettyMoney(this.current_formatted_fee)},save:function(){var e=c()(o.a.mark(function e(t){var r=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.inp_fee.blur();case 2:this.data.fuel_delivery[this.current_delivery].delivery=this.current_fee,this.$q.dialog({title:"Do you want to continue?",message:"Charges apply to all products.",cancel:!0}).onOk(function(){r.$dbCon.service("store-fuel-delivery").update(r.data._id,r.data).then(function(){r.opened=!1,r.$q.notify({message:"Successfully Updated!",position:"top-right",color:"primary",timeout:700,icon:"check"})})});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=c()(o.a.mark(function e(){var t=this;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$dbCon.service("store").find({query:{_id:this.$local.getItem("store_token")}}).then(function(e){t.store=e.data[0]});case 2:return e.next=4,this.$dbCon.service("store-fuel-delivery").find({query:{store_id:this.$local.getItem("store_token")}}).then(function(e){t.data=e.data[0]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},d=l,u=r("2877"),f=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=f.exports}}]);