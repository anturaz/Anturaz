(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d20734d"],{a019:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-lg row"},[a("div",{staticClass:"col-12"},[a("q-breadcrumbs",{staticClass:"q-pb-md text-primary",scopedSlots:t._u([{key:"separator",fn:function(){return[a("q-icon",{attrs:{size:"1.5em",name:"chevron_right",color:"primary"}})]},proxy:!0}])},[a("q-breadcrumbs-el",{attrs:{label:"Home",icon:"home",to:"/"}}),a("q-breadcrumbs-el",{attrs:{label:"Shopping Cart",icon:"shopping_cart"}})],1),a("q-separator")],1),a("div",{staticClass:"col-1"}),a("q-card",{staticClass:"col-10",attrs:{flat:""}},[a("q-card-section",[a("q-list",{attrs:{bordered:"",separator:""}},[0==t.cart.length?a("div",{staticClass:"q-pa-md",attrs:{align:"center"}},[a("div",[a("q-icon",{attrs:{name:"shopping_cart",color:"grey",size:"200px"}})],1),a("div",{staticClass:"text-grey"},[t._v("No items found")]),a("div",[a("q-btn",{attrs:{unelevated:"",color:"primary",label:"Continue Shopping"},on:{click:function(e){return t.$router.push("/")}}})],1)]):t._e(),t._l(t.cart,function(t,e){return a("CartItem",{key:t,attrs:{item:t,index:e}})}),a("q-separator")],2)],1)],1)],1)},i=[],n=a("a34a"),s=a.n(n),o=(a("7514"),a("96cf"),a("c973")),c=a.n(o),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"100px",square:""}},[a("img",{attrs:{ratio:1,src:t.data.photos[0]}})])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-title",attrs:{lines:"1"}},[t._v(t._s("products"==t.item.type?t.data.product_name:t.data.service_name))]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Category:")]),t._v("\n        "+t._s(t.data.category)+"\n      ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Type:")]),t._v("\n        "+t._s("products"==t.item.type?"Product":"Service")+"\n      ")]),"products"==t.item.type?a("div",[a("q-item-label",{attrs:{caption:"",lines:"2"}},[void 0!=t.item.size?a("span",{staticClass:"text-weight-bold"},[t._v("Size:")]):t._e(),t._v("\n          "+t._s(t.item.size)+"\n        ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[void 0!=t.item.color?a("span",{staticClass:"text-weight-bold"},[t._v("Color:")]):t._e(),t._v("\n          "+t._s(t.item.color)+"\n        ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[void 0!=t.item.material?a("span",{staticClass:"text-weight-bold"},[t._v("Material:")]):t._e(),t._v("\n          "+t._s(t.item.material)+"\n        ")])],1):t._e()],1),a("q-item-section",{attrs:{side:"",top:""}},[a("div",[a("span",{staticClass:"text-primary text-title text-bold"},[t._v(t._s(t.$prettyMoney(t.data.sale_price))+"Â ")]),a("strike",[t._v(t._s(t.$prettyMoney(t.data.regular_price)))])],1),a("div",[t._v("Qty "+t._s(t.item.quantity))]),a("q-space"),a("div",[a("q-btn",{attrs:{label:"Remove",color:"red-2",flat:""},on:{click:function(e){return t.removeItem()}}}),a("q-btn",{staticClass:"col-md-7",attrs:{unelevated:"",color:"primary",size:"lg",label:"Proceed to checkout"},on:{click:t.checkLogin}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.loginForm,callback:function(e){t.loginForm=e},expression:"loginForm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:"",size:"xs"}})],1),a("q-card-section",[a("ShopperLoginForm",{attrs:{afterLogin:t.afterLogin}})],1)],1)],1)],1)},u=[],d=a("4d91"),p={props:["item","index"],components:{ShopperLoginForm:d["a"]},data:function(){return{loginForm:!1,data:{}}},methods:{removeItem:function(){var t=this;this.$q.dialog({title:"Remove Item From Cart?",message:"Are you sure you want to remove this item for cart?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){if(void 0==t.item._id){var e=t.$session.get("cart");e.splice(t.index,1),t.$session.set("cart",e),t.$EventBus.$emit("modify-cart",null)}else t.$dbCon.service("cart").remove(t.item._id)})},checkLogin:function(){var t=c()(s.a.mark(function t(){var e=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.authenticate().then(function(){"products"==e.item.type?e.$router.push("/checkoutProduct/"+e.item._id):e.$router.push("/checkoutService/"+e.item._id)}).catch(function(){e.loginForm=!0});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),afterLogin:function(){this.loginForm=!1,this.checkLogin()}},mounted:function(){var t=this;this.$dbCon.service("products"==this.item.type?"products":"services").find({query:{_id:this.item.item_id}}).then(function(e){t.data=e.data[0]})}},m=p,h=a("2877"),v=Object(h["a"])(m,l,u,!1,null,null,null),f=v.exports,_={components:{CartItem:f},data:function(){return{cart:[],user:{}}},methods:{getData:function(){var t=this;this.$dbCon.authenticate().then(c()(s.a.mark(function e(){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$getUser();case 2:return t.user=e.sent,e.next=5,t.$dbCon.service("cart").find({query:{shopper_id:t.user._id}}).then(function(e){t.cart=e.data});case 5:case"end":return e.stop()}},e)}))).catch(function(e){t.cart=t.$session.get("cart")})}},mounted:function(){var t=c()(s.a.mark(function t(){var e=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$dbCon.service("cart").onDataChange(c()(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getData();case 2:e.$forceUpdate();case 3:case"end":return t.stop()}},t)}))),this.$EventBus.$on("logged-in",c()(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.getData();case 1:case"end":return t.stop()}},t)})));case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},g=_,b=Object(h["a"])(g,r,i,!1,null,null,null);e["default"]=b.exports}}]);