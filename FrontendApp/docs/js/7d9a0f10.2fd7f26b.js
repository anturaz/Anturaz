(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7d9a0f10"],{2234:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-item",[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{size:"100px",square:""}},[a("img",{attrs:{ratio:1,src:t.product.photos[0]}})])],1),a("q-item-section",[a("q-item-label",{staticClass:"text-title",attrs:{lines:"1"}},[t._v(t._s(t.product.product_name))]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Category:")]),t._v("\n        "+t._s(t.product.category)+"\n      ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Date Needed:")]),t._v("\n        "+t._s(t.$formatDate_DateOnly(t.order.date_needed))+"\n      ")]),a("q-item-label",{attrs:{caption:"",lines:"2"}},[void 0!=t.order.mode_of_delivery?a("span",{staticClass:"text-weight-bold"},[t._v("Mode of Delivery:")]):t._e(),t._v("\n        "+t._s(t.order.mode_of_delivery)+"\n      ")]),null!=t.order.size&&""!=t.order.size?a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Size:")]),t._v("\n        "+t._s(t.order.size)+"\n      ")]):t._e(),null!=t.order.color&&""!=t.order.color?a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Color:")]),t._v("\n        "+t._s(t.order.color)+"\n      ")]):t._e(),null!=t.order.material&&""!=t.order.material?a("q-item-label",{attrs:{caption:"",lines:"2"}},[a("span",{staticClass:"text-weight-bold"},[t._v("Material:")]),t._v("\n        "+t._s(t.order.material)+"\n      ")]):t._e()],1),a("q-item-section",{attrs:{side:"",top:""}},[void 0!=t.order.order_number?a("span",{staticClass:"text-primary text-title text-bold"},[t._v("ORDER# "+t._s(t.order.order_number)+" ")]):t._e(),a("div",[a("span",{staticClass:"text-primary text-title text-bold"},[t._v(t._s(t.$prettyMoney(t.payment.total))+" ")])]),a("div",[t._v("Qty "+t._s(t.order.quantity))]),a("q-space"),a("div",[t.buttonVisible?a("q-btn",{attrs:{label:t.buttonLabel,color:"primary",unelevated:""},on:{click:t.updateFunction}}):t._e()],1)],1)],1)],1)},n=[],o=(a("7514"),{props:{order:Object,updateFunction:Function,buttonLabel:String,buttonVisible:Boolean},data:function(){return{product:{},shopper:{},payment:{}}},mounted:function(){var t=this;this.$dbCon.service("products").get(this.order.item_id).then(function(e){t.product=e}),this.$dbCon.service("users").get(this.order.shopper_id).then(function(e){t.shopper=e}),this.$dbCon.service("shopper-payments").find({query:{related_id:this.order._id}}).then(function(e){console.log(e),t.payment=e.data[0]})}}),s=o,i=a("2877"),l=Object(i["a"])(s,r,n,!1,null,null,null);e["a"]=l.exports},5118:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-lg row"},[a("div",{staticClass:"col-12"},[a("q-breadcrumbs",{staticClass:"q-pb-md text-primary",scopedSlots:t._u([{key:"separator",fn:function(){return[a("q-icon",{attrs:{size:"1.5em",name:"chevron_right",color:"primary"}})]},proxy:!0}])},[a("q-breadcrumbs-el",{attrs:{label:"Home",icon:"home"}}),a("q-breadcrumbs-el",{attrs:{label:"My Orders",icon:"list"}})],1),a("q-separator")],1),a("q-card",{staticClass:"col-12",attrs:{flat:""}},[a("q-card-section",[a("q-card",{attrs:{flat:"",bordered:""}},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"To Pay",label:"To Pay"}},[a("q-badge",{attrs:{color:"primary",label:t.toPay.length}})],1),a("q-tab",{attrs:{name:"For Acknowledgement",label:"For Acknowledgement"}},[a("q-badge",{attrs:{color:"primary",label:t.forAcknowledgement.length}})],1),a("q-tab",{attrs:{name:"For Packaging",label:"For Packaging"}},[a("q-badge",{attrs:{color:"primary",label:t.forPackaging.length}})],1),a("q-tab",{attrs:{name:"To Ship",label:"To Ship"}},[a("q-badge",{attrs:{color:"primary",label:t.toShip.length}})],1),a("q-tab",{attrs:{name:"To Pickup",label:"To Pickup"}},[a("q-badge",{attrs:{color:"primary",label:t.toPickup.length}})],1),a("q-tab",{attrs:{name:"To Receive",label:"To Receive"}},[a("q-badge",{attrs:{color:"primary",label:t.toReceive.length}})],1),a("q-tab",{attrs:{name:"To Rate",label:"To Rate"}},[a("q-badge",{attrs:{color:"primary",label:t.toRate.length}})],1)],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"To Pay"}},t._l(t.toPay,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ToPay",{staticClass:"q-ma-md",attrs:{order:t}})],1)}),1),a("q-tab-panel",{attrs:{name:"For Acknowledgement"}},[a("q-list",{attrs:{bordered:""}},t._l(t.forAcknowledgement,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ProductDetails",{attrs:{order:t,buttonVisible:!1}})],1)}),1)],1),a("q-tab-panel",{attrs:{name:"For Packaging"}},[a("q-list",{attrs:{bordered:""}},t._l(t.forPackaging,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ProductDetails",{attrs:{order:t,buttonVisible:!1}})],1)}),1)],1),a("q-tab-panel",{attrs:{name:"To Ship"}},[a("q-list",{attrs:{bordered:""}},t._l(t.toShip,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ProductDetails",{attrs:{order:t,buttonVisible:!1}})],1)}),1)],1),a("q-tab-panel",{attrs:{name:"To Pickup"}},[a("q-list",{attrs:{bordered:""}},t._l(t.toPickup,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ProductDetails",{attrs:{order:t,buttonVisible:!1}})],1)}),1)],1),a("q-tab-panel",{attrs:{name:"To Receive"}},t._l(t.toReceive,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ToReceive",{attrs:{order:t}})],1)}),1),a("q-tab-panel",{attrs:{name:"To Rate"}},t._l(t.toRate,function(t){return a("q-list",{key:t._id,attrs:{bordered:""}},[a("ToRate",{attrs:{order:t}})],1)}),1)],1)],1)],1)],1)],1)},n=[],o=a("a34a"),s=a.n(o),i=(a("7514"),a("96cf"),a("c973")),l=a.n(i),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ProductDetails",{attrs:{order:t.order,buttonVisible:!1}}),a("div",{attrs:{align:"right"}},["Full Payment"!=t.payment.payment_type?a("PaymentSchedules",{attrs:{schedules:t.payment.recurring_payments}}):t._e(),"Bank Deposit"==t.payment.payment_option?a("div",[0==t.payment.deposit_details.length||"For Approval"!=t.payment.deposit_details[t.payment.deposit_details.length-1].status?a("UploadDepositSlip",{attrs:{submitFunction:t.bankDeposit}}):a("div",{staticClass:"text-grey text-italic"},[a("b",[t._v("Pending Payment Status:")]),t._v(" For Approval\n      ")])],1):t._e(),"Online Payment"==t.payment.payment_option?a("div",{staticClass:"text-grey text-italic text-bold"},[t._v("Auto Debit/Credit")]):t._e()],1)],1)},d=[],u=a("6cdf"),p=a("2234"),m=a("8961"),b={components:{PaymentSchedules:u["a"],UploadDepositSlip:m["a"],ProductDetails:p["a"]},props:["order"],data:function(){return{payment:{}}},methods:{bankDeposit:function(t,e,a,r,n){var o={path:t,remarks:e,comments:"",date_uploaded:new Date,date_reviewed:"",reference_number:a,total_amount:r,date_deposited:n,status:"For Approval"};this.payment.deposit_details.push(o),this.$dbCon.service("shopper-payments").patch(this.payment._id,this.payment)}},mounted:function(){var t=this;this.$dbCon.service("shopper-payments").find({query:{related_id:this.order._id}}).then(function(e){t.payment=e.data[0]})}},h=b,f=a("2877"),_=Object(f["a"])(h,c,d,!1,null,null,null),v=_.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ProductDetails",{attrs:{order:t.order,buttonLabel:"Receive",buttonVisible:!0,updateFunction:t.update}})],1)},g=[],q={props:["order"],components:{ProductDetails:p["a"]},methods:{update:function(){var t=this;this.$q.dialog({title:"Mark as Received",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.order.status="For Rating",t.order.logs.push({event:"Received",date:new Date}),t.$dbCon.service("product-transactions").patch(t.order._id,t.order).then(function(){t.opened=!1,t.$createSalesRecord(t.order,"Product")})})}}},k=q,x=Object(f["a"])(k,y,g,!1,null,null,null),P=x.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ProductDetails",{attrs:{order:t.order,buttonLabel:"Rate now",buttonVisible:!0,updateFunction:t.updateFunc}}),a("q-dialog",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"text-h6 text-white bg-primary"},[a("div",[t._v("RATE YOUR ORDER")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"70vh"}},[a("div",{staticClass:"q-pt-sm q-pl-xl q-pr-xl"},[a("ProductDetails",{attrs:{order:t.order,buttonVisible:!1}}),a("div",{staticClass:"q-pt-md",attrs:{align:"center"}},[a("q-rating",{attrs:{size:"3.5em",color:"primary","icon-selected":"star"},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}}),t._v("\n            ("+t._s(t.rate)+")\n          ")],1),a("q-input",{attrs:{outlined:"",type:"textarea",dense:"",placeholder:"Tell us more!"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1)]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"grey"},on:{click:function(e){t.opened=!1}}}),a("q-btn",{attrs:{flat:"",label:"Rate",color:"primary"},on:{click:t.update}})],1)],1)],1)],1)},C=[],R={props:["order"],components:{ProductDetails:p["a"]},data:function(){return{opened:!1,rate:3,remarks:""}},methods:{updateFunc:function(){this.opened=!0},update:function(){var t=this;this.$q.dialog({title:"Rate this order",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.order.status="Done",t.order.rate=t.rate,t.order.remarks=t.remarks,t.order.logs.push({event:"Rated",date:new Date}),t.$dbCon.service("product-transactions").patch(t.order._id,t.order).then(function(){t.opened=!1})})}}},D=R,S=Object(f["a"])(D,w,C,!1,null,null,null),$=S.exports,F={components:{ToPay:v,ToReceive:P,ToRate:$,ProductDetails:p["a"]},data:function(){return{tab:"To Pay",toPay:[],forAcknowledgement:[],forPackaging:[],toShip:[],toPickup:[],toReceive:[],toRate:[],user:{},marker:1}},methods:{getOrder:function(){var t=l()(s.a.mark(function t(e){var a;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$dbCon.service("product-transactions").find({query:{shopper_id:this.user._id,status:e}});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=l()(s.a.mark(function t(){var e=this;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$getUser();case 2:this.user=t.sent,this.$dbCon.service("product-transactions").onDataChange(l()(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOrder("Pending Payment");case 2:return e.toPay=t.sent,t.next=5,e.getOrder("For Acknowledgement");case 5:return e.forAcknowledgement=t.sent,t.next=8,e.getOrder("For Packaging");case 8:return e.forPackaging=t.sent,t.next=11,e.getOrder("For Shipping");case 11:return e.toShip=t.sent,t.next=14,e.getOrder("For Pickup");case 14:return e.toPickup=t.sent,t.next=17,e.getOrder("For Receiving");case 17:return e.toReceive=t.sent,t.next=20,e.getOrder("For Rating");case 20:e.toRate=t.sent;case 21:case"end":return t.stop()}},t)})));case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},O=F,T=Object(f["a"])(O,r,n,!1,null,null,null);e["default"]=T.exports},"6cdf":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{staticClass:"q-pb-md",attrs:{icon:"history",label:"view payment schedules",flat:"",color:"black",size:"md"},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"text-h6 text-white bg-primary"},[a("div",[t._v("Payment Schedules")])]),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"70vh"}},[a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.schedules,function(e){return a("q-item",{key:e},[a("q-item-section",[a("q-item-label",{staticClass:"text-bold"},[t._v("Schedule: "+t._s(t.$formatDate_DateOnly(e.schedule)))]),a("q-item-label",{attrs:{caption:""}},[t._v("Amount: "+t._s(t.$prettyMoney(e.amount)))]),a("q-item-label",{attrs:{caption:""}},[t._v("Status: "),a("span",{class:"Pending"==e.status?"text-grey":"text-green"},[t._v(t._s("Pending"==e.status?"Pending":"Paid"))])])],1)],1)}),1)],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{flat:"",label:"Close",color:"grey"},on:{click:function(e){t.opened=!1}}})],1)],1)],1)],1)},n=[],o={props:{schedules:Object},data:function(){return{opened:!1}}},s=o,i=a("2877"),l=Object(i["a"])(s,r,n,!1,null,null,null);e["a"]=l.exports},8961:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-btn",{attrs:{color:"primary",label:"Upload Bank Receipt"},on:{click:function(e){t.opened=!0}}}),a("q-dialog",{model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[a("q-card",{staticStyle:{width:"600px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6 text-white"},[t._v("Upload Deposit Slip")])]),a("q-separator"),a("q-card-section",[a("input",{ref:"fileupload",staticClass:"hidden",attrs:{type:"file"},on:{change:t.onImageSelected}}),a("div",{staticStyle:{pointer:"cursor"}},[a("q-img",{staticStyle:{width:"100%",border:"1px solid grey"},attrs:{src:t.photoUrl,ratio:16/9},on:{click:function(e){return t.$refs.fileupload.click()}}})],1),a("q-input",{staticClass:"q-pt-sm",attrs:{outlined:"",label:"Reference Number"},model:{value:t.reference_number,callback:function(e){t.reference_number=e},expression:"reference_number"}}),a("q-input",{staticClass:"q-pt-sm",attrs:{outlined:"",type:"number",label:"Total Amount"},model:{value:t.total_amount,callback:function(e){t.total_amount=e},expression:"total_amount"}}),a("q-input",{staticClass:"q-pt-sm",attrs:{outlined:"",label:"Date Deposited",mask:"date",rules:["date"]},on:{click:function(){return t.$refs.qDateProxy.show()}},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"startDate",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{on:{input:function(){return t.$refs.startDate.hide()}},model:{value:t.date_deposited,callback:function(e){t.date_deposited=e},expression:"date_deposited"}})],1)],1)]},proxy:!0}]),model:{value:t.date_deposited,callback:function(e){t.date_deposited=e},expression:"date_deposited"}}),a("q-input",{attrs:{outlined:"",label:"Remarks",type:"textarea"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{label:"SUBMIT",color:"primary"},on:{click:t.validate}})],1)],1)],1)],1)},n=[],o=a("a34a"),s=a.n(o),i=(a("96cf"),a("c973")),l=a.n(i),c={props:{submitFunction:{type:Function}},data:function(){return{opened:!1,remarks:"",photoUrl:this.$appLink+"/statics/AddImage.png",fileSelected:{},reference_number:"",total_amount:"",date_deposited:"",data:{}}},methods:{onImageSelected:function(t){this.fileSelected={};try{this.fileSelected=t.target.files[0],this.photoUrl=URL.createObjectURL(t.target.files[0])}catch(e){this.photoUrl=this.$appLink+"/img/AddImage.png"}this.$forceUpdate()},validate:function(){var t=this;this.$q.dialog({title:"Confirmation",message:"Are you sure you want to proceed?",cancel:{push:!0,color:"grey",flat:!0}}).onOk(function(){t.submit()})},submit:function(){var t=l()(s.a.mark(function t(){var e;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$uploadFile(this.fileSelected);case 2:e=t.sent,this.submitFunction(e,this.remarks,this.reference_number,this.total_amount,this.date_deposited),this.opened=!1;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},d=c,u=a("2877"),p=Object(u["a"])(d,r,n,!1,null,null,null);e["a"]=p.exports}}]);